{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap b67d8614317c3ade2cc9","webpack:///./src/app.ts","webpack:///./src/controller/ui.ts","webpack:///./src/controller/usage.ts","webpack:///webpack:///webpack/universalModuleDefinition","webpack:///webpack:/webpack/bootstrap f7c531a9686cd33d674b","webpack:///webpack:///src/iq.ts","webpack:///webpack:///src/constants/index.ts","webpack:///webpack:///src/constants/bt709.ts","webpack:///webpack:///src/conversion/index.ts","webpack:///webpack:///src/conversion/rgb2xyz.ts","webpack:///webpack:///src/conversion/rgb2hsl.ts","webpack:///webpack:///src/utils/arithmetic.ts","webpack:///webpack:///src/conversion/rgb2lab.ts","webpack:///webpack:///src/conversion/xyz2lab.ts","webpack:///webpack:///src/conversion/lab2xyz.ts","webpack:///webpack:///src/conversion/lab2rgb.ts","webpack:///webpack:///src/conversion/xyz2rgb.ts","webpack:///webpack:///src/distance/index.ts","webpack:///webpack:///src/distance/cie94.ts","webpack:///webpack:///src/distance/ciede2000.ts","webpack:///webpack:///src/distance/cmetric.ts","webpack:///webpack:///src/distance/euclidean.ts","webpack:///webpack:///src/distance/euclideanRgbQuantWithAlpha.ts","webpack:///webpack:///src/distance/euclideanRgbQuantWOAlpha.ts","webpack:///webpack:///src/distance/manhattan.ts","webpack:///webpack:///src/distance/manhattanSRGB.ts","webpack:///webpack:///src/distance/manhattanNommyde.ts","webpack:///webpack:///src/distance/pngQuant.ts","webpack:///webpack:///src/palette/index.ts","webpack:///webpack:///src/palette/neuquant/neuquant.ts","webpack:///webpack:///src/utils/palette.ts","webpack:///webpack:///src/utils/pointContainer.ts","webpack:///webpack:///src/utils/point.ts","webpack:///webpack:///src/palette/neuquant/neuquantFloat.ts","webpack:///webpack:///src/palette/rgbquant/rgbquant.ts","webpack:///webpack:///src/palette/rgbquant/colorHistogram.ts","webpack:///webpack:///src/utils/hueStatistics.ts","webpack:///webpack:///src/palette/wu/wuQuant.ts","webpack:///webpack:///src/image/index.ts","webpack:///webpack:///src/image/nearestColor.ts","webpack:///webpack:///src/image/array.ts","webpack:///webpack:///src/image/riemersma.ts","webpack:///webpack:///src/image/spaceFillingCurves/hilbertCurve.ts","webpack:///webpack:///src/quality/index.ts","webpack:///webpack:///src/quality/ssim.ts","webpack:///webpack:///src/utils/index.ts","webpack:///./src/ui/leftPanel/leftPanel.ts","webpack:///./src/ui/leftPanel/configForm.ts","webpack:///./src/ui/leftPanel/imageFileExplorer.ts","webpack:///./src/data/imageList.ts","webpack:///./src/ui/rightPanel/rightPanel.ts","webpack:///./src/ui/rightPanel/clickToCompare.ts","webpack:///./src/ui/rightPanel/originalVsQuantized.ts"],"names":[],"mappings":"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","file":"D:\\projects\\my\\github\\image-quantization\\demo\\html/dist/app.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"app\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"app\"] = factory();\n\telse\n\t\troot[\"app\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap b67d8614317c3ade2cc9\n **/","///<reference path=\"../lib/webix/webix.d.ts\"/>\r\nimport {initialize} from \"./controller/ui\";\r\nimport {leftPanel} from \"./ui/leftPanel/leftPanel\";\r\nimport {rightPanel} from \"./ui/rightPanel/rightPanel\";\r\n\r\nwebix.ready(function () {\r\n\r\n\twebix.ui({\r\n\t\ttype : \"line\",\r\n\t\tcols : [\r\n\t\t\t{\r\n\t\t\t\twidth  : 500,\r\n\t\t\t\theader : \"Settings & Folders\", headerHeight : 45,\r\n\t\t\t\tbody   : leftPanel\r\n\t\t\t},\r\n\t\t\t{ view : \"resizer\" },\r\n\t\t\trightPanel\r\n\t\t]\r\n\t});\r\n\r\n\tinitialize();\r\n\r\n});\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/app.ts\n **/","import {QuantizationUsage} from \"./usage\";\r\n\r\nvar quantizeResult = null;\r\n\r\nexport function initialize() {\r\n\tdocument.body.ondrop = event=> {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tvar files = event.dataTransfer.files;\r\n\t\tfor (var i = 0; i < files.length; i++) {\r\n\t\t\tprocessDrag(files[ i ]);\r\n\t\t}\r\n\t\t//readfiles(event.dataTransfer.files);\r\n\t\tconsole.log(event);\r\n\t};\r\n\r\n\tdocument.body.ondragover = event=> {\r\n\t\tevent.preventDefault();\r\n\t};\r\n}\r\n\r\nexport function update(quantize : boolean) {\r\n\tif (quantize) {\r\n\t\tvar imageFoldersControl = (<webix.ui.grouplist>$$(\"image\"));\r\n\t\tvar selectedId          = imageFoldersControl.getSelectedId(true);\r\n\t\tif (selectedId.length > 0) {\r\n\t\t\tvar node = imageFoldersControl.getItemNode(selectedId[ 0 ]);\r\n\t\t\tif (node) {\r\n\t\t\t\tvar img : HTMLImageElement = (<any>node).firstElementChild;\r\n\r\n\t\t\t\tif (img.tagName === \"IMG\") {\r\n\t\t\t\t\tvar colors                 = parseInt((<webix.ui.richselect>$$(\"option-colors\")).getValue(), 10),\r\n\t\t\t\t\t\tpaletteQuantizerMethod = parseInt((<webix.ui.richselect>$$(\"option-palette\")).getValue(), 10),\r\n\t\t\t\t\t\timageQuantizerMethod   = parseInt((<webix.ui.richselect>$$(\"option-image\")).getValue(), 10) - 2,\r\n\t\t\t\t\t\tcolorDistanceMethod    = parseInt((<webix.ui.richselect>$$(\"option-distance\")).getValue(), 10);\r\n\r\n\t\t\t\t\tquantizeResult = (new QuantizationUsage()).quantize(img, colors, paletteQuantizerMethod, imageQuantizerMethod, colorDistanceMethod);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tif (quantizeResult) {\r\n\t\tfillClickToCompare(quantizeResult);\r\n\t\tfillOriginalVsQuantized(quantizeResult);\r\n\t}\r\n}\r\n\r\nfunction fillOriginalVsQuantized(result) {\r\n\tvar prefix = \"id-imageView2-\";\r\n\t// CLEANUP\r\n\t//container.innerHTML = \"\";\r\n\t$$(\"imageView2-statistics\").getNode().firstElementChild.innerHTML = \" (SSIM: \" + result.ssim.toFixed(2) + \", Time: \" + result.time + \" )\";\r\n\r\n\t// DRAW ORIGINAL IMAGE\r\n\tvar canvas          = QuantizationUsage.drawPixels(result.original, result.original.getWidth());\r\n\tcanvas.id           = prefix + \"original-image\";\r\n\tcanvas.className    = \"image-semi-transparent-background\";\r\n\t//canvas.style.display = \"none\";\r\n\tvar container       = $$(\"imageView2-image-original\").getNode().firstElementChild;\r\n\tcontainer.innerHTML = \"\";\r\n\tcontainer.appendChild(canvas);\r\n\r\n\t// DRAW REDUCED/DITHERED IMAGE\r\n\tcanvas              = QuantizationUsage.drawPixels(result.image, result.image.getWidth());\r\n\tcanvas.id           = prefix + \"reduced-image\";\r\n\tcanvas.className    = \"image-semi-transparent-background\";\r\n\tcontainer           = $$(\"imageView2-image-quantized\").getNode().firstElementChild;\r\n\tcontainer.innerHTML = \"\";\r\n\tcontainer.appendChild(canvas);\r\n\r\n\t// DRAW PALETTE\r\n\tcanvas              = QuantizationUsage.drawPixels(result.palette.getPointContainer(), 16, 128);\r\n\tcontainer           = $$(\"imageView2-palette\").getNode().firstElementChild;\r\n\tcontainer.innerHTML = \"\";\r\n\tcontainer.appendChild(canvas);\r\n}\r\n\r\nfunction fillClickToCompare(result) {\r\n\tvar prefix                                                        = \"id-imageView2-\";\r\n\t// CLEANUP\r\n\t$$(\"imageView1-statistics\").getNode().firstElementChild.innerHTML = \" (SSIM: \" + result.ssim.toFixed(2) + \", Time: \" + result.time + \" )\";\r\n\r\n\t// DRAW ORIGINAL IMAGE\r\n\tvar canvasOriginal           = QuantizationUsage.drawPixels(result.original, result.original.getWidth());\r\n\tcanvasOriginal.id            = prefix + \"original-image\";\r\n\tcanvasOriginal.className     = \"image-semi-transparent-background\";\r\n\tcanvasOriginal.style.display = \"none\";\r\n\tvar container                = $$(\"imageView1-image\").getNode().firstElementChild;\r\n\tcontainer.innerHTML          = \"\";\r\n\tcontainer.appendChild(canvasOriginal);\r\n\r\n\t// DRAW REDUCED/DITHERED IMAGE\r\n\tvar canvasReduced       = QuantizationUsage.drawPixels(result.image, result.image.getWidth());\r\n\tcanvasReduced.id        = prefix + \"reduced-image\";\r\n\tcanvasReduced.className = \"image-semi-transparent-background\";\r\n\tcontainer               = $$(\"imageView1-image\").getNode().firstElementChild;\r\n\tcontainer.appendChild(canvasReduced);\r\n\r\n\t// Add Container handlers\r\n\tcontainer.onmousedown = () => {\r\n\t\tcanvasOriginal.style.display = \"\";\r\n\t\tcanvasReduced.style.display  = \"none\";\r\n\t};\r\n\tcontainer.onmouseup   = () => {\r\n\t\tcanvasOriginal.style.display = \"none\";\r\n\t\tcanvasReduced.style.display  = \"\";\r\n\t};\r\n\r\n\t// DRAW PALETTE\r\n\tvar canvasPalette   = QuantizationUsage.drawPixels(result.palette.getPointContainer(), 16, 128);\r\n\tcontainer           = $$(\"imageView1-palette\").getNode().firstElementChild;\r\n\tcontainer.innerHTML = \"\";\r\n\tcontainer.appendChild(canvasPalette);\r\n}\r\n\r\nfunction processDrag(file) {\r\n\tvar reader    = new FileReader();\r\n\treader.onload = function (event) {\r\n\t\t(<webix.ui.grouplist>$$(\"image\")).add({\r\n\t\t\tid      : 'image-' + file.name,\r\n\t\t\tdataUrl : (<any>event.target).result\r\n\t\t});\r\n\t};\r\n\r\n\treader.readAsDataURL(file);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controller/ui.ts\n **/","import * as IQ from \"../../../../dist/iq\";\r\n\r\nexport class QuantizationUsage {\r\n\tstatic drawPixels(pointContainer, width0, width1? : number) {\r\n\t\tvar idxi8  = pointContainer.toUint8Array(),\r\n\t\t\tidxi32 = new Uint32Array(idxi8.buffer);\r\n\r\n\t\twidth1 = width1 || width0;\r\n\r\n\t\tvar can        = document.createElement(\"canvas\"),\r\n\t\t\tcan2       = document.createElement(\"canvas\"),\r\n\t\t\tctx : any  = can.getContext(\"2d\"),\r\n\t\t\tctx2 : any = can2.getContext(\"2d\");\r\n\r\n\t\tcan.width   = width0;\r\n\t\tcan.height  = Math.ceil(idxi32.length / width0);\r\n\t\tcan2.width  = width1;\r\n\t\tcan2.height = Math.ceil(can.height * width1 / width0);\r\n\r\n\t\tctx.imageSmoothingEnabled = ctx.mozImageSmoothingEnabled = ctx.webkitImageSmoothingEnabled = ctx.msImageSmoothingEnabled = false;\r\n\t\tctx2.imageSmoothingEnabled = ctx2.mozImageSmoothingEnabled = ctx2.webkitImageSmoothingEnabled = ctx2.msImageSmoothingEnabled = false;\r\n\r\n\t\tvar imgd = ctx.createImageData(can.width, can.height);\r\n\r\n\t\tif (QuantizationUsage._typeOf(imgd.data) == \"CanvasPixelArray\") {\r\n\t\t\tvar data = imgd.data;\r\n\t\t\tfor (var i = 0, len = data.length; i < len; ++i) {\r\n\t\t\t\tdata[ i ] = idxi8[ i ];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar buf32 = new Uint32Array(imgd.data.buffer);\r\n\t\t\tbuf32.set(idxi32);\r\n\t\t}\r\n\r\n\t\tctx.putImageData(imgd, 0, 0);\r\n\r\n\t\tctx2.drawImage(can, 0, 0, can2.width, can2.height);\r\n\r\n\t\treturn can2;\r\n\t}\r\n\r\n\tprivate static _typeOf(val) {\r\n\t\treturn Object.prototype.toString.call(val).slice(8, -1);\r\n\t}\r\n\r\n\tprivate _timeMark(title, callback) {\r\n\t\tvar start = Date.now();\r\n\t\tcallback();\r\n\t\tconsole.log(title + \": \" + (Date.now() - start));\r\n\t}\r\n\r\n\tprivate _baseName(src) {\r\n\t\treturn src.split(\"/\").pop().split(\".\");\r\n\t}\r\n\r\n\tpublic quantize(img : HTMLImageElement, optionColors, optionPaletteQuantizer, optionImageDithering, optionColorDistance) : {palette : IQ.utils.Palette, image : IQ.utils.PointContainer, time : number, ssim : number, original : IQ.utils.PointContainer} {\r\n\t\tvar pointBuffer : IQ.utils.PointContainer,\r\n\t\t\toriginalPointBuffer : IQ.utils.PointContainer,\r\n\t\t\tpaletteQuantizer : IQ.palette.IPaletteQuantizer,\r\n\t\t\tid = this._baseName(img.src)[ 0 ],\r\n\t\t\tpalette : IQ.utils.Palette,\r\n\t\t\timage : IQ.utils.PointContainer;\r\n\r\n\t\tpointBuffer         = IQ.utils.PointContainer.fromHTMLImageElement(img);\r\n\t\toriginalPointBuffer = pointBuffer.clone();\r\n\r\n\t\tvar time = Date.now();\r\n\r\n\t\tconsole.log(\"image = \" + id);\r\n\t\tthis._timeMark(\"...sample\", () => {\r\n\t\t\tvar distance : IQ.distance.IDistanceCalculator = this._getColorDistanceCalculator(optionColorDistance);\r\n\r\n\t\t\tswitch (optionPaletteQuantizer) {\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tpaletteQuantizer = new IQ.palette.NeuQuant(distance, optionColors);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tpaletteQuantizer = new IQ.palette.RGBQuant(distance, optionColors);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tpaletteQuantizer = new IQ.palette.WuQuant(distance, optionColors);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tpaletteQuantizer = new IQ.palette.NeuQuantFloat(distance, optionColors);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tpaletteQuantizer.sample(pointBuffer);\r\n\t\t});\r\n\r\n\t\tthis._timeMark(\"...palette\", function () {\r\n\t\t\tpalette = paletteQuantizer.quantize();\r\n\t\t});\r\n\r\n\t\tthis._timeMark(\"...dither\", () => {\r\n\t\t\tvar distance : IQ.distance.IDistanceCalculator = this._getColorDistanceCalculator(optionColorDistance);\r\n\r\n\t\t\tvar imageQuantizer;\r\n\t\t\tif (optionImageDithering === -1) {\r\n\t\t\t\timageQuantizer = new IQ.image.NearestColor(distance);\r\n\t\t\t} else if (optionImageDithering === 9) {\r\n\t\t\t\timageQuantizer = new IQ.image.ErrorDiffusionRiemersma(distance);\r\n\t\t\t} else {\r\n\t\t\t\timageQuantizer = new IQ.image.ErrorDiffusionArray(distance, optionImageDithering, true, 0, false);\r\n\t\t\t}\r\n\r\n\t\t\timage = imageQuantizer.quantize(pointBuffer, palette);\r\n\t\t});\r\n\r\n\t\ttime     = Date.now() - time;\r\n\t\tvar ssim = new IQ.quality.SSIM().compare(originalPointBuffer, pointBuffer);\r\n\r\n\t\tthis._checkImageAndPalette(image, palette, optionColors);\r\n\r\n\t\treturn {\r\n\t\t\toriginal : originalPointBuffer,\r\n\t\t\timage    : image,\r\n\t\t\tpalette  : palette,\r\n\t\t\ttime     : time,\r\n\t\t\tssim     : ssim\r\n\t\t};\r\n\t}\r\n\r\n\tprivate _getColorDistanceCalculator(option) : IQ.distance.IDistanceCalculator {\r\n\t\tswitch (option) {\r\n\t\t\tcase 1:\r\n\t\t\t\treturn new IQ.distance.Euclidean();\r\n\t\t\tcase 2:\r\n\t\t\t\treturn new IQ.distance.Manhattan();\r\n\t\t\tcase 3:\r\n\t\t\t\treturn new IQ.distance.CIEDE2000();\r\n\t\t\tcase 4:\r\n\t\t\t\treturn new IQ.distance.CIE94();\r\n\t\t\tcase 5:\r\n\t\t\t\treturn new IQ.distance.EuclideanRgbQuantWOAlpha();\r\n\t\t\tcase 6:\r\n\t\t\t\treturn new IQ.distance.EuclideanRgbQuantWithAlpha();\r\n\t\t\tcase 7:\r\n\t\t\t\treturn new IQ.distance.ManhattanSRGB();\r\n\t\t\tcase 8:\r\n\t\t\t\treturn new IQ.distance.CMETRIC();\r\n\t\t\tcase 9:\r\n\t\t\t\treturn new IQ.distance.PNGQUANT();\r\n\t\t\tcase 10:\r\n\t\t\t\treturn new IQ.distance.ManhattanNommyde();\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _checkImageAndPalette(image : IQ.utils.PointContainer, palette : IQ.utils.Palette, colors : number) : void {\r\n\t\t// check palette\r\n\t\tif (palette.getPointContainer().getPointArray().length > colors) {\r\n\t\t\tthrow new Error(\"Palette contains more colors than allowed\");\r\n\t\t}\r\n\r\n\t\t// check image\r\n\t\timage.getPointArray().forEach((point : IQ.utils.Point) => {\r\n\t\t\tif (!palette.has(point)) {\r\n\t\t\t\tthrow new Error(\"Image contains color not in palette: \" + point.r + \",\" + point.g + \",\" + point.b + \",\" + point.a);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controller/usage.ts\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"iq\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"iq\"] = factory();\n\telse\n\t\troot[\"iq\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap f7c531a9686cd33d674b\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:/webpack/bootstrap f7c531a9686cd33d674b\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * iq.ts - Image Quantization Library\r\n */\r\nimport * as constants from \"./constants\"\r\nimport * as conversion from \"./conversion\"\r\nimport * as distance from \"./distance\"\r\nimport * as palette from \"./palette\"\r\nimport * as image from \"./image\"\r\nimport * as quality from \"./quality\"\r\nimport * as utils from \"./utils\"\r\n\r\nexport {\r\n\tconstants,\r\n\tconversion,\r\n\tdistance,\r\n\tpalette,\r\n\timage,\r\n\tquality,\r\n\tutils\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/iq.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/iq.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * constants.ts - part of Image Quantization Library\r\n */\r\nimport * as bt709 from \"./bt709\"\r\n\r\nexport {\r\n\tbt709\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants/index.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/constants/index.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * constants.ts - part of Image Quantization Library\r\n */\r\n\r\n/**\r\n * sRGB (based on ITU-R Recommendation BT.709)\r\n * http://en.wikipedia.org/wiki/SRGB\r\n */\r\nenum Y {\r\n\tRED = .2126, GREEN = .7152, BLUE = .0722, WHITE = 1\r\n}\r\n\r\nenum x {\r\n\tRED = .6400, GREEN = .3000, BLUE = .1500, WHITE = .3127\r\n}\r\n\r\nenum y {\r\n\tRED = .3300, GREEN = .6000, BLUE = .0600, WHITE = .3290\r\n}\r\n\r\nexport {\r\n\tY,\r\n\tx,\r\n\ty\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants/bt709.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/constants/bt709.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * iq.ts - Image Quantization Library\r\n */\r\nimport {rgb2xyz} from \"./rgb2xyz\"\r\nimport {rgb2hsl} from \"./rgb2hsl\"\r\nimport {rgb2lab} from \"./rgb2lab\"\r\nimport {lab2xyz} from \"./lab2xyz\"\r\nimport {lab2rgb} from \"./lab2rgb\"\r\nimport {xyz2lab} from \"./xyz2lab\"\r\nimport {xyz2rgb} from \"./xyz2rgb\"\r\n\r\nexport {\r\n\trgb2xyz,\r\n\trgb2hsl,\r\n\trgb2lab,\r\n\tlab2xyz,\r\n\tlab2rgb,\r\n\txyz2lab,\r\n\txyz2rgb,\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/conversion/index.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/conversion/index.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * rgb2xyz.ts - part of Image Quantization Library\r\n */\r\nexport function rgb2xyz(r : number, g : number, b : number) : { x : number; y : number; z : number } {\r\n\tr = r / 255;        //R from 0 to 255\r\n\tg = g / 255;        //G from 0 to 255\r\n\tb = b / 255;        //B from 0 to 255\r\n\r\n\t// gamma correction, see https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\r\n\tr = r > 0.04045 ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\r\n\tg = g > 0.04045 ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\r\n\tb = b > 0.04045 ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\r\n\r\n\t// Observer. = 2°, Illuminant = D65\r\n\treturn {\r\n\t\tx : r * 0.4124 + g * 0.3576 + b * 0.1805,\r\n\t\ty : r * 0.2126 + g * 0.7152 + b * 0.0722,\r\n\t\tz : r * 0.0193 + g * 0.1192 + b * 0.9505\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/conversion/rgb2xyz.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/conversion/rgb2xyz.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * rgb2hsl.ts - part of Image Quantization Library\r\n */\r\nimport {min3, max3} from \"../utils/arithmetic\"\r\n\r\n/**\r\n * Calculate HSL from RGB\r\n * Hue is in degrees [0..360]\r\n * Lightness: [0..1]\r\n * Saturation: [0..1]\r\n * http://web.archive.org/web/20060914040436/http://local.wasp.uwa.edu.au/~pbourke/colour/hsl/\r\n */\r\nexport function rgb2hsl(r : number, g : number, b : number) : {h : number; s : number; l : number} {\r\n\tvar min   = min3(r, g, b),\r\n\t\tmax   = max3(r, g, b),\r\n\t\tdelta = max - min,\r\n\t\tl     = (min + max) / 510,\r\n\t\ts     = 0;\r\n\r\n\tif (l > 0 && l < 1)\r\n\t\ts = delta / (l < 0.5 ? (max + min) : (510 - max - min));\r\n\r\n\tvar h = 0;\r\n\tif (delta > 0) {\r\n\t\tif (max === r) {\r\n\t\t\th = (g - b) / delta;\r\n\t\t} else if (max === g) {\r\n\t\t\th = (2 + (b - r) / delta);\r\n\t\t} else {\r\n\t\t\th = (4 + (r - g) / delta);\r\n\t\t}\r\n\r\n\t\th *= 60;\r\n\t\tif (h < 0) h += 360;\r\n\t}\r\n\treturn { h : h, s : s, l : l };\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/conversion/rgb2hsl.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/conversion/rgb2hsl.ts\n **/","export function degrees2radians(n : number) : number {\r\n\treturn n * (Math.PI / 180);\r\n}\r\n\r\nexport function max3(a : number, b : number, c : number) {\r\n\tvar m = a;\r\n\t(m < b) && (m = b);\r\n\t(m < c) && (m = c);\r\n\treturn m;\r\n}\r\n\r\nexport function min3(a : number, b : number, c : number) {\r\n\tvar m = a;\r\n\t(m > b) && (m = b);\r\n\t(m > c) && (m = c);\r\n\treturn m;\r\n}\r\n\r\nexport function intInRange(value : number, low : number, high : number) {\r\n\tif (value > high) value = high;\r\n\tif (value < low) value = low;\r\n\treturn value | 0;\r\n}\r\n\r\nexport function stableSort<T>(arrayToSort : T[], callback : (a : T, b : T) => number) : T[] {\r\n\tvar type = typeof arrayToSort[ 0 ],\r\n\t\tsorted : T[];\r\n\r\n\tif (type === \"number\" || type === \"string\") {\r\n\t\tvar ord = Object.create(null);\r\n\t\tfor (var i = 0, l = arrayToSort.length; i < l; i++) {\r\n\t\t\tvar val : string = <any>arrayToSort[ i ];\r\n\t\t\tif (ord[ val ] || ord[ val ] === 0) continue;\r\n\t\t\tord[ val ] = i;\r\n\t\t}\r\n\r\n\t\tsorted = arrayToSort.sort(function (a, b) {\r\n\t\t\treturn callback(a, b) || ord[ <any>a ] - ord[ <any>b ];\r\n\t\t});\r\n\t} else {\r\n\t\tvar ord2 : T[] = arrayToSort.slice(0);\r\n\t\tsorted         = arrayToSort.sort(function (a, b) {\r\n\t\t\treturn callback(a, b) || ord2.indexOf(a) - ord2.indexOf(b);\r\n\t\t});\r\n\t}\r\n\r\n\treturn sorted;\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/arithmetic.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/utils/arithmetic.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * rgb2lab.ts - part of Image Quantization Library\r\n */\r\nimport {rgb2xyz} from \"./rgb2xyz\"\r\nimport {xyz2lab} from \"./xyz2lab\"\r\n\r\nexport function rgb2lab(r : number, g : number, b : number) : { L : number; a : number; b: number } {\r\n\tvar xyz = rgb2xyz(r, g, b);\r\n\treturn xyz2lab(xyz.x, xyz.y, xyz.z);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/conversion/rgb2lab.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/conversion/rgb2lab.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * xyz2lab.ts - part of Image Quantization Library\r\n */\r\nvar _refX : number = 0.95047, //ref_X =  95.047   Observer= 2°, Illuminant= D65\r\n\t_refY : number = 0.10000, //ref_Y = 100.000\r\n\t_refZ : number = 1.08883; //ref_Z = 108.883\r\n\r\nfunction _xyz2lab_helper(value : number) : number {\r\n\treturn value > 0.008856451679035631 ? Math.pow(value, 1 / 3) : ( 7.787037037037037 * value + 0.13793103448275862);\r\n}\r\n\r\nexport function xyz2lab(x : number, y : number, z : number) : {L : number; a : number; b : number} {\r\n\tx = x / _refX;          //ref_X =  95.047   Observer= 2°, Illuminant= D65\r\n\ty = y / _refY;          //ref_Y = 100.000\r\n\tz = z / _refZ;          //ref_Z = 108.883\r\n\r\n\tx = _xyz2lab_helper(x);\r\n\ty = _xyz2lab_helper(y);\r\n\tz = _xyz2lab_helper(z);\r\n\r\n\treturn {\r\n\t\tL : ( 116 * y ) - 16,\r\n\t\ta : 500 * ( x - y ),\r\n\t\tb : 200 * ( y - z )\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/conversion/xyz2lab.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/conversion/xyz2lab.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * lab2xyz.ts - part of Image Quantization Library\r\n */\r\n\r\nvar _refX : number = 0.95047, //ref_X =  95.047   Observer= 2°, Illuminant = D65\r\n\t_refY : number = 0.10000, //ref_Y = 100.000\r\n\t_refZ : number = 1.08883; //ref_Z = 108.883\r\n\r\nexport function lab2xyz(L : number, a : number, b : number) : {x : number; y : number; z : number} {\r\n\tvar y = ( L + 16 ) / 116, x = a / 500 + y, z = y - b / 200;\r\n\r\n\tvar y3 = Math.pow(y, 3), x3 = Math.pow(x, 3), z3 = Math.pow(z, 3);\r\n\r\n\ty = y3 > 0.008856 ? y3 : ( y - 16 / 116 ) / 7.787;\r\n\tx = x3 > 0.008856 ? x3 : ( x - 16 / 116 ) / 7.787;\r\n\tz = z3 > 0.008856 ? z3 : ( z - 16 / 116 ) / 7.787;\r\n\r\n\treturn {\r\n\t\tx : _refX * x,\r\n\t\ty : _refY * y,\r\n\t\tz : _refZ * z\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/conversion/lab2xyz.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/conversion/lab2xyz.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * lab2rgb.ts - part of Image Quantization Library\r\n */\r\nimport {lab2xyz} from \"./lab2xyz\"\r\nimport {xyz2rgb} from \"./xyz2rgb\"\r\n\r\nexport function lab2rgb(L : number, a : number, b : number) : { r : number; g : number; b : number } {\r\n\tvar xyz = lab2xyz(L, a, b);\r\n\treturn xyz2rgb(xyz.x, xyz.y, xyz.z);\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/conversion/lab2rgb.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/conversion/lab2rgb.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * xyz2rgb.ts - part of Image Quantization Library\r\n */\r\nimport {intInRange} from \"../utils/arithmetic\"\r\n\r\nexport function xyz2rgb(x : number, y : number, z : number) : { r : number; g : number; b : number } {\r\n\t// Observer. = 2°, Illuminant = D65\r\n\tvar r = x * 3.2406 + y * -1.5372 + z * -0.4986,\r\n\t\tg = x * -0.9689 + y * 1.8758 + z * 0.0415,\r\n\t\tb = x * 0.0557 + y * -0.2040 + z * 1.0570;\r\n\r\n\t// gamma correction, see https://en.wikipedia.org/wiki/SRGB#The_reverse_transformation\r\n\tr = r > 0.0031308 ? 1.055 * Math.pow(r, 1 / 2.4) - 0.055 : 12.92 * r;\r\n\tg = g > 0.0031308 ? 1.055 * Math.pow(g, 1 / 2.4) - 0.055 : 12.92 * g;\r\n\tb = b > 0.0031308 ? 1.055 * Math.pow(b, 1 / 2.4) - 0.055 : 12.92 * b;\r\n\r\n\treturn {\r\n\t\tr : intInRange(r * 255, 0, 255),\r\n\t\tg : intInRange(g * 255, 0, 255),\r\n\t\tb : intInRange(b * 255, 0, 255)\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/conversion/xyz2rgb.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/conversion/xyz2rgb.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * iq.ts - Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {CIE94} from \"./cie94\"\r\nimport {CIEDE2000} from \"./ciede2000\"\r\nimport {CMETRIC} from \"./cmetric\"\r\nimport {Euclidean} from \"./euclidean\"\r\nimport {EuclideanRgbQuantWithAlpha} from \"./euclideanRgbQuantWithAlpha\"\r\nimport {EuclideanRgbQuantWOAlpha} from \"./euclideanRgbQuantWOAlpha\"\r\nimport {Manhattan} from \"./manhattan\"\r\nimport {ManhattanSRGB} from \"./manhattanSRGB\"\r\nimport {ManhattanNommyde} from \"./manhattanNommyde\"\r\nimport {PNGQUANT} from \"./pngQuant\"\r\n\r\nexport {\r\n\tIDistanceCalculator,\r\n\tCIE94,\r\n\tCIEDE2000,\r\n\tCMETRIC,\r\n\tEuclidean,\r\n\tEuclideanRgbQuantWithAlpha,\r\n\tEuclideanRgbQuantWOAlpha,\r\n\tManhattan,\r\n\tManhattanSRGB,\r\n\tManhattanNommyde,\r\n\tPNGQUANT\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/index.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/index.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * cie94.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Point} from \"../utils/point\"\r\nimport {rgb2lab} from \"../conversion/rgb2lab\"\r\n\r\n/**\r\n * Computes CIE94 distance between 2 colors in LAB space.\r\n *\r\n * p1 = [l1, a1, b1]\r\n * p2 = [l2, a2, b2]\r\n * Returns distance:float\r\n *\r\n * Usage example:\r\n *     var d = CIE94_dist([94.0, -0.1, -0.55], [77.0, 0.5, 0.45])\r\n *\r\n * Iulius Curt, april 2013\r\n */\r\nexport class CIE94 implements IDistanceCalculator {\r\n\tprivate static _Kl = 2.0;\r\n\tprivate static _K1 = 0.048;\r\n\tprivate static _K2 = 0.014;\r\n\r\n\tprivate _whitePoint : {r : number; g : number; b : number; a : number};\r\n\tprivate _maxCIE94Distance : number;\r\n\r\n\tconstructor() {\r\n\t\t// set default maximal color component deltas (255 - 0 = 255)\r\n\t\tthis.setWhitePoint(255, 255, 255, 255);\r\n\t}\r\n\r\n\tsetWhitePoint(r : number, g : number, b : number, a : number) : void {\r\n\t\tthis._whitePoint       = { r : r, g : g, b : b, a : a };\r\n\t\tthis._maxCIE94Distance = 200;\r\n\t}\r\n\r\n\tcalculateRaw(r1 : number, g1 : number, b1 : number, a1 : number, r2 : number, g2 : number, b2 : number, a2 : number) : number {\r\n\t\tvar lab1 = rgb2lab(r1 / this._whitePoint.r, g1 / this._whitePoint.g, b1 / this._whitePoint.b),\r\n\t\t\tlab2 = rgb2lab(r2 / this._whitePoint.r, g2 / this._whitePoint.g, b2 / this._whitePoint.b);\r\n\r\n\t\tvar dL     = lab1.L - lab2.L,\r\n\t\t\tdA     = lab1.a - lab2.a,\r\n\t\t\tdB     = lab1.b - lab2.b,\r\n\t\t\tc1     = Math.sqrt(lab1.a * lab1.a + lab1.b * lab1.b),\r\n\t\t\tc2     = Math.sqrt(lab2.a * lab2.a + lab2.b * lab2.b),\r\n\t\t\tdC     = c1 - c2,\r\n\t\t\tdeltaH = dA * dA + dB * dB - dC * dC;\r\n\r\n\t\tdeltaH = deltaH < 0 ? 0 : Math.sqrt(deltaH);\r\n\r\n\t\tvar i = Math.pow(dL / CIE94._Kl, 2) + Math.pow(dC / (1.0 + CIE94._K1 * c1), 2) + Math.pow(deltaH / (1.0 + CIE94._K2 * c1), 2);\r\n\t\treturn i < 0 ? 0 : i;\r\n\t}\r\n\r\n\tcalculateNormalized(colorA : Point, colorB : Point) : number {\r\n\t\treturn Math.sqrt(this.calculateRaw(colorA.r, colorA.g, colorA.b, colorA.a, colorB.r, colorB.g, colorB.b, colorB.a)) / this._maxCIE94Distance;\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/cie94.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/cie94.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * ciede2000.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Point} from \"../utils/point\"\r\nimport {rgb2lab} from \"../conversion/rgb2lab\"\r\nimport {degrees2radians} from \"../utils/arithmetic\"\r\n\r\n\t/**\r\n\t * CIEDE2000 algorithm (optimized)\r\n\t *\r\n\t */\r\n\texport class CIEDE2000 implements IDistanceCalculator {\r\n\t\tprivate static _kL : number = 1;\r\n\t\tprivate static _kC : number = 1;\r\n\t\tprivate static _kH : number = 1;\r\n\t\tprivate static _pow25to7 : number = Math.pow(25, 7);\r\n\t\tprivate static _deg360InRad : number = degrees2radians(360);\r\n\t\tprivate static _deg180InRad : number = degrees2radians(180);\r\n\t\tprivate static _deg30InRad : number = degrees2radians(30);\r\n\t\tprivate static _deg6InRad : number = degrees2radians(6);\r\n\t\tprivate static _deg63InRad : number = degrees2radians(63);\r\n\r\n\t\tprivate _whitePoint : {r : number; g : number; b : number; a : number};\r\n\r\n\t\tconstructor() {\r\n\t\t\tthis.setWhitePoint(255, 255, 255, 255);\r\n\t\t}\r\n\r\n\t\tsetWhitePoint(r : number, g : number, b : number, a : number) : void {\r\n\t\t\tthis._whitePoint = {r : r, g : g, b : b, a : a};\r\n\t\t}\r\n\r\n\t\tcalculateRaw(r1 : number, g1 : number, b1 : number, a1 : number, r2 : number, g2 : number, b2 : number, a2 : number) : number {\r\n\t\t\tvar lab1 = rgb2lab(r1 / this._whitePoint.r, g1 / this._whitePoint.g, b1 / this._whitePoint.b),\r\n\t\t\t\tlab2 = rgb2lab(r2 / this._whitePoint.r, g2 / this._whitePoint.g, b2 / this._whitePoint.b),\r\n\t\t\t\tdA = (a2 - a1) / this._whitePoint.a;\r\n\r\n\t\t\tvar dE = this.calculateRawInLab(lab1, lab2);\r\n\t\t\treturn dE + dA * dA;\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * @description\r\n\t\t *   minDistance between any color (CIEDE2000 low limit) = 0.00021155740497634713 (Chrome 46, JavaScript)\r\n\t\t *   !!!!!! max (RT * (dCp / (SC * CIEDE2000._kC)) * (dHp / (SH * CIEDE2000._kH))) 0.0000019135101965161994\r\n\t\t *   max (abs(dE (correct RT) - dE (RT = 0) ) ) is always less than minDistance (0.0000019135101965161994)\r\n\t\t *\r\n\t\t *   So, we can remove RT from equation.\r\n\t\t */\r\n\t\tcalculateRawInLab(Lab1 : {L : number; a : number; b : number}, Lab2 : {L : number; a : number; b : number}) : number {\r\n\t\t\t// Get L,a,b values for color 1\r\n\t\t\tvar L1 = Lab1.L,\r\n\t\t\t\ta1 = Lab1.a,\r\n\t\t\t\tb1 = Lab1.b;\r\n\r\n\t\t\t// Get L,a,b values for color 2\r\n\t\t\tvar L2 = Lab2.L,\r\n\t\t\t\ta2 = Lab2.a,\r\n\t\t\t\tb2 = Lab2.b;\r\n\r\n\t\t\t// Weight factors\r\n\t\t\t/**\r\n\t\t\t * Step 1: Calculate C1p, C2p, h1p, h2p\r\n\t\t\t */\r\n\t\t\tvar C1 = Math.sqrt(a1 * a1 + b1 * b1), //(2)\r\n\t\t\t\tC2 = Math.sqrt(a2 * a2 + b2 * b2), //(2)\r\n\r\n\t\t\t\tpow_a_C1_C2_to_7 = Math.pow((C1 + C2) / 2.0, 7.0),             //(3)\r\n\r\n\t\t\t\tG = 0.5 * (1 - Math.sqrt(pow_a_C1_C2_to_7 / (pow_a_C1_C2_to_7 + CIEDE2000._pow25to7))), //(4)\r\n\r\n\t\t\t\ta1p = (1.0 + G) * a1, //(5)\r\n\t\t\t\ta2p = (1.0 + G) * a2, //(5)\r\n\r\n\t\t\t\tC1p = Math.sqrt(a1p * a1p + b1 * b1), //(6)\r\n\t\t\t\tC2p = Math.sqrt(a2p * a2p + b2 * b2), //(6)\r\n\r\n\t\t\t\th1p = this._hp_f(b1, a1p), //(7)\r\n\t\t\t\th2p = this._hp_f(b2, a2p); //(7)\r\n\r\n\t\t\t/**\r\n\t\t\t * Step 2: Calculate dLp, dCp, dHp\r\n\t\t\t */\r\n\t\t\tvar dLp = L2 - L1, //(8)\r\n\t\t\t\tdCp = C2p - C1p, //(9)\r\n\r\n\t\t\t\tdhp = this._dhp_f(C1, C2, h1p, h2p), //(10)\r\n\t\t\t\tdHp = 2 * Math.sqrt(C1p * C2p) * Math.sin(dhp / 2.0); //(11)\r\n\r\n\t\t\t/**\r\n\t\t\t * Step 3: Calculate CIEDE2000 Color-Difference\r\n\t\t\t */\r\n\t\t\tvar a_L = (L1 + L2) / 2.0, //(12)\r\n\t\t\t\ta_Cp = (C1p + C2p) / 2.0, //(13)\r\n\r\n\t\t\t\ta_hp = this._a_hp_f(C1, C2, h1p, h2p), //(14)\r\n\r\n\t\t\t\tT = 1 - 0.17 * Math.cos(a_hp - CIEDE2000._deg30InRad) +\r\n\t\t\t\t\t0.24 * Math.cos(2 * a_hp) +\r\n\t\t\t\t\t0.32 * Math.cos(3 * a_hp + CIEDE2000._deg6InRad) -\r\n\t\t\t\t\t0.20 * Math.cos(4 * a_hp - CIEDE2000._deg63InRad), //(15)\r\n\r\n\t\t\t\tpow_a_L_minus_50_to_2 = Math.pow(a_L - 50, 2),\r\n\t\t\t\tSL = 1 + (0.015 * pow_a_L_minus_50_to_2) / Math.sqrt(20 + pow_a_L_minus_50_to_2),//(18)\r\n\t\t\t\tSC = 1 + 0.045 * a_Cp,//(19)\r\n\t\t\t\tSH = 1 + 0.015 * a_Cp * T,//(20)\r\n\t\t\t\tdE = Math.sqrt(Math.pow(dLp / (SL * CIEDE2000._kL), 2) + Math.pow(dCp / (SC * CIEDE2000._kC), 2) + Math.pow(dHp / (SH * CIEDE2000._kH), 2)); //(22)\r\n\r\n\t\t\treturn dE * dE;\r\n\t\t}\r\n\r\n\t\tcalculateNormalized(colorA : Point, colorB : Point) : number {\r\n\t\t\treturn Math.sqrt(this.calculateRaw(colorA.r, colorA.g, colorA.b, colorA.a, colorB.r, colorB.g, colorB.b, colorB.a));\r\n\t\t}\r\n\r\n\t\tprivate _hp_f(b : number, aPrime : number) { //(7)\r\n\t\t\tif (b === 0 && aPrime === 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar hPrime = Math.atan2(b, aPrime);\r\n\t\t\tif (hPrime >= 0) {\r\n\t\t\t\treturn hPrime;\r\n\t\t\t}\r\n\r\n\t\t\treturn hPrime + CIEDE2000._deg360InRad;\r\n\t\t}\r\n\r\n\t\tprivate _a_hp_f(C1 : number, C2 : number, h1p : number, h2p : number) : number { //(14)\r\n\t\t\tvar hPrimeSum = h1p + h2p;\r\n\t\t\tvar h1p_minus_h2p = h1p - h2p;\r\n\t\t\tif (C1 * C2 === 0) {\r\n\t\t\t\treturn hPrimeSum;\r\n\t\t\t}\r\n\r\n\t\t\tif (h1p_minus_h2p >= -CIEDE2000._deg180InRad && h1p_minus_h2p <= CIEDE2000._deg180InRad) {\r\n\t\t\t\treturn hPrimeSum / 2.0;\r\n\t\t\t}\r\n\r\n\t\t\tif (hPrimeSum < CIEDE2000._deg360InRad) {\r\n\t\t\t\treturn (hPrimeSum + CIEDE2000._deg360InRad) / 2.0;\r\n\t\t\t}\r\n\r\n\t\t\treturn (hPrimeSum - CIEDE2000._deg360InRad) / 2.0;\r\n\t\t}\r\n\r\n\t\tprivate _dhp_f(C1 : number, C2 : number, h1p : number, h2p : number) : number { //(10)\r\n\t\t\tif (C1 * C2 === 0) {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tvar h2p_minus_h1p = h2p - h1p;\r\n\r\n\t\t\tif (h2p_minus_h1p < -CIEDE2000._deg180InRad) {\r\n\t\t\t\treturn h2p_minus_h1p + CIEDE2000._deg360InRad;\r\n\t\t\t}\r\n\r\n\t\t\tif (h2p_minus_h1p > CIEDE2000._deg180InRad) {\r\n\t\t\t\treturn h2p_minus_h1p - CIEDE2000._deg360InRad;\r\n\t\t\t}\r\n\r\n\t\t\treturn h2p_minus_h1p;\r\n\t\t}\r\n\t}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/ciede2000.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/ciede2000.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * cmetric.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Point} from \"../utils/point\"\r\n\r\n/**\r\n * TODO: Name it: http://www.compuphase.com/cmetric.htm\r\n */\r\nexport class CMETRIC implements IDistanceCalculator {\r\n\tprivate _rCoefficient : number;\r\n\tprivate _gCoefficient : number;\r\n\tprivate _bCoefficient : number;\r\n\tprivate _aCoefficient : number;\r\n\tprivate _maxDistance : number;\r\n\r\n\tconstructor() {\r\n\t\tthis.setWhitePoint(255, 255, 255, 255);\r\n\t}\r\n\r\n\tsetWhitePoint(r : number, g : number, b : number, a : number) : void {\r\n\t\tthis._rCoefficient = 255 / r;\r\n\t\tthis._gCoefficient = 255 / g;\r\n\t\tthis._bCoefficient = 255 / b;\r\n\t\tthis._aCoefficient = 255 / a;\r\n\t\tthis._maxDistance  = Math.sqrt(this.calculateRaw(0, 0, 0, 0, r, g, b, a));\r\n\t}\r\n\r\n\tcalculateRaw(r1 : number, g1 : number, b1 : number, a1 : number, r2 : number, g2 : number, b2 : number, a2 : number) : number {\r\n\t\tvar rmean = ( r1 + r2 ) / 2 * this._rCoefficient,\r\n\t\t\tr     = (r1 - r2) * this._rCoefficient,\r\n\t\t\tg     = (g1 - g2) * this._gCoefficient,\r\n\t\t\tb     = (b1 - b2) * this._bCoefficient,\r\n\t\t\tdE    = ((((512 + rmean) * r * r) >> 8) + 4 * g * g + (((767 - rmean) * b * b) >> 8)),\r\n\t\t\tdA    = (a2 - a1) * this._aCoefficient;\r\n\r\n\t\treturn (dE + dA * dA);\r\n\t}\r\n\r\n\tcalculateNormalized(colorA : Point, colorB : Point) : number {\r\n\t\treturn Math.sqrt(this.calculateRaw(colorA.r, colorA.g, colorA.b, colorA.a, colorB.r, colorB.g, colorB.b, colorB.a)) / this._maxDistance;\r\n\t}\r\n\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/cmetric.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/cmetric.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * euclidean.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Point} from \"../utils/point\"\r\n\r\n/**\r\n * Euclidean color distance\r\n */\r\nexport class Euclidean implements IDistanceCalculator {\r\n\tprotected _Pr : number;\r\n\tprotected _Pg : number;\r\n\tprotected _Pb : number;\r\n\tprotected _Pa : number;\r\n\r\n\tprotected _maxEuclideanDistance : number;\r\n\r\n\tconstructor() {\r\n\t\tthis._setDefaults();\r\n\r\n\t\t// set default maximal color component deltas (255 - 0 = 255)\r\n\t\tthis.setWhitePoint(255, 255, 255, 255);\r\n\t}\r\n\r\n\t/**\r\n\t * To simulate original RgbQuant distance use `r=255,g=255,b=255,a=0`\r\n\t */\r\n\tsetWhitePoint(r : number, g : number, b : number, a : number) : void {\r\n\t\tthis._maxEuclideanDistance = Math.sqrt(this.calculateRaw(r, g, b, a, 0, 0, 0, 0));\r\n\t}\r\n\r\n\tcalculateRaw(r1 : number, g1 : number, b1 : number, a1 : number, r2 : number, g2 : number, b2 : number, a2 : number) : number {\r\n\t\tvar dR = r2 - r1, dG = g2 - g1, dB = b2 - b1, dA = a2 - a1;\r\n\t\treturn this._Pr * dR * dR + this._Pg * dG * dG + this._Pb * dB * dB + this._Pa * dA * dA;\r\n\t}\r\n\r\n\tcalculateNormalized(colorA : Point, colorB : Point) : number {\r\n\t\treturn Math.sqrt(this.calculateRaw(colorA.r, colorA.g, colorA.b, colorA.a, colorB.r, colorB.g, colorB.b, colorB.a)) / this._maxEuclideanDistance;\r\n\t}\r\n\r\n\tprotected _setDefaults() : void {\r\n\t\tthis._Pr = this._Pg = this._Pb = this._Pa = 1;\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/euclidean.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/euclidean.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * euclideanRgbQuantWithAlpha.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Euclidean} from \"./euclidean\"\r\nimport * as bt709 from \"../constants/bt709\"\r\n\r\n/**\r\n * Euclidean color distance (RgbQuant modification w Alpha)\r\n */\r\nexport class EuclideanRgbQuantWithAlpha extends Euclidean implements IDistanceCalculator {\r\n\tprotected _setDefaults() : void {\r\n\t\tthis._Pr = bt709.Y.RED;\r\n\t\tthis._Pg = bt709.Y.GREEN;\r\n\t\tthis._Pb = bt709.Y.BLUE;\r\n\r\n\t\t// TODO: what is the best coefficient below?\r\n\t\tthis._Pa = 1;\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/euclideanRgbQuantWithAlpha.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/euclideanRgbQuantWithAlpha.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * euclideanRgbQuantWOAlpha.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Euclidean} from \"./euclidean\"\r\nimport * as bt709 from \"../constants/bt709\"\r\n\r\n/**\r\n * Euclidean color distance (RgbQuant modification w/o Alpha)\r\n */\r\nexport class EuclideanRgbQuantWOAlpha extends Euclidean implements IDistanceCalculator {\r\n\tprotected _setDefaults() : void {\r\n\t\tthis._Pr = bt709.Y.RED;\r\n\t\tthis._Pg = bt709.Y.GREEN;\r\n\t\tthis._Pb = bt709.Y.BLUE;\r\n\t\tthis._Pa = 0;\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/euclideanRgbQuantWOAlpha.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/euclideanRgbQuantWOAlpha.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * manhattanNeuQuant.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Point} from \"../utils/point\"\r\n\r\n/**\r\n * Manhattan distance (NeuQuant modification) - w/o sRGB coefficients\r\n */\r\nexport class Manhattan implements IDistanceCalculator {\r\n\tprotected _Pr : number;\r\n\tprotected _Pg : number;\r\n\tprotected _Pb : number;\r\n\tprotected _Pa : number;\r\n\r\n\tprotected _maxManhattanDistance : number;\r\n\r\n\tconstructor() {\r\n\t\tthis._setDefaults();\r\n\r\n\t\t// set default maximal color component deltas (255 - 0 = 255)\r\n\t\tthis.setWhitePoint(255, 255, 255, 255);\r\n\t}\r\n\r\n\tsetWhitePoint(r : number, g : number, b : number, a : number) : void {\r\n\t\tthis._maxManhattanDistance = this.calculateRaw(r, g, b, a, 0, 0, 0, 0);\r\n\t}\r\n\r\n\tcalculateNormalized(colorA : Point, colorB : Point) : number {\r\n\t\treturn this.calculateRaw(colorA.r, colorA.g, colorA.b, colorA.a, colorB.r, colorB.g, colorB.b, colorB.a) / this._maxManhattanDistance;\r\n\t}\r\n\r\n\tcalculateRaw(r1 : number, g1 : number, b1 : number, a1 : number, r2 : number, g2 : number, b2 : number, a2 : number) : number {\r\n\t\tvar dR = r2 - r1, dG = g2 - g1, dB = b2 - b1, dA = a2 - a1;\r\n\t\tif (dR < 0) dR = 0 - dR;\r\n\t\tif (dG < 0) dG = 0 - dG;\r\n\t\tif (dB < 0) dB = 0 - dB;\r\n\t\tif (dA < 0) dA = 0 - dA;\r\n\r\n\t\treturn this._Pr * dR + this._Pg * dG + this._Pb * dB + this._Pa * dA;\r\n\t}\r\n\r\n\tprotected _setDefaults() : void {\r\n\t\tthis._Pr = this._Pg = this._Pb = this._Pa = 1;\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/manhattan.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/manhattan.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * manhattanSRGB.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Manhattan} from \"./manhattan\"\r\nimport * as bt709 from \"../constants/bt709\"\r\n\r\n/**\r\n * Manhattan distance\r\n */\r\nexport class ManhattanSRGB extends Manhattan implements IDistanceCalculator {\r\n\tprotected _setDefaults() : void {\r\n\t\tthis._Pr = bt709.Y.RED;\r\n\t\tthis._Pg = bt709.Y.GREEN;\r\n\t\tthis._Pb = bt709.Y.BLUE;\r\n\r\n\t\t// TODO: what is the best coef below?\r\n\t\tthis._Pa = 1;\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/manhattanSRGB.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/manhattanSRGB.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * manhattanSRGB.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Manhattan} from \"./manhattan\"\r\n\r\n/**\r\n * Manhattan distance\r\n */\r\nexport class ManhattanNommyde extends Manhattan implements IDistanceCalculator {\r\n\tprotected _setDefaults() : void {\r\n\t\tthis._Pr = 0.4984;\r\n\t\tthis._Pg = 0.8625;\r\n\t\tthis._Pb = 0.2979;\r\n\r\n\t\t// TODO: what is the best coef below?\r\n\t\tthis._Pa = 1;\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/manhattanNommyde.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/manhattanNommyde.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * pngQuant.ts - part of Image Quantization Library\r\n */\r\nimport {IDistanceCalculator} from \"./common\"\r\nimport {Point} from \"../utils/point\"\r\n\r\n/**\r\n * TODO: check quality of this distance equation\r\n * TODO: ask author for usage rights\r\n * taken from:\r\n * {@link http://stackoverflow.com/questions/4754506/color-similarity-distance-in-rgba-color-space/8796867#8796867}\r\n * {@link https://github.com/pornel/pngquant/blob/cc39b47799a7ff2ef17b529f9415ff6e6b213b8f/lib/pam.h#L148}\r\n */\r\nexport class PNGQUANT implements IDistanceCalculator {\r\n\r\n\tprivate _whitePoint : {r : number; g : number; b : number; a : number};\r\n\tprivate _maxDistance : number;\r\n\r\n\tconstructor() {\r\n\t\tthis.setWhitePoint(255, 255, 255, 255);\r\n\t}\r\n\r\n\tsetWhitePoint(r : number, g : number, b : number, a : number) : void {\r\n\t\tthis._whitePoint  = { r : r, g : g, b : b, a : a };\r\n\t\tthis._maxDistance = this.calculateRaw(0, 0, 0, 0, r, g, b, a);\r\n\t}\r\n\r\n\tcalculateNormalized(colorA : Point, colorB : Point) : number {\r\n\t\treturn this.calculateRaw(colorA.r, colorA.g, colorA.b, colorA.a, colorB.r, colorB.g, colorB.b, colorB.a) / this._maxDistance;\r\n\t}\r\n\r\n\tcalculateRaw(r1 : number, g1 : number, b1 : number, a1 : number, r2 : number, g2 : number, b2 : number, a2 : number) : number {\r\n\t\t// px_b.rgb = px.rgb + 0*(1-px.a) // blend px on black\r\n\t\t// px_b.a   = px.a   + 1*(1-px.a)\r\n\t\t// px_w.rgb = px.rgb + 1*(1-px.a) // blend px on white\r\n\t\t// px_w.a   = px.a   + 1*(1-px.a)\r\n\r\n\t\t// px_b.rgb = px.rgb              // difference same as in opaque RGB\r\n\t\t// px_b.a   = 1\r\n\t\t// px_w.rgb = px.rgb - px.a       // difference simplifies to formula below\r\n\t\t// px_w.a   = 1\r\n\r\n\t\t// (px.rgb - px.a) - (py.rgb - py.a)\r\n\t\t// (px.rgb - py.rgb) + (py.a - px.a)\r\n\r\n\t\tvar alphas = (a2 - a1) / this._whitePoint.a;\r\n\t\treturn this._colordifference_ch(r1 / this._whitePoint.r, r2 / this._whitePoint.r, alphas) +\r\n\t\t\tthis._colordifference_ch(g1 / this._whitePoint.g, g2 / this._whitePoint.g, alphas) +\r\n\t\t\tthis._colordifference_ch(b1 / this._whitePoint.b, b2 / this._whitePoint.b, alphas);\r\n\t}\r\n\r\n\tprivate _colordifference_ch(x : number, y : number, alphas : number) {\r\n\t\t// maximum of channel blended on white, and blended on black\r\n\t\t// premultiplied alpha and backgrounds 0/1 shorten the formula\r\n\t\tvar black = x - y,\r\n\t\t\twhite = black + alphas;\r\n\r\n\t\treturn black * black + white * white;\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/distance/pngQuant.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/distance/pngQuant.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * iq.ts - Image Quantization Library\r\n */\r\nimport {IPaletteQuantizer} from \"./common\"\r\nimport {NeuQuant} from \"./neuquant/neuquant\"\r\nimport {NeuQuantFloat} from \"./neuquant/neuquantFloat\"\r\nimport {RGBQuant} from \"./rgbquant/rgbquant\"\r\nimport {ColorHistogram} from \"./rgbquant/colorHistogram\"\r\nimport {WuQuant, WuColorCube} from \"./wu/wuQuant\"\r\n\r\nexport {\r\n\tIPaletteQuantizer,\r\n\r\n\tNeuQuant,\r\n\tNeuQuantFloat,\r\n\tRGBQuant,\r\n\tWuQuant,\r\n\r\n\tColorHistogram,\r\n\tWuColorCube\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/palette/index.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/palette/index.ts\n **/","/*\r\n * NeuQuant Neural-Net Quantization Algorithm\r\n * ------------------------------------------\r\n *\r\n * Copyright (c) 1994 Anthony Dekker\r\n *\r\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\r\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\r\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\r\n * the algorithm.\r\n *\r\n * Any party obtaining a copy of these files from the author, directly or\r\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\r\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\r\n * this software and documentation files (the \"Software\"), including without\r\n * limitation the rights to use, copy, modify, merge, publish, distribute,\r\n * sublicense, and/or sell copies of the Software, and to permit persons who\r\n * receive copies from any such party to do so, with the only requirement being\r\n * that this copyright notice remain intact.\r\n */\r\n\r\n/**\r\n * @preserve TypeScript port:\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * neuquant.ts - part of Image Quantization Library\r\n */\r\n\r\nimport {Palette} from \"../../utils/palette\"\r\nimport {Point} from \"../../utils/point\"\r\nimport {PointContainer} from \"../../utils/pointContainer\"\r\nimport {IDistanceCalculator} from \"../../distance/common\"\r\nimport {IPaletteQuantizer} from \"../common\"\r\n\r\n// bias for colour values\r\nvar networkBiasShift = 3;\r\n\r\nclass Neuron {\r\n\tr : number;\r\n\tg : number;\r\n\tb : number;\r\n\ta : number;\r\n\r\n\tconstructor(defaultValue : number) {\r\n\t\tthis.r = this.g = this.b = this.a = defaultValue;\r\n\t}\r\n\r\n\t/**\r\n\t * There is a fix in original NEUQUANT by Anthony Dekker (http://members.ozemail.com.au/~dekker/NEUQUANT.HTML)\r\n\t * @example\r\n\t * r = Math.min(255, (neuron.r + (1 << (networkBiasShift - 1))) >> networkBiasShift);\r\n\t */\r\n\ttoPoint() : Point {\r\n\t\treturn Point.createByRGBA(this.r >> networkBiasShift, this.g >> networkBiasShift, this.b >> networkBiasShift, this.a >> networkBiasShift);\r\n\t}\r\n\r\n\tsubtract(r : number, g : number, b : number, a : number) : void {\r\n\t\tthis.r -= r | 0;\r\n\t\tthis.g -= g | 0;\r\n\t\tthis.b -= b | 0;\r\n\t\tthis.a -= a | 0;\r\n\t}\r\n\r\n\t/*\r\n\t public subtract(r : number, g : number, b : number, a : number) : void {\r\n\t this.r = (-r + this.r) | 0;\r\n\t this.g = (-g + this.g) | 0;\r\n\t this.b = (-b + this.b) | 0;\r\n\t this.a = (-a + this.a) | 0;\r\n\r\n\t this.r -= r;\r\n\t this.g -= g;\r\n\t this.b -= b;\r\n\t this.a -= a;\r\n\r\n\t this.r -= r | 0;\r\n\t this.g -= g | 0;\r\n\t this.b -= b | 0;\r\n\t this.a -= a | 0;\r\n\t }\r\n\t */\r\n}\r\n\r\nexport class NeuQuant implements IPaletteQuantizer {\r\n\t/*\r\n\t four primes near 500 - assume no image has a length so large\r\n\t that it is divisible by all four primes\r\n\t */\r\n\tprivate static _prime1 : number          = 499;\r\n\tprivate static _prime2 : number          = 491;\r\n\tprivate static _prime3 : number          = 487;\r\n\tprivate static _prime4 : number          = 503;\r\n\tprivate static _minpicturebytes : number = NeuQuant._prime4;\r\n\r\n\t// no. of learning cycles\r\n\tprivate static _nCycles : number = 100;\r\n\r\n\t// defs for freq and bias\r\n\tprivate static _initialBiasShift : number = 16;\r\n\r\n\t// bias for fractions\r\n\tprivate static _initialBias : number = (1 << NeuQuant._initialBiasShift);\r\n\tprivate static _gammaShift : number  = 10;\r\n\r\n\t// gamma = 1024\r\n\t// TODO: why gamma is never used?\r\n\t//private static _gamma : number     = (1 << NeuQuant._gammaShift);\r\n\tprivate static _betaShift : number = 10;\r\n\tprivate static _beta : number      = (NeuQuant._initialBias >> NeuQuant._betaShift);\r\n\r\n\t// beta = 1/1024\r\n\tprivate static _betaGamma : number = (NeuQuant._initialBias << (NeuQuant._gammaShift - NeuQuant._betaShift));\r\n\r\n\t/*\r\n\t * for 256 cols, radius starts\r\n\t */\r\n\tprivate static _radiusBiasShift : number = 6;\r\n\r\n\t// at 32.0 biased by 6 bits\r\n\tprivate static _radiusBias : number = 1 << NeuQuant._radiusBiasShift;\r\n\r\n\t// and decreases by a factor of 1/30 each cycle\r\n\tprivate static _radiusDecrease : number = 30;\r\n\r\n\t/* defs for decreasing alpha factor */\r\n\r\n\t// alpha starts at 1.0\r\n\tprivate static _alphaBiasShift : number = 10;\r\n\r\n\t// biased by 10 bits\r\n\tprivate static _initAlpha : number = (1 << NeuQuant._alphaBiasShift);\r\n\r\n\t/* radBias and alphaRadBias used for radpower calculation */\r\n\tprivate static _radBiasShift : number      = 8;\r\n\tprivate static _radBias : number           = 1 << NeuQuant._radBiasShift;\r\n\tprivate static _alphaRadBiasShift : number = NeuQuant._alphaBiasShift + NeuQuant._radBiasShift;\r\n\tprivate static _alphaRadBias : number      = 1 << NeuQuant._alphaRadBiasShift;\r\n\r\n\tprivate _pointArray : Point[];\r\n\tprivate _networkSize : number;\r\n\tprivate _network : Neuron[];\r\n\r\n\t/** sampling factor 1..30 */\r\n\tprivate _sampleFactor : number;\r\n\tprivate _radPower : number[];\r\n\r\n\t// bias and freq arrays for learning\r\n\tprivate _freq : number[];\r\n\r\n\t/* for network lookup - really 256 */\r\n\tprivate _bias : number[];\r\n\tprivate _distance : IDistanceCalculator;\r\n\r\n\tconstructor(colorDistanceCalculator : IDistanceCalculator, colors : number = 256) {\r\n\t\tthis._distance     = colorDistanceCalculator;\r\n\t\tthis._pointArray   = [];\r\n\t\tthis._sampleFactor = 1;\r\n\t\tthis._networkSize  = colors;\r\n\r\n\t\tthis._distance.setWhitePoint(255 << networkBiasShift, 255 << networkBiasShift, 255 << networkBiasShift, 255 << networkBiasShift);\r\n\t}\r\n\r\n\tsample(pointBuffer : PointContainer) : void {\r\n\t\tthis._pointArray = this._pointArray.concat(pointBuffer.getPointArray());\r\n\t}\r\n\r\n\tquantize() : Palette {\r\n\t\tthis._init();\r\n\t\tthis._learn();\r\n\r\n\t\treturn this._buildPalette();\r\n\t}\r\n\r\n\tprivate _init() : void {\r\n\t\tthis._freq     = [];\r\n\t\tthis._bias     = [];\r\n\t\tthis._radPower = [];\r\n\t\tthis._network  = [];\r\n\t\tfor (var i = 0; i < this._networkSize; i++) {\r\n\t\t\tthis._network[ i ] = new Neuron((i << (networkBiasShift + 8)) / this._networkSize | 0);\r\n\r\n\t\t\t// 1/this._networkSize\r\n\t\t\tthis._freq[ i ] = NeuQuant._initialBias / this._networkSize | 0;\r\n\t\t\tthis._bias[ i ] = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Main Learning Loop\r\n\t */\r\n\tprivate _learn() : void {\r\n\t\tvar i : number,\r\n\t\t\tstep : number;\r\n\r\n\t\tvar pointsNumber = this._pointArray.length;\r\n\t\tif (pointsNumber < NeuQuant._minpicturebytes) this._sampleFactor = 1;\r\n\r\n\t\tvar alphadec       = 30 + (this._sampleFactor - 1) / 3 | 0,\r\n\t\t\tpointIndex     = 0,\r\n\t\t\tpointsToSample = pointsNumber / this._sampleFactor | 0,\r\n\t\t\tdelta          = pointsToSample / NeuQuant._nCycles | 0,\r\n\t\t\talpha          = NeuQuant._initAlpha,\r\n\t\t\tradius         = (this._networkSize >> 3) * NeuQuant._radiusBias;\r\n\r\n\t\tvar rad = radius >> NeuQuant._radiusBiasShift;\r\n\t\tif (rad <= 1) rad = 0;\r\n\r\n\t\tfor (i = 0; i < rad; i++) {\r\n\t\t\tthis._radPower[ i ] = alpha * (((rad * rad - i * i) * NeuQuant._radBias) / (rad * rad)) >>> 0;\r\n\t\t}\r\n\r\n\t\tif (pointsNumber < NeuQuant._minpicturebytes) {\r\n\t\t\tstep = 1;\r\n\t\t} else if (pointsNumber % NeuQuant._prime1 != 0) {\r\n\t\t\tstep = NeuQuant._prime1;\r\n\t\t} else if ((pointsNumber % NeuQuant._prime2) != 0) {\r\n\t\t\tstep = NeuQuant._prime2;\r\n\t\t} else if ((pointsNumber % NeuQuant._prime3) != 0) {\r\n\t\t\tstep = NeuQuant._prime3;\r\n\t\t} else {\r\n\t\t\tstep = NeuQuant._prime4;\r\n\t\t}\r\n\r\n\t\ti = 0;\r\n\t\twhile (i < pointsToSample) {\r\n\t\t\tvar point = this._pointArray[ pointIndex ],\r\n\t\t\t\tb     = point.b << networkBiasShift,\r\n\t\t\t\tg     = point.g << networkBiasShift,\r\n\t\t\t\tr     = point.r << networkBiasShift,\r\n\t\t\t\ta     = point.a << networkBiasShift,\r\n\t\t\t\tj     = this._contest(b, g, r, a);\r\n\r\n\t\t\tthis._alterSingle(alpha, j, b, g, r, a);\r\n\r\n\t\t\tif (rad != 0) this._alterNeighbour(rad, j, b, g, r, a);\r\n\r\n\t\t\t/* alter neighbours */\r\n\t\t\tpointIndex += step;\r\n\t\t\tif (pointIndex >= pointsNumber) pointIndex -= pointsNumber;\r\n\t\t\ti++;\r\n\r\n\t\t\tif (delta == 0) delta = 1;\r\n\r\n\t\t\tif (i % delta == 0) {\r\n\t\t\t\talpha -= (alpha / alphadec) | 0;\r\n\t\t\t\tradius -= (radius / NeuQuant._radiusDecrease) | 0;\r\n\t\t\t\trad = radius >> NeuQuant._radiusBiasShift;\r\n\r\n\t\t\t\tif (rad <= 1) rad = 0;\r\n\t\t\t\tfor (j = 0; j < rad; j++) this._radPower[ j ] = alpha * (((rad * rad - j * j) * NeuQuant._radBias) / (rad * rad)) >>> 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate _buildPalette() : Palette {\r\n\t\tvar palette = new Palette();\r\n\r\n\t\tthis._network.forEach(neuron => {\r\n\t\t\tpalette.add(neuron.toPoint());\r\n\t\t});\r\n\r\n\t\tpalette.sort();\r\n\t\treturn palette;\r\n\t}\r\n\r\n\t/**\r\n\t * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in radpower[|i-j|]\r\n\t */\r\n\tprivate _alterNeighbour(rad : number, i : number, b : number, g : number, r : number, al : number) : void {\r\n\t\tvar j : number, k : number, lo : number, hi : number, m : number, p : Neuron;\r\n\r\n\t\tlo = i - rad;\r\n\t\tif (lo < -1) lo = -1;\r\n\r\n\t\thi = i + rad;\r\n\r\n\t\tif (hi > this._networkSize) hi = this._networkSize;\r\n\r\n\t\tj = i + 1;\r\n\t\tk = i - 1;\r\n\t\tm = 1;\r\n\r\n\t\twhile (j < hi || k > lo) {\r\n\r\n\t\t\tvar a = this._radPower[ m++ ] / NeuQuant._alphaRadBias;\r\n\t\t\tif (j < hi) {\r\n\t\t\t\tp = this._network[ j++ ];\r\n\t\t\t\tp.subtract(\r\n\t\t\t\t\ta * (p.r - r),\r\n\t\t\t\t\ta * (p.g - g),\r\n\t\t\t\t\ta * (p.b - b),\r\n\t\t\t\t\ta * (p.a - al)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (k > lo) {\r\n\t\t\t\tp = this._network[ k-- ];\r\n\t\t\t\tp.subtract(\r\n\t\t\t\t\ta * (p.r - r),\r\n\t\t\t\t\ta * (p.g - g),\r\n\t\t\t\t\ta * (p.b - b),\r\n\t\t\t\t\ta * (p.a - al)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Move neuron i towards biased (b,g,r) by factor alpha\r\n\t */\r\n\tprivate _alterSingle(alpha : number, i : number, b : number, g : number, r : number, a : number) : void {\r\n\t\talpha /= NeuQuant._initAlpha;\r\n\r\n\t\t/* alter hit neuron */\r\n\t\tvar n = this._network[ i ];\r\n\t\tn.subtract(\r\n\t\t\talpha * (n.r - r),\r\n\t\t\talpha * (n.g - g),\r\n\t\t\talpha * (n.b - b),\r\n\t\t\talpha * (n.a - a)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Search for biased BGR values\r\n\t * description:\r\n\t *    finds closest neuron (min dist) and updates freq\r\n\t *    finds best neuron (min dist-bias) and returns position\r\n\t *    for frequently chosen neurons, freq[i] is high and bias[i] is negative\r\n\t *    bias[i] = _gamma*((1/this._networkSize)-freq[i])\r\n\t *\r\n\t * Original distance equation:\r\n\t *        dist = abs(dR) + abs(dG) + abs(dB)\r\n\t */\r\n\tprivate _contest(b : number, g : number, r : number, al : number) : number {\r\n\t\tvar multiplier  = (255 * 4) << networkBiasShift,\r\n\t\t\tbestd       = ~(1 << 31),\r\n\t\t\tbestbiasd   = bestd,\r\n\t\t\tbestpos     = -1,\r\n\t\t\tbestbiaspos = bestpos;\r\n\r\n\t\tfor (var i = 0; i < this._networkSize; i++) {\r\n\t\t\tvar n = this._network[ i ];\r\n\r\n\t\t\tvar dist = this._distance.calculateNormalized(<any>n, <any>{ r : r, g : g, b : b, a : al }) * multiplier | 0;\r\n\r\n\t\t\tif (dist < bestd) {\r\n\t\t\t\tbestd   = dist;\r\n\t\t\t\tbestpos = i;\r\n\t\t\t}\r\n\r\n\t\t\tvar biasdist = dist - ((this._bias[ i ]) >> (NeuQuant._initialBiasShift - networkBiasShift));\r\n\t\t\tif (biasdist < bestbiasd) {\r\n\t\t\t\tbestbiasd   = biasdist;\r\n\t\t\t\tbestbiaspos = i;\r\n\t\t\t}\r\n\t\t\tvar betafreq = (this._freq[ i ] >> NeuQuant._betaShift);\r\n\t\t\tthis._freq[ i ] -= betafreq;\r\n\t\t\tthis._bias[ i ] += (betafreq << NeuQuant._gammaShift);\r\n\t\t}\r\n\t\tthis._freq[ bestpos ] += NeuQuant._beta;\r\n\t\tthis._bias[ bestpos ] -= NeuQuant._betaGamma;\r\n\t\treturn bestbiaspos;\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/palette/neuquant/neuquant.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/palette/neuquant/neuquant.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * palette.ts - part of Image Quantization Library\r\n */\r\n\r\nimport {Point} from \"./point\"\r\nimport {PointContainer} from \"./pointContainer\"\r\nimport {IDistanceCalculator} from \"../distance/common\"\r\nimport {rgb2hsl} from \"../conversion/rgb2hsl\"\r\n\r\n// TODO: make paletteArray via pointBuffer, so, export will be available via pointBuffer.exportXXX\r\n\r\nvar hueGroups : number = 10;\r\n\r\nexport function hueGroup(hue : number, segmentsNumber : number) {\r\n\tvar maxHue = 360,\r\n\t\tseg = maxHue / segmentsNumber,\r\n\t\thalf = seg / 2;\r\n\r\n\tfor (var i = 1, mid = seg - half; i < segmentsNumber; i++, mid+=seg) {\r\n\t\tif (hue >= mid && hue < mid + seg) return i;\r\n\t}\r\n\treturn 0;\r\n}\r\n\r\nexport class Palette {\r\n\tprivate _pointContainer : PointContainer;\r\n\tprivate _pointArray : Point[]                   = [];\r\n\tprivate _i32idx : { [ key : string ] : number } = {};\r\n\r\n\tconstructor() {\r\n\t\tthis._pointContainer = new PointContainer();\r\n\t\tthis._pointContainer.setHeight(1);\r\n\t\tthis._pointArray = this._pointContainer.getPointArray();\r\n\t}\r\n\r\n\tadd(color : Point) {\r\n\t\tthis._pointArray.push(color);\r\n\t\tthis._pointContainer.setWidth(this._pointArray.length);\r\n\t}\r\n\r\n\thas(color : Point) {\r\n\t\tfor (var i = this._pointArray.length - 1; i >= 0; i--) {\r\n\t\t\tif (color.uint32 === this._pointArray[ i ].uint32) return true;\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// TOTRY: use HUSL - http://boronine.com/husl/ http://www.husl-colors.org/ https://github.com/husl-colors/husl\r\n\tgetNearestColor(colorDistanceCalculator : IDistanceCalculator, color : Point) : Point {\r\n\t\treturn this._pointArray[ this.getNearestIndex(colorDistanceCalculator, color) | 0 ];\r\n\t}\r\n\r\n\tgetPointContainer() : PointContainer {\r\n\t\treturn this._pointContainer;\r\n\t}\r\n\r\n\t// TOTRY: use HUSL - http://boronine.com/husl/\r\n\t/*\r\n\t public nearestIndexByUint32(i32) {\r\n\t var idx : number = this._nearestPointFromCache(\"\" + i32);\r\n\t if (idx >= 0) return idx;\r\n\r\n\t var min = 1000,\r\n\t rgb = [\r\n\t (i32 & 0xff),\r\n\t (i32 >>> 8) & 0xff,\r\n\t (i32 >>> 16) & 0xff,\r\n\t (i32 >>> 24) & 0xff\r\n\t ],\r\n\t len = this._pointArray.length;\r\n\r\n\t idx = 0;\r\n\t for (var i = 0; i < len; i++) {\r\n\t var dist = Utils.distEuclidean(rgb, this._pointArray[i].rgba);\r\n\r\n\t if (dist < min) {\r\n\t min = dist;\r\n\t idx = i;\r\n\t }\r\n\t }\r\n\r\n\t this._i32idx[i32] = idx;\r\n\t return idx;\r\n\t }\r\n\t */\r\n\r\n\tprivate _nearestPointFromCache(key : string) {\r\n\t\treturn typeof this._i32idx[ key ] === \"number\" ? this._i32idx[ key ] : -1;\r\n\t}\r\n\r\n\tprivate getNearestIndex(colorDistanceCalculator : IDistanceCalculator, point : Point) : number {\r\n\t\tvar idx : number = this._nearestPointFromCache(\"\" + point.uint32);\r\n\t\tif (idx >= 0) return idx;\r\n\r\n\t\tvar minimalDistance : number = Number.MAX_VALUE;\r\n\r\n\t\tfor (var idx = 0, i = 0, l = this._pointArray.length; i < l; i++) {\r\n\t\t\tvar p        = this._pointArray[ i ],\r\n\t\t\t\tdistance = colorDistanceCalculator.calculateRaw(point.r, point.g, point.b, point.a, p.r, p.g, p.b, p.a);\r\n\r\n\t\t\tif (distance < minimalDistance) {\r\n\t\t\t\tminimalDistance = distance;\r\n\t\t\t\tidx             = i;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._i32idx[ point.uint32 ] = idx;\r\n\t\treturn idx;\r\n\t}\r\n\r\n\t/*\r\n\t public reduce(histogram : ColorHistogram, colors : number) {\r\n\t if (this._pointArray.length > colors) {\r\n\t var idxi32 = histogram.getImportanceSortedColorsIDXI32();\r\n\r\n\t // quantize histogram to existing palette\r\n\t var keep = [], uniqueColors = 0, idx, pruned = false;\r\n\r\n\t for (var i = 0, len = idxi32.length; i < len; i++) {\r\n\t // palette length reached, unset all remaining colors (sparse palette)\r\n\t if (uniqueColors >= colors) {\r\n\t this.prunePal(keep);\r\n\t pruned = true;\r\n\t break;\r\n\t } else {\r\n\t idx = this.nearestIndexByUint32(idxi32[i]);\r\n\t if (keep.indexOf(idx) < 0) {\r\n\t keep.push(idx);\r\n\t uniqueColors++;\r\n\t }\r\n\t }\r\n\t }\r\n\r\n\t if (!pruned) {\r\n\t this.prunePal(keep);\r\n\t }\r\n\t }\r\n\t }\r\n\r\n\t // TODO: check usage, not tested!\r\n\t public prunePal(keep : number[]) {\r\n\t var colors = this._pointArray.length;\r\n\t for (var colorIndex = colors - 1; colorIndex >= 0; colorIndex--) {\r\n\t if (keep.indexOf(colorIndex) < 0) {\r\n\r\n\t if(colorIndex + 1 < colors) {\r\n\t this._pointArray[ colorIndex ] = this._pointArray [ colors - 1 ];\r\n\t }\r\n\t --colors;\r\n\t //this._pointArray[colorIndex] = null;\r\n\t }\r\n\t }\r\n\t console.log(\"colors pruned: \" + (this._pointArray.length - colors));\r\n\t this._pointArray.length = colors;\r\n\t this._i32idx = {};\r\n\t }\r\n\t */\r\n\r\n\t// TODO: group very low lum and very high lum colors\r\n\t// TODO: pass custom sort order\r\n\t// TODO: sort criteria function should be placed to HueStats class\r\n\tsort() {\r\n\t\tthis._i32idx = {};\r\n\t\tthis._pointArray.sort((a : Point, b : Point) => {\r\n\t\t\tvar hslA = rgb2hsl(a.r, a.g, a.b),\r\n\t\t\t\thslB = rgb2hsl(b.r, b.g, b.b);\r\n\r\n\t\t\t// sort all grays + whites together\r\n\t\t\tvar hueA = (a.r === a.g && a.g === a.b) ? 0 : 1 + hueGroup(hslA.h, hueGroups);\r\n\t\t\tvar hueB = (b.r === b.g && b.g === b.b) ? 0 : 1 + hueGroup(hslB.h, hueGroups);\r\n\t\t\t/*\r\n\t\t\t var hueA = (a.r === a.g && a.g === a.b) ? 0 : 1 + Utils.hueGroup(hslA.h, hueGroups);\r\n\t\t\t var hueB = (b.r === b.g && b.g === b.b) ? 0 : 1 + Utils.hueGroup(hslB.h, hueGroups);\r\n\t\t\t */\r\n\r\n\t\t\tvar hueDiff = hueB - hueA;\r\n\t\t\tif (hueDiff) return -hueDiff;\r\n\r\n\t\t\t/*\r\n\t\t\t var lumDiff = Utils.lumGroup(+hslB.l.toFixed(2)) - Utils.lumGroup(+hslA.l.toFixed(2));\r\n\t\t\t if (lumDiff) return -lumDiff;\r\n\t\t\t */\r\n\t\t\tvar lA = a.getLuminosity(true),\r\n\t\t\t\tlB = b.getLuminosity(true);\r\n\r\n\t\t\tif (lB - lA !== 0) return lB - lA;\r\n\r\n\t\t\tvar satDiff = ((hslB.s * 100) | 0) - ((hslA.s * 100) | 0);\r\n\t\t\tif (satDiff) return -satDiff;\r\n\r\n\t\t\t// TODO: why there was no return here? What to return instead? 0?\r\n\t\t\treturn 0;\r\n\t\t});\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/palette.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/utils/palette.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * pointContainer.ts - part of Image Quantization Library\r\n */\r\nimport {Point} from \"./point\"\r\n\r\n/**\r\n * v8 optimizations done.\r\n * fromXXX methods are static to move out polymorphic code from class instance itself.\r\n */\r\nexport class PointContainer {\r\n\tprivate _pointArray : Point[];\r\n\tprivate _width : number;\r\n\tprivate _height : number;\r\n\r\n\tconstructor() {\r\n\t\tthis._width      = 0;\r\n\t\tthis._height     = 0;\r\n\t\tthis._pointArray = [];\r\n\t}\r\n\r\n\tgetWidth() : number {\r\n\t\treturn this._width;\r\n\t}\r\n\r\n\tgetHeight() : number {\r\n\t\treturn this._height;\r\n\t}\r\n\r\n\tsetWidth(width : number) : void {\r\n\t\tthis._width = width;\r\n\t}\r\n\r\n\tsetHeight(height : number) : void {\r\n\t\tthis._height = height;\r\n\t}\r\n\r\n\tgetPointArray() : Point[] {\r\n\t\treturn this._pointArray;\r\n\t}\r\n\r\n\tclone() : PointContainer {\r\n\t\tvar clone     = new PointContainer();\r\n\t\tclone._width  = this._width;\r\n\t\tclone._height = this._height;\r\n\r\n\t\tclone._pointArray = [];\r\n\t\tfor (var i = 0, l = this._pointArray.length; i < l; i++) {\r\n\t\t\tclone._pointArray[ i ] = Point.createByUint32(this._pointArray[ i ].uint32 | 0); // \"| 0\" is added for v8 optimization\r\n\t\t}\r\n\r\n\t\treturn clone;\r\n\t}\r\n\r\n\ttoUint32Array() : Uint32Array {\r\n\t\tvar l           = this._pointArray.length,\r\n\t\t\tuint32Array = new Uint32Array(l);\r\n\r\n\t\tfor (var i = 0; i < l; i++) {\r\n\t\t\tuint32Array[ i ] = this._pointArray[ i ].uint32;\r\n\t\t}\r\n\r\n\t\treturn uint32Array;\r\n\t}\r\n\r\n\ttoUint8Array() : Uint8Array {\r\n\t\treturn new Uint8Array(this.toUint32Array().buffer);\r\n\t}\r\n\r\n\tstatic fromHTMLImageElement(img : HTMLImageElement) : PointContainer {\r\n\t\tvar width  = img.naturalWidth,\r\n\t\t\theight = img.naturalHeight;\r\n\r\n\t\tvar canvas    = document.createElement(\"canvas\");\r\n\t\tcanvas.width  = width;\r\n\t\tcanvas.height = height;\r\n\r\n\t\tvar ctx = <CanvasRenderingContext2D>canvas.getContext(\"2d\");\r\n\t\tctx.drawImage(img, 0, 0, width, height, 0, 0, width, height);\r\n\r\n\t\treturn PointContainer.fromHTMLCanvasElement(canvas);\r\n\t}\r\n\r\n\tstatic fromHTMLCanvasElement(canvas : HTMLCanvasElement) : PointContainer {\r\n\t\tvar width  = canvas.width,\r\n\t\t\theight = canvas.height;\r\n\r\n\t\tvar ctx     = <CanvasRenderingContext2D>canvas.getContext(\"2d\"),\r\n\t\t\timgData = ctx.getImageData(0, 0, width, height);\r\n\r\n\t\treturn PointContainer.fromImageData(imgData);\r\n\t}\r\n\r\n\tstatic fromNodeCanvas(canvas : any) : PointContainer {\r\n\t\treturn PointContainer.fromHTMLCanvasElement(canvas);\r\n\t}\r\n\r\n\tstatic fromImageData(imageData : ImageData) : PointContainer {\r\n\t\tvar width  = imageData.width,\r\n\t\t\theight = imageData.height;\r\n\r\n\t\treturn PointContainer.fromCanvasPixelArray(imageData.data, width, height);\r\n\t\t/*\r\n\t\t var buf8;\r\n\t\t if (Utils.typeOf(imageData.data) == \"CanvasPixelArray\")\r\n\t\t buf8 = new Uint8Array(imageData.data);\r\n\t\t else\r\n\t\t buf8 = imageData.data;\r\n\r\n\t\t this.fromUint32Array(new Uint32Array(buf8.buffer), width, height);\r\n\t\t */\r\n\t}\r\n\r\n\tstatic fromArray(byteArray : number[], width : number, height : number) : PointContainer {\r\n\t\tvar uint8array = new Uint8Array(byteArray);\r\n\t\treturn PointContainer.fromUint8Array(uint8array, width, height);\r\n\t}\r\n\r\n\tstatic fromCanvasPixelArray(data : any, width : number, height : number) : PointContainer {\r\n\t\treturn PointContainer.fromArray(data, width, height);\r\n\t}\r\n\r\n\tstatic fromUint8Array(uint8array : Uint8Array, width : number, height : number) : PointContainer {\r\n\t\treturn PointContainer.fromUint32Array(new Uint32Array(uint8array.buffer), width, height);\r\n\t}\r\n\r\n\tstatic fromUint32Array(uint32array : Uint32Array, width : number, height : number) : PointContainer {\r\n\t\tvar container = new PointContainer();\r\n\r\n\t\tcontainer._width  = width;\r\n\t\tcontainer._height = height;\r\n\r\n\t\tcontainer._pointArray = [];//new Array(uint32array.length);\r\n\t\tfor (var i = 0, l = uint32array.length; i < l; i++) {\r\n\t\t\tcontainer._pointArray[ i ] = Point.createByUint32(uint32array[ i ] | 0); // \"| 0\" is added for v8 optimization\r\n\t\t}\r\n\r\n\t\treturn container;\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/pointContainer.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/utils/pointContainer.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * point.ts - part of Image Quantization Library\r\n */\r\nimport {Y} from \"../constants/bt709\"\r\n\r\n/**\r\n * v8 optimized class\r\n * 1) \"constructor\" should have initialization with worst types\r\n * 2) \"set\" should have |0 / >>> 0\r\n */\r\nexport class Point {\r\n\tr : number;\r\n\tg : number;\r\n\tb : number;\r\n\ta : number;\r\n\tuint32 : number;\r\n\trgba : number[]; // TODO: better name is quadruplet or quad may be?\r\n\tLab : { L : number; a : number; b : number };\r\n\r\n\tstatic createByQuadruplet(quadruplet : number[]) : Point {\r\n\t\tvar point : Point = new Point();\r\n\r\n\t\tpoint.r = quadruplet[ 0 ] | 0;\r\n\t\tpoint.g = quadruplet[ 1 ] | 0;\r\n\t\tpoint.b = quadruplet[ 2 ] | 0;\r\n\t\tpoint.a = quadruplet[ 3 ] | 0;\r\n\t\tpoint._loadUINT32();\r\n\t\tpoint._loadQuadruplet();\r\n\t\t//point._loadLab();\r\n\t\treturn point;\r\n\t}\r\n\r\n\tstatic createByRGBA(red : number, green : number, blue : number, alpha : number) : Point {\r\n\t\tvar point : Point = new Point();\r\n\r\n\t\tpoint.r = red | 0;\r\n\t\tpoint.g = green | 0;\r\n\t\tpoint.b = blue | 0;\r\n\t\tpoint.a = alpha | 0;\r\n\t\tpoint._loadUINT32();\r\n\t\tpoint._loadQuadruplet();\r\n\t\t//point._loadLab();\r\n\t\treturn point;\r\n\t}\r\n\r\n\tstatic createByUint32(uint32 : number) : Point {\r\n\t\tvar point : Point = new Point();\r\n\r\n\t\tpoint.uint32 = uint32 >>> 0;\r\n\t\tpoint._loadRGBA();\r\n\t\tpoint._loadQuadruplet();\r\n\t\t//point._loadLab();\r\n\t\treturn point;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tthis.uint32 = -1 >>> 0;\r\n\t\tthis.r      = this.g = this.b = this.a = 0;\r\n\t\tthis.rgba = new Array(4);\r\n\t\t/*[ this.r , this.g , this.b , this.a ]*/\r\n\t\tthis.rgba[ 0 ] = 0;\r\n\t\tthis.rgba[ 1 ] = 0;\r\n\t\tthis.rgba[ 2 ] = 0;\r\n\t\tthis.rgba[ 3 ] = 0;\r\n\t\t/*\r\n\t\t this.Lab = {\r\n\t\t L : 0.0,\r\n\t\t a : 0.0,\r\n\t\t b : 0.0\r\n\t\t };\r\n\t\t */\r\n\t}\r\n\r\n\tfrom(point : Point) {\r\n\t\tthis.r         = point.r;\r\n\t\tthis.g         = point.g;\r\n\t\tthis.b         = point.b;\r\n\t\tthis.a         = point.a;\r\n\t\tthis.uint32    = point.uint32;\r\n\t\tthis.rgba[ 0 ] = point.r;\r\n\t\tthis.rgba[ 1 ] = point.g;\r\n\t\tthis.rgba[ 2 ] = point.b;\r\n\t\tthis.rgba[ 3 ] = point.a;\r\n\r\n\t\t/*\r\n\t\t this.Lab.L = point.Lab.L;\r\n\t\t this.Lab.a = point.Lab.a;\r\n\t\t this.Lab.b = point.Lab.b;\r\n\t\t */\r\n\t}\r\n\r\n\t/*\r\n\t * TODO:\r\n\t Luminance from RGB:\r\n\r\n\t Luminance (standard for certain colour spaces): (0.2126*R + 0.7152*G + 0.0722*B) [1]\r\n\t Luminance (perceived option 1): (0.299*R + 0.587*G + 0.114*B) [2]\r\n\t Luminance (perceived option 2, slower to calculate):  sqrt( 0.241*R^2 + 0.691*G^2 + 0.068*B^2 ) ? sqrt( 0.299*R^2 + 0.587*G^2 + 0.114*B^2 ) (thanks to @MatthewHerbst) [http://alienryderflex.com/hsp.html]\r\n\t */\r\n\tgetLuminosity(useAlphaChannel : boolean) : number {\r\n\t\tvar r = this.r,\r\n\t\t\tg = this.g,\r\n\t\t\tb = this.b;\r\n\r\n\t\tif (useAlphaChannel) {\r\n\t\t\tr = Math.min(255, 255 - this.a + this.a * r / 255);\r\n\t\t\tg = Math.min(255, 255 - this.a + this.a * g / 255);\r\n\t\t\tb = Math.min(255, 255 - this.a + this.a * b / 255);\r\n\t\t}\r\n\r\n\t\t//var luma = this.r * Point._RED_COEFFICIENT + this.g * Point._GREEN_COEFFICIENT + this.b * Point._BLUE_COEFFICIENT;\r\n\r\n\t\t/*\r\n\t\t if(useAlphaChannel) {\r\n\t\t luma = (luma * (255 - this.a)) / 255;\r\n\t\t }\r\n\t\t */\r\n\r\n\t\treturn r * Y.RED + g * Y.GREEN + b * Y.BLUE;\r\n\t}\r\n\r\n\tprivate _loadUINT32() {\r\n\t\tthis.uint32 = (this.a << 24 | this.b << 16 | this.g << 8 | this.r) >>> 0;\r\n\t}\r\n\r\n\tprivate _loadRGBA() {\r\n\t\tthis.r = this.uint32 & 0xff;\r\n\t\tthis.g = (this.uint32 >>> 8) & 0xff;\r\n\t\tthis.b = (this.uint32 >>> 16) & 0xff;\r\n\t\tthis.a = (this.uint32 >>> 24) & 0xff;\r\n\t}\r\n\r\n\tprivate _loadQuadruplet() {\r\n\t\tthis.rgba[ 0 ] = this.r;\r\n\t\tthis.rgba[ 1 ] = this.g;\r\n\t\tthis.rgba[ 2 ] = this.b;\r\n\t\tthis.rgba[ 3 ] = this.a;\r\n\r\n\t\t/*\r\n\t\t var xyz = rgb2xyz(this.r, this.g, this.b);\r\n\t\t var lab = xyz2lab(xyz.x, xyz.y, xyz.z);\r\n\t\t this.lab.l = lab.l;\r\n\t\t this.lab.a = lab.a;\r\n\t\t this.lab.b = lab.b;\r\n\t\t */\r\n\t}\r\n\r\n\t/*\r\n\t private _loadLab() : void {\r\n\t var Lab = Color.Conversion.rgb2lab(this.r, this.g, this.b);\r\n\t this.Lab.L = Lab.L;\r\n\t this.Lab.a = Lab.a;\r\n\t this.Lab.b = Lab.b;\r\n\t }\r\n\t */\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/point.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/utils/point.ts\n **/","/*\r\n * NeuQuantFloat Neural-Net Quantization Algorithm\r\n * ------------------------------------------\r\n *\r\n * Copyright (c) 1994 Anthony Dekker\r\n *\r\n * NEUQUANT Neural-Net quantization algorithm by Anthony Dekker, 1994. See\r\n * \"Kohonen neural networks for optimal colour quantization\" in \"Network:\r\n * Computation in Neural Systems\" Vol. 5 (1994) pp 351-367. for a discussion of\r\n * the algorithm.\r\n *\r\n * Any party obtaining a copy of these files from the author, directly or\r\n * indirectly, is granted, free of charge, a full and unrestricted irrevocable,\r\n * world-wide, paid up, royalty-free, nonexclusive right and license to deal in\r\n * this software and documentation files (the \"Software\"), including without\r\n * limitation the rights to use, copy, modify, merge, publish, distribute,\r\n * sublicense, and/or sell copies of the Software, and to permit persons who\r\n * receive copies from any such party to do so, with the only requirement being\r\n * that this copyright notice remain intact.\r\n */\r\n/**\r\n * @preserve TypeScript port:\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * neuquant.ts - part of Image Quantization Library\r\n */\r\nimport {Palette} from \"../../utils/palette\"\r\nimport {Point} from \"../../utils/point\"\r\nimport {PointContainer} from \"../../utils/pointContainer\"\r\nimport {IDistanceCalculator} from \"../../distance/common\"\r\nimport {IPaletteQuantizer} from \"../common\"\r\n\r\n// bias for colour values\r\nvar networkBiasShift = 3;\r\n\r\nclass NeuronFloat {\r\n\tr : number;\r\n\tg : number;\r\n\tb : number;\r\n\ta : number;\r\n\r\n\tconstructor(defaultValue : number) {\r\n\t\tthis.r = this.g = this.b = this.a = defaultValue;\r\n\t}\r\n\r\n\t/**\r\n\t * There is a fix in original NEUQUANT by Anthony Dekker (http://members.ozemail.com.au/~dekker/NEUQUANT.HTML)\r\n\t * @example\r\n\t * r = Math.min(255, (neuron.r + (1 << (networkBiasShift - 1))) >> networkBiasShift);\r\n\t */\r\n\ttoPoint() : Point {\r\n\t\treturn Point.createByRGBA(this.r >> networkBiasShift, this.g >> networkBiasShift, this.b >> networkBiasShift, this.a >> networkBiasShift);\r\n\t}\r\n\r\n\tsubtract(r : number, g : number, b : number, a : number) : void {\r\n\t\tthis.r -= r;\r\n\t\tthis.g -= g;\r\n\t\tthis.b -= b;\r\n\t\tthis.a -= a;\r\n\t}\r\n}\r\n\r\nexport class NeuQuantFloat implements IPaletteQuantizer {\r\n\t/*\r\n\t four primes near 500 - assume no image has a length so large\r\n\t that it is divisible by all four primes\r\n\t */\r\n\tprivate static _prime1 : number          = 499;\r\n\tprivate static _prime2 : number          = 491;\r\n\tprivate static _prime3 : number          = 487;\r\n\tprivate static _prime4 : number          = 503;\r\n\tprivate static _minpicturebytes : number = NeuQuantFloat._prime4;\r\n\r\n\t// no. of learning cycles\r\n\tprivate static _nCycles : number = 100;\r\n\r\n\t// defs for freq and bias\r\n\tprivate static _initialBiasShift : number = 16;\r\n\r\n\t// bias for fractions\r\n\tprivate static _initialBias : number = (1 << NeuQuantFloat._initialBiasShift);\r\n\tprivate static _gammaShift : number  = 10;\r\n\r\n\t// gamma = 1024\r\n\t// TODO: why gamma is never used?\r\n\t//private static _gamma : number     = (1 << NeuQuantFloat._gammaShift);\r\n\tprivate static _betaShift : number = 10;\r\n\tprivate static _beta : number      = (NeuQuantFloat._initialBias >> NeuQuantFloat._betaShift);\r\n\r\n\t// beta = 1/1024\r\n\tprivate static _betaGamma : number = (NeuQuantFloat._initialBias << (NeuQuantFloat._gammaShift - NeuQuantFloat._betaShift));\r\n\r\n\t/*\r\n\t * for 256 cols, radius starts\r\n\t */\r\n\tprivate static _radiusBiasShift : number = 6;\r\n\r\n\t// at 32.0 biased by 6 bits\r\n\tprivate static _radiusBias : number = 1 << NeuQuantFloat._radiusBiasShift;\r\n\r\n\t// and decreases by a factor of 1/30 each cycle\r\n\tprivate static _radiusDecrease : number = 30;\r\n\r\n\t/* defs for decreasing alpha factor */\r\n\r\n\t// alpha starts at 1.0\r\n\tprivate static _alphaBiasShift : number = 10;\r\n\r\n\t// biased by 10 bits\r\n\tprivate static _initAlpha : number = (1 << NeuQuantFloat._alphaBiasShift);\r\n\r\n\t/* radBias and alphaRadBias used for radpower calculation */\r\n\tprivate static _radBiasShift : number      = 8;\r\n\tprivate static _radBias : number           = 1 << NeuQuantFloat._radBiasShift;\r\n\tprivate static _alphaRadBiasShift : number = NeuQuantFloat._alphaBiasShift + NeuQuantFloat._radBiasShift;\r\n\tprivate static _alphaRadBias : number      = 1 << NeuQuantFloat._alphaRadBiasShift;\r\n\r\n\tprivate _pointArray : Point[];\r\n\tprivate _networkSize : number;\r\n\tprivate _network : NeuronFloat[];\r\n\r\n\t/** sampling factor 1..30 */\r\n\tprivate _sampleFactor : number;\r\n\tprivate _radPower : number[];\r\n\r\n\t// bias and freq arrays for learning\r\n\tprivate _freq : number[];\r\n\r\n\t/* for network lookup - really 256 */\r\n\tprivate _bias : number[];\r\n\tprivate _distance : IDistanceCalculator;\r\n\r\n\tconstructor(colorDistanceCalculator : IDistanceCalculator, colors : number = 256) {\r\n\t\tthis._distance     = colorDistanceCalculator;\r\n\t\tthis._pointArray   = [];\r\n\t\tthis._sampleFactor = 1;\r\n\t\tthis._networkSize  = colors;\r\n\r\n\t\tthis._distance.setWhitePoint(255 << networkBiasShift, 255 << networkBiasShift, 255 << networkBiasShift, 255 << networkBiasShift);\r\n\t}\r\n\r\n\tsample(pointBuffer : PointContainer) : void {\r\n\t\tthis._pointArray = this._pointArray.concat(pointBuffer.getPointArray());\r\n\t}\r\n\r\n\tquantize() : Palette {\r\n\t\tthis._init();\r\n\t\tthis._learn();\r\n\r\n\t\treturn this._buildPalette();\r\n\t}\r\n\r\n\tprivate _init() : void {\r\n\t\tthis._freq     = [];\r\n\t\tthis._bias     = [];\r\n\t\tthis._radPower = [];\r\n\t\tthis._network  = [];\r\n\t\tfor (var i = 0; i < this._networkSize; i++) {\r\n\t\t\tthis._network[ i ] = new NeuronFloat((i << (networkBiasShift + 8)) / this._networkSize);\r\n\r\n\t\t\t// 1/this._networkSize\r\n\t\t\tthis._freq[ i ] = NeuQuantFloat._initialBias / this._networkSize;\r\n\t\t\tthis._bias[ i ] = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Main Learning Loop\r\n\t */\r\n\tprivate _learn() : void {\r\n\t\tvar i : number,\r\n\t\t\tstep : number;\r\n\r\n\t\tvar pointsNumber = this._pointArray.length;\r\n\t\tif (pointsNumber < NeuQuantFloat._minpicturebytes) this._sampleFactor = 1;\r\n\r\n\t\tvar alphadec       = 30 + (this._sampleFactor - 1) / 3,\r\n\t\t\tpointIndex     = 0,\r\n\t\t\tpointsToSample = pointsNumber / this._sampleFactor,\r\n\t\t\tdelta          = pointsToSample / NeuQuantFloat._nCycles | 0,\r\n\t\t\talpha          = NeuQuantFloat._initAlpha,\r\n\t\t\tradius         = (this._networkSize >> 3) * NeuQuantFloat._radiusBias;\r\n\r\n\t\tvar rad = radius >> NeuQuantFloat._radiusBiasShift;\r\n\t\tif (rad <= 1) rad = 0;\r\n\r\n\t\tfor (i = 0; i < rad; i++) {\r\n\t\t\tthis._radPower[ i ] = alpha * (((rad * rad - i * i) * NeuQuantFloat._radBias) / (rad * rad));\r\n\t\t}\r\n\r\n\t\tif (pointsNumber < NeuQuantFloat._minpicturebytes) {\r\n\t\t\tstep = 1;\r\n\t\t} else if (pointsNumber % NeuQuantFloat._prime1 != 0) {\r\n\t\t\tstep = NeuQuantFloat._prime1;\r\n\t\t} else if ((pointsNumber % NeuQuantFloat._prime2) != 0) {\r\n\t\t\tstep = NeuQuantFloat._prime2;\r\n\t\t} else if ((pointsNumber % NeuQuantFloat._prime3) != 0) {\r\n\t\t\tstep = NeuQuantFloat._prime3;\r\n\t\t} else {\r\n\t\t\tstep = NeuQuantFloat._prime4;\r\n\t\t}\r\n\r\n\t\ti = 0;\r\n\t\twhile (i < pointsToSample) {\r\n\t\t\tvar point = this._pointArray[ pointIndex ],\r\n\t\t\t\tb     = point.b << networkBiasShift,\r\n\t\t\t\tg     = point.g << networkBiasShift,\r\n\t\t\t\tr     = point.r << networkBiasShift,\r\n\t\t\t\ta     = point.a << networkBiasShift,\r\n\t\t\t\tj     = this._contest(b, g, r, a);\r\n\r\n\t\t\tthis._alterSingle(alpha, j, b, g, r, a);\r\n\r\n\t\t\tif (rad != 0) this._alterNeighbour(rad, j, b, g, r, a);\r\n\r\n\t\t\t/* alter neighbours */\r\n\t\t\tpointIndex += step;\r\n\t\t\tif (pointIndex >= pointsNumber) pointIndex -= pointsNumber;\r\n\t\t\ti++;\r\n\r\n\t\t\tif (delta == 0) delta = 1;\r\n\r\n\t\t\tif (i % delta == 0) {\r\n\t\t\t\talpha -= (alpha / alphadec);\r\n\t\t\t\tradius -= (radius / NeuQuantFloat._radiusDecrease);\r\n\t\t\t\trad = radius >> NeuQuantFloat._radiusBiasShift;\r\n\r\n\t\t\t\tif (rad <= 1) rad = 0;\r\n\t\t\t\tfor (j = 0; j < rad; j++) this._radPower[ j ] = alpha * (((rad * rad - j * j) * NeuQuantFloat._radBias) / (rad * rad));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprivate _buildPalette() : Palette {\r\n\t\tvar palette = new Palette();\r\n\r\n\t\tthis._network.forEach(neuron => {\r\n\t\t\tpalette.add(neuron.toPoint());\r\n\t\t});\r\n\r\n\t\tpalette.sort();\r\n\t\treturn palette;\r\n\t}\r\n\r\n\t/**\r\n\t * Move adjacent neurons by precomputed alpha*(1-((i-j)^2/[r]^2)) in radpower[|i-j|]\r\n\t */\r\n\tprivate _alterNeighbour(rad : number, i : number, b : number, g : number, r : number, al : number) : void {\r\n\t\tvar j : number, k : number, lo : number, hi : number, m : number, p : NeuronFloat;\r\n\r\n\t\tlo = i - rad;\r\n\t\tif (lo < -1) lo = -1;\r\n\r\n\t\thi = i + rad;\r\n\r\n\t\tif (hi > this._networkSize) hi = this._networkSize;\r\n\r\n\t\tj = i + 1;\r\n\t\tk = i - 1;\r\n\t\tm = 1;\r\n\r\n\t\twhile (j < hi || k > lo) {\r\n\r\n\t\t\tvar a = this._radPower[ m++ ] / NeuQuantFloat._alphaRadBias;\r\n\t\t\tif (j < hi) {\r\n\t\t\t\tp = this._network[ j++ ];\r\n\t\t\t\tp.subtract(\r\n\t\t\t\t\ta * (p.r - r),\r\n\t\t\t\t\ta * (p.g - g),\r\n\t\t\t\t\ta * (p.b - b),\r\n\t\t\t\t\ta * (p.a - al)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tif (k > lo) {\r\n\t\t\t\tp = this._network[ k-- ];\r\n\t\t\t\tp.subtract(\r\n\t\t\t\t\ta * (p.r - r),\r\n\t\t\t\t\ta * (p.g - g),\r\n\t\t\t\t\ta * (p.b - b),\r\n\t\t\t\t\ta * (p.a - al)\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Move neuron i towards biased (b,g,r) by factor alpha\r\n\t */\r\n\tprivate _alterSingle(alpha : number, i : number, b : number, g : number, r : number, a : number) : void {\r\n\t\talpha /= NeuQuantFloat._initAlpha;\r\n\r\n\t\t/* alter hit neuron */\r\n\t\tvar n = this._network[ i ];\r\n\t\tn.subtract(\r\n\t\t\talpha * (n.r - r),\r\n\t\t\talpha * (n.g - g),\r\n\t\t\talpha * (n.b - b),\r\n\t\t\talpha * (n.a - a)\r\n\t\t);\r\n\t}\r\n\r\n\t/**\r\n\t * Search for biased BGR values\r\n\t * description:\r\n\t *    finds closest neuron (min dist) and updates freq\r\n\t *    finds best neuron (min dist-bias) and returns position\r\n\t *    for frequently chosen neurons, freq[i] is high and bias[i] is negative\r\n\t *    bias[i] = _gamma*((1/this._networkSize)-freq[i])\r\n\t *\r\n\t * Original distance equation:\r\n\t *        dist = abs(dR) + abs(dG) + abs(dB)\r\n\t */\r\n\tprivate _contest(b : number, g : number, r : number, al : number) : number {\r\n\t\tvar multiplier  = (255 * 4) << networkBiasShift,\r\n\t\t\tbestd       = ~(1 << 31),\r\n\t\t\tbestbiasd   = bestd,\r\n\t\t\tbestpos     = -1,\r\n\t\t\tbestbiaspos = bestpos;\r\n\r\n\t\tfor (var i = 0; i < this._networkSize; i++) {\r\n\t\t\tvar n = this._network[ i ];\r\n\r\n\t\t\tvar dist = this._distance.calculateNormalized(<any>n, <any>{ r : r, g : g, b : b, a : al }) * multiplier;\r\n\r\n\t\t\tif (dist < bestd) {\r\n\t\t\t\tbestd   = dist;\r\n\t\t\t\tbestpos = i;\r\n\t\t\t}\r\n\r\n\t\t\tvar biasdist = dist - ((this._bias[ i ]) >> (NeuQuantFloat._initialBiasShift - networkBiasShift));\r\n\t\t\tif (biasdist < bestbiasd) {\r\n\t\t\t\tbestbiasd   = biasdist;\r\n\t\t\t\tbestbiaspos = i;\r\n\t\t\t}\r\n\t\t\tvar betafreq = (this._freq[ i ] >> NeuQuantFloat._betaShift);\r\n\t\t\tthis._freq[ i ] -= betafreq;\r\n\t\t\tthis._bias[ i ] += (betafreq << NeuQuantFloat._gammaShift);\r\n\t\t}\r\n\t\tthis._freq[ bestpos ] += NeuQuantFloat._beta;\r\n\t\tthis._bias[ bestpos ] -= NeuQuantFloat._betaGamma;\r\n\t\treturn bestbiaspos;\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/palette/neuquant/neuquantFloat.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/palette/neuquant/neuquantFloat.ts\n **/","/*\r\n * Copyright (c) 2015, Leon Sorokin\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * RgbQuant.js - an image quantization lib\r\n */\r\n\r\n/**\r\n * @preserve TypeScript port:\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * rgbquant.ts - part of Image Quantization Library\r\n */\r\n\r\nimport {Palette} from \"../../utils/palette\"\r\nimport {Point} from \"../../utils/point\"\r\nimport {PointContainer} from \"../../utils/pointContainer\"\r\nimport {IDistanceCalculator} from \"../../distance/common\"\r\nimport {ColorHistogram} from \"./colorHistogram\"\r\nimport {IPaletteQuantizer} from \"../common\"\r\nimport {stableSort} from \"../../utils/arithmetic\"\r\n\r\nclass RemovedColor {\r\n\tindex : number;\r\n\tcolor : Point;\r\n\tdistance : number;\r\n\r\n\tconstructor(index : number, color : Point, distance : number) {\r\n\t\tthis.index    = index;\r\n\t\tthis.color    = color;\r\n\t\tthis.distance = distance;\r\n\t}\r\n}\r\n\r\n// TODO: make input/output image and input/output palettes with instances of class Point only!\r\nexport class RGBQuant implements IPaletteQuantizer {\r\n\t// desired final palette size\r\n\tprivate _colors : number;\r\n\r\n\t// color-distance threshold for initial reduction pass\r\n\tprivate _initialDistance : number;\r\n\r\n\t// subsequent passes threshold\r\n\tprivate _distanceIncrement : number;\r\n\r\n\t// accumulated histogram\r\n\tprivate _histogram : ColorHistogram;\r\n\tprivate _distance : IDistanceCalculator;\r\n\r\n\tconstructor(colorDistanceCalculator : IDistanceCalculator, colors : number = 256, method : number = 2) {\r\n\t\tthis._distance = colorDistanceCalculator;\r\n\t\t// desired final palette size\r\n\t\tthis._colors   = colors;\r\n\r\n\t\t// histogram to accumulate\r\n\t\tthis._histogram = new ColorHistogram(method, colors);\r\n\r\n\t\tthis._initialDistance   = 0.01;\r\n\t\tthis._distanceIncrement = 0.005;\r\n\t}\r\n\r\n\t// gathers histogram info\r\n\tsample(image : PointContainer) : void {\r\n\t\t/*\r\n\t\t var pointArray = image.getPointArray(), max = [0, 0, 0, 0], min = [255, 255, 255, 255];\r\n\r\n\t\t for (var i = 0, l = pointArray.length; i < l; i++) {\r\n\t\t var color = pointArray[i];\r\n\t\t for (var componentIndex = 0; componentIndex < 4; componentIndex++) {\r\n\t\t if (max[componentIndex] < color.rgba[componentIndex]) max[componentIndex] = color.rgba[componentIndex];\r\n\t\t if (min[componentIndex] > color.rgba[componentIndex]) min[componentIndex] = color.rgba[componentIndex];\r\n\t\t }\r\n\t\t }\r\n\t\t var rd = max[0] - min[0], gd = max[1] - min[1], bd = max[2] - min[2], ad = max[3] - min[3];\r\n\t\t this._distance.setWhitePoint(rd, gd, bd, ad);\r\n\r\n\t\t this._initialDistance = (Math.sqrt(rd * rd + gd * gd + bd * bd + ad * ad) / Math.sqrt(255 * 255 + 255 * 255 + 255 * 255)) * 0.01;\r\n\t\t */\r\n\r\n\t\tthis._histogram.sample(image);\r\n\t}\r\n\r\n\t// reduces histogram to palette, remaps & memoizes reduced colors\r\n\tquantize() : Palette {\r\n\t\tvar idxi32  = this._histogram.getImportanceSortedColorsIDXI32()\r\n\t\tif(!idxi32) {\r\n\t\t\tthrow new Error(\"No colors in image\")\r\n\t\t}\r\n\r\n\t\tvar palette = this._buildPalette(idxi32);\r\n\r\n\t\tpalette.sort();\r\n\t\treturn palette;\r\n\t}\r\n\r\n\t// reduces similar colors from an importance-sorted Uint32 rgba array\r\n\tprivate _buildPalette(idxi32 : number[]) : Palette {\r\n\t\t// reduce histogram to create initial palette\r\n\t\t// build full rgb palette\r\n\t\tvar palette    = new Palette(),\r\n\t\t\tcolorArray = palette.getPointContainer().getPointArray(),\r\n\t\t\tusageArray = new Array(idxi32.length);\r\n\r\n\t\tfor (var i = 0; i < idxi32.length; i++) {\r\n\t\t\tcolorArray.push(Point.createByUint32(idxi32[ i ]));\r\n\t\t\tusageArray[ i ] = 1;\r\n\t\t}\r\n\r\n\t\tvar len                      = colorArray.length,\r\n\t\t\tpalLen                   = len,\r\n\t\t\tthold                    = this._initialDistance,\r\n\t\t\tmemDist : RemovedColor[] = [];\r\n\r\n\t\t// palette already at or below desired length\r\n\t\twhile (palLen > this._colors) {\r\n\t\t\tmemDist.length = 0;\r\n\r\n\t\t\t// iterate palette\r\n\t\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\t\tif (usageArray[ i ] === 0) continue;\r\n\t\t\t\tvar pxi = colorArray[ i ];\r\n\t\t\t\t//if (!pxi) continue;\r\n\r\n\t\t\t\tfor (var j = i + 1; j < len; j++) {\r\n\t\t\t\t\tif (usageArray[ j ] === 0) continue;\r\n\t\t\t\t\tvar pxj = colorArray[ j ];\r\n\t\t\t\t\t//if (!pxj) continue;\r\n\r\n\t\t\t\t\tvar dist = this._distance.calculateNormalized(pxi, pxj);\r\n\t\t\t\t\tif (dist < thold) {\r\n\t\t\t\t\t\t// store index,rgb,dist\r\n\t\t\t\t\t\tmemDist.push(new RemovedColor(j, pxj, dist));\r\n\t\t\t\t\t\tusageArray[ j ] = 0;\r\n\t\t\t\t\t\tpalLen--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// palette reduction pass\r\n\t\t\t// console.log(\"palette length: \" + palLen);\r\n\r\n\t\t\t// if palette is still much larger than target, increment by larger initDist\r\n\t\t\tthold += (palLen > this._colors * 3) ? this._initialDistance : this._distanceIncrement;\r\n\t\t}\r\n\r\n\t\t// if palette is over-reduced, re-add removed colors with largest distances from last round\r\n\t\tif (palLen < this._colors) {\r\n\t\t\t// sort descending\r\n\t\t\tstableSort(memDist, function (a : RemovedColor, b : RemovedColor) {\r\n\t\t\t\treturn b.distance - a.distance;\r\n\t\t\t});\r\n\r\n\t\t\tvar k = 0;\r\n\t\t\twhile (palLen < this._colors && k < memDist.length) {\r\n\t\t\t\tvar removedColor                 = memDist[ k ];\r\n\t\t\t\t// re-inject rgb into final palette\r\n\t\t\t\tusageArray[ removedColor.index ] = 1;\r\n\t\t\t\tpalLen++;\r\n\t\t\t\tk++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar colors = colorArray.length;\r\n\t\tfor (var colorIndex = colors - 1; colorIndex >= 0; colorIndex--) {\r\n\t\t\tif (usageArray[ colorIndex ] === 0) {\r\n\t\t\t\tif (colorIndex !== colors - 1) {\r\n\t\t\t\t\tcolorArray[ colorIndex ] = colorArray[ colors - 1 ];\r\n\t\t\t\t}\r\n\t\t\t\t--colors;\r\n\t\t\t}\r\n\t\t}\r\n\t\tcolorArray.length = colors;\r\n\r\n\t\treturn palette;\r\n\t}\r\n\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/palette/rgbquant/rgbquant.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/palette/rgbquant/rgbquant.ts\n **/","/*\r\n * Copyright (c) 2015, Leon Sorokin\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * ColorHistogram.js - an image quantization lib\r\n */\r\n\r\n/**\r\n * @preserve TypeScript port:\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * colorHistogram.ts - part of Image Quantization Library\r\n */\r\nimport {HueStatistics} from \"../../utils/hueStatistics\"\r\nimport {PointContainer} from \"../../utils/pointContainer\"\r\nimport {stableSort} from \"../../utils/arithmetic\"\r\n\r\ninterface Box {\r\n\tx : number,\r\n\ty : number,\r\n\th : number,\r\n\tw : number\r\n}\r\n\r\nexport class ColorHistogram {\r\n\tprivate static _boxSize   = [ 64, 64 ];\r\n\tprivate static _boxPixels = 2;\r\n\tprivate static _hueGroups = 10;\r\n\r\n\t// 1 = by global population, 2 = subregion population threshold\r\n\tprivate _method : number;\r\n\r\n\t// HueStatistics instance\r\n\tprivate _hueStats : HueStatistics;\r\n\r\n\tprivate _histogram : {[color : string] : number};\r\n\r\n\t// # of highest-frequency colors to start with for palette reduction\r\n\tprivate _initColors : number;\r\n\r\n\t// if > 0, enables hues stats and min-color retention per group\r\n\tprivate _minHueCols : number;\r\n\r\n\tconstructor(method : number, colors : number) {\r\n\t\t// 1 = by global population, 2 = subregion population threshold\r\n\t\tthis._method = method;\r\n\r\n\t\t// if > 0, enables hues stats and min-color retention per group\r\n\t\tthis._minHueCols = colors << 2;//opts.minHueCols || 0;\r\n\r\n\t\t// # of highest-frequency colors to start with for palette reduction\r\n\t\tthis._initColors = colors << 2;\r\n\r\n\t\t// HueStatistics instance\r\n\t\tthis._hueStats = new HueStatistics(ColorHistogram._hueGroups, this._minHueCols);\r\n\r\n\t\tthis._histogram = Object.create(null);\r\n\t}\r\n\r\n\tsample(pointBuffer : PointContainer) : void {\r\n\t\tswitch (this._method) {\r\n\t\t\tcase 1:\r\n\t\t\t\tthis._colorStats1D(pointBuffer);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tthis._colorStats2D(pointBuffer);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tgetImportanceSortedColorsIDXI32() {\r\n\t\t// TODO: fix typing issue in stableSort func\r\n\t\tvar sorted : number[] = <any>stableSort(Object.keys(this._histogram), (a, b) => this._histogram[ b ] - this._histogram[ a ]);\r\n\t\t//var sorted = Object.keys(this._histogram).sort((a, b) => this._histogram[b] - this._histogram[a]);\r\n\t\t//var sorted = Utils.sortedHashKeys(this._histogram, true);\r\n\r\n\t\t// TODO: check that other code waits for null\r\n\t\tif (sorted.length == 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tswitch (this._method) {\r\n\t\t\tcase 1:\r\n\t\t\t\tvar initialColorsLimit = Math.min(sorted.length, this._initColors),\r\n\t\t\t\t\tlast               = sorted[ initialColorsLimit - 1 ],\r\n\t\t\t\t\tfreq               = this._histogram[ last ];\r\n\r\n\t\t\t\tvar idxi32 = sorted.slice(0, initialColorsLimit);\r\n\r\n\t\t\t\t// add any cut off colors with same freq as last\r\n\t\t\t\tvar pos = initialColorsLimit, len = sorted.length;\r\n\t\t\t\twhile (pos < len && this._histogram[ sorted[ pos ] ] == freq)\r\n\t\t\t\t\tidxi32.push(sorted[ pos++ ]);\r\n\r\n\t\t\t\t// inject min huegroup colors\r\n\t\t\t\tthis._hueStats.injectIntoArray(idxi32);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tvar idxi32 = sorted;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// TODO: rethink errors\r\n\t\t\t\tthrow new Error(\"Incorrect method\")\r\n\t\t}\r\n\r\n\t\t// int32-ify values\r\n\t\treturn idxi32.map(function (v) {\r\n\t\t\treturn +v;\r\n\t\t});\r\n\t}\r\n\r\n\t// global top-population\r\n\tprivate _colorStats1D(pointBuffer : PointContainer) {\r\n\t\tvar histG      = this._histogram,\r\n\t\t\tpointArray = pointBuffer.getPointArray(),\r\n\t\t\tlen        = pointArray.length;\r\n\r\n\t\tfor (var i = 0; i < len; i++) {\r\n\t\t\tvar col = pointArray[ i ].uint32;\r\n\r\n\t\t\t// collect hue stats\r\n\t\t\tthis._hueStats.check(col);\r\n\r\n\t\t\tif (col in histG)\r\n\t\t\t\thistG[ col ]++;\r\n\t\t\telse\r\n\t\t\t\thistG[ col ] = 1;\r\n\t\t}\r\n\t}\r\n\r\n\t// population threshold within subregions\r\n\t// FIXME: this can over-reduce (few/no colors same?), need a way to keep\r\n\t// important colors that dont ever reach local thresholds (gradients?)\r\n\tprivate _colorStats2D(pointBuffer : PointContainer) {\r\n\t\tvar width      = pointBuffer.getWidth(),\r\n\t\t\theight     = pointBuffer.getHeight(),\r\n\t\t\tpointArray = pointBuffer.getPointArray();\r\n\r\n\t\tvar boxW  = ColorHistogram._boxSize[ 0 ],\r\n\t\t\tboxH  = ColorHistogram._boxSize[ 1 ],\r\n\t\t\tarea  = boxW * boxH,\r\n\t\t\tboxes = this._makeBoxes(width, height, boxW, boxH),\r\n\t\t\thistG = this._histogram;\r\n\r\n\t\tboxes.forEach(box => {\r\n\t\t\tvar effc                                = Math.round((box.w * box.h) / area) * ColorHistogram._boxPixels,\r\n\t\t\t\thistL : { [key : string ] : number} = {},\r\n\t\t\t\tcol : number;\r\n\r\n\t\t\tif (effc < 2) effc = 2;\r\n\r\n\t\t\tthis._iterateBox(box, width, (i : number) => {\r\n\t\t\t\tcol = pointArray[ i ].uint32;\r\n\r\n\t\t\t\t// collect hue stats\r\n\t\t\t\tthis._hueStats.check(col);\r\n\r\n\t\t\t\tif (col in histG)\r\n\t\t\t\t\thistG[ col ]++;\r\n\t\t\t\telse if (col in histL) {\r\n\t\t\t\t\tif (++histL[ col ] >= effc)\r\n\t\t\t\t\t\thistG[ col ] = histL[ col ];\r\n\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t\thistL[ col ] = 1;\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\t// inject min huegroup colors\r\n\t\tthis._hueStats.injectIntoDictionary(histG);\r\n\r\n\t}\r\n\r\n\t// iterates @bbox within a parent rect of width @wid; calls @fn, passing index within parent\r\n\tprivate _iterateBox(bbox : Box, wid : number, fn : Function) {\r\n\t\tvar b                                = bbox,\r\n\t\t\ti0                               = b.y * wid + b.x,\r\n\t\t\ti1                               = (b.y + b.h - 1) * wid + (b.x + b.w - 1),\r\n\t\t\tcnt = 0, incr = wid - b.w + 1, i = i0;\r\n\r\n\t\tdo {\r\n\t\t\tfn.call(this, i);\r\n\t\t\ti += (++cnt % b.w == 0) ? incr : 1;\r\n\t\t} while (i <= i1);\r\n\t}\r\n\r\n\t/**\r\n\t *    partitions a rectangle of width x height into\r\n\t *    array of boxes stepX x stepY (or less)\r\n\t */\r\n\tprivate _makeBoxes(width : number, height : number, stepX : number, stepY : number) {\r\n\t\tvar wrem = width % stepX,\r\n\t\t\threm = height % stepY,\r\n\t\t\txend = width - wrem,\r\n\t\t\tyend = height - hrem;\r\n\r\n\t\tvar boxesArray : Box[] = [];\r\n\t\tfor (var y = 0; y < height; y += stepY)\r\n\t\t\tfor (var x = 0; x < width; x += stepX)\r\n\t\t\t\tboxesArray.push({ x : x, y : y, w : (x == xend ? wrem : stepX), h : (y == yend ? hrem : stepY) });\r\n\r\n\t\treturn boxesArray;\r\n\t}\r\n\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/palette/rgbquant/colorHistogram.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/palette/rgbquant/colorHistogram.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * hueStatistics.ts - part of Image Quantization Library\r\n */\r\nimport {rgb2hsl} from \"../conversion/rgb2hsl\"\r\nimport { hueGroup } from \"./palette\"\r\n\r\nclass HueGroup {\r\n\tnum : number    = 0;\r\n\tcols : number[] = [];\r\n}\r\n\r\nexport class HueStatistics {\r\n\tprivate _numGroups : number;\r\n\tprivate _minCols : number;\r\n\tprivate _stats : HueGroup[];\r\n\tprivate _groupsFull : number;\r\n\r\n\tconstructor(numGroups : number, minCols : number) {\r\n\t\tthis._numGroups = numGroups;\r\n\t\tthis._minCols   = minCols;\r\n\t\tthis._stats     = [];\r\n\r\n\t\tfor (var i = 0; i <= numGroups; i++) {\r\n\t\t\tthis._stats[ i ] = new HueGroup();\r\n\t\t}\r\n\r\n\t\tthis._groupsFull = 0;\r\n\t}\r\n\r\n\tcheck(i32 : number) {\r\n\t\tif (this._groupsFull == this._numGroups + 1) {\r\n\t\t\tthis.check = function () {\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar r   = (i32 & 0xff),\r\n\t\t\tg   = (i32 >>> 8) & 0xff,\r\n\t\t\tb   = (i32 >>> 16) & 0xff,\r\n\t\t\thg  = (r == g && g == b) ? 0 : 1 + hueGroup(rgb2hsl(r, g, b).h, this._numGroups),\r\n\t\t\tgr  = this._stats[ hg ],\r\n\t\t\tmin = this._minCols;\r\n\r\n\t\tgr.num++;\r\n\r\n\t\tif (gr.num > min)\r\n\t\t\treturn;\r\n\t\tif (gr.num == min)\r\n\t\t\tthis._groupsFull++;\r\n\r\n\t\tif (gr.num <= min)\r\n\t\t\tthis._stats[ hg ].cols.push(i32);\r\n\t}\r\n\r\n\tinjectIntoDictionary(histG : { [key : string ] : number}) {\r\n\t\tfor (var i = 0; i <= this._numGroups; i++) {\r\n\t\t\tif (this._stats[ i ].num <= this._minCols) {\r\n\t\t\t\tthis._stats[ i ].cols.forEach((col : number) => {\r\n\t\t\t\t\tif (!histG[ col ])\r\n\t\t\t\t\t\thistG[ col ] = 1;\r\n\t\t\t\t\telse\r\n\t\t\t\t\t\thistG[ col ]++;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tinjectIntoArray(histG : number[]) {\r\n\t\tfor (var i = 0; i <= this._numGroups; i++) {\r\n\t\t\tif (this._stats[ i ].num <= this._minCols) {\r\n\t\t\t\tthis._stats[ i ].cols.forEach((col : number) => {\r\n\t\t\t\t\tif (histG.indexOf(col) == -1)\r\n\t\t\t\t\t\thistG.push(col);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/hueStatistics.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/utils/hueStatistics.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * wuQuant.ts - part of Image Quantization Library\r\n */\r\nimport {Palette} from \"../../utils/palette\"\r\nimport {Point} from \"../../utils/point\"\r\nimport {PointContainer} from \"../../utils/pointContainer\"\r\nimport {IDistanceCalculator} from \"../../distance/common\"\r\n\r\nfunction createArray1D(dimension1 : number) {\r\n\tvar a : number[] = [];\r\n\tfor (var k = 0; k < dimension1; k++) {\r\n\t\ta[ k ] = 0;\r\n\t}\r\n\treturn a;\r\n}\r\n\r\nfunction createArray4D(dimension1 : number, dimension2 : number, dimension3 : number, dimension4 : number) : number[][][][] {\r\n\tvar a = new Array(dimension1);\r\n\tfor (var i = 0; i < dimension1; i++) {\r\n\t\ta[ i ] = new Array(dimension2);\r\n\t\tfor (var j = 0; j < dimension2; j++) {\r\n\t\t\ta[ i ][ j ] = new Array(dimension3);\r\n\t\t\tfor (var k = 0; k < dimension3; k++) {\r\n\t\t\t\ta[ i ][ j ][ k ] = new Array(dimension4);\r\n\t\t\t\tfor (var l = 0; l < dimension4; l++) {\r\n\t\t\t\t\ta[ i ][ j ][ k ][ l ] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn a;\r\n}\r\n\r\nfunction createArray3D(dimension1 : number, dimension2 : number, dimension3 : number) : number[][][] {\r\n\tvar a = new Array(dimension1);\r\n\tfor (var i = 0; i < dimension1; i++) {\r\n\t\ta[ i ] = new Array(dimension2);\r\n\t\tfor (var j = 0; j < dimension2; j++) {\r\n\t\t\ta[ i ][ j ] = new Array(dimension3);\r\n\t\t\tfor (var k = 0; k < dimension3; k++) {\r\n\t\t\t\ta[ i ][ j ][ k ] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn a;\r\n}\r\n\r\nfunction fillArray3D<T>(a : T[][][], dimension1 : number, dimension2 : number, dimension3 : number, value : T) : void {\r\n\tfor (var i = 0; i < dimension1; i++) {\r\n\t\ta[ i ] = [];\r\n\t\tfor (var j = 0; j < dimension2; j++) {\r\n\t\t\ta[ i ][ j ] = [];\r\n\t\t\tfor (var k = 0; k < dimension3; k++) {\r\n\t\t\t\ta[ i ][ j ][ k ] = value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction fillArray1D<T>(a : T[], dimension1 : number, value : T) : void {\r\n\tfor (var i = 0; i < dimension1; i++) {\r\n\t\ta[ i ] = value;\r\n\t}\r\n}\r\n\r\nexport class WuColorCube {\r\n\tredMinimum : number;\r\n\tredMaximum : number;\r\n\tgreenMinimum : number;\r\n\tgreenMaximum : number;\r\n\tblueMinimum : number;\r\n\tblueMaximum : number;\r\n\tvolume : number;\r\n\talphaMinimum : number;\r\n\talphaMaximum : number;\r\n}\r\n\r\nexport class WuQuant {\r\n\r\n\tprivate static alpha = 3;\r\n\tprivate static red   = 2;\r\n\tprivate static green = 1;\r\n\tprivate static blue  = 0;\r\n\r\n\tprivate _reds : number[];\r\n\tprivate _greens : number[];\r\n\tprivate _blues : number[];\r\n\tprivate _alphas : number[];\r\n\tprivate _sums : number[];\r\n\r\n\tprivate _weights : number[][][][];\r\n\tprivate _momentsRed : number[][][][];\r\n\tprivate _momentsGreen : number[][][][];\r\n\tprivate _momentsBlue : number[][][][];\r\n\tprivate _momentsAlpha : number[][][][];\r\n\tprivate _moments : number[][][][];\r\n\r\n\tprivate _table : number[];\r\n\tprivate _pixels : Point[];\r\n\r\n\tprivate _cubes : WuColorCube[];\r\n\tprivate _colors : number;\r\n\r\n\tprivate _significantBitsPerChannel : number;\r\n\tprivate _maxSideIndex : number;\r\n\tprivate _alphaMaxSideIndex : number;\r\n\tprivate _sideSize : number;\r\n\tprivate _alphaSideSize : number;\r\n\r\n\tprivate _distance : IDistanceCalculator;\r\n\r\n\tconstructor(colorDistanceCalculator : IDistanceCalculator, colors : number = 256, significantBitsPerChannel : number = 5) {\r\n\t\tthis._distance = colorDistanceCalculator;\r\n\t\tthis._setQuality(significantBitsPerChannel);\r\n\t\tthis._initialize(colors);\r\n\t}\r\n\r\n\tsample(image : PointContainer) : void {\r\n\t\tvar pointArray = image.getPointArray();\r\n\r\n\t\tfor (var i = 0, l = pointArray.length; i < l; i++) {\r\n\t\t\tthis._addColor(pointArray[ i ]);\r\n\t\t}\r\n\r\n\t\tthis._pixels = this._pixels.concat(pointArray);\r\n\t}\r\n\r\n\tquantize() : Palette {\r\n\t\tthis._preparePalette();\r\n\r\n\t\tvar palette : Palette = new Palette();\r\n\r\n\t\t// generates palette\r\n\t\tfor (var paletteIndex = 0; paletteIndex < this._colors; paletteIndex++) {\r\n\t\t\tif (this._sums[ paletteIndex ] > 0) {\r\n\t\t\t\tvar sum = this._sums[ paletteIndex ],\r\n\t\t\t\t\tr   = this._reds[ paletteIndex ] / sum,\r\n\t\t\t\t\tg   = this._greens[ paletteIndex ] / sum,\r\n\t\t\t\t\tb   = this._blues[ paletteIndex ] / sum,\r\n\t\t\t\t\ta   = this._alphas[ paletteIndex ] / sum;\r\n\r\n\t\t\t\tvar color = Point.createByRGBA(r | 0, g | 0, b | 0, a | 0);\r\n\t\t\t\tpalette.add(color);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tpalette.sort();\r\n\t\treturn palette;\r\n\t}\r\n\r\n\tprivate _preparePalette() : void {\r\n\t\tvar l : number;\r\n\t\t// preprocess the colors\r\n\t\tthis._calculateMoments();\r\n\r\n\t\tvar next           = 0,\r\n\t\t\tvolumeVariance = createArray1D(this._colors);\r\n\r\n\t\t// processes the cubes\r\n\t\tfor (var cubeIndex = 1; cubeIndex < this._colors; ++cubeIndex) {\r\n\t\t\t// if cut is possible; make it\r\n\t\t\tif (this._cut(this._cubes[ next ], this._cubes[ cubeIndex ])) {\r\n\t\t\t\tvolumeVariance[ next ]      = this._cubes[ next ].volume > 1 ? this._calculateVariance(this._cubes[ next ]) : 0.0;\r\n\t\t\t\tvolumeVariance[ cubeIndex ] = this._cubes[ cubeIndex ].volume > 1 ? this._calculateVariance(this._cubes[ cubeIndex ]) : 0.0;\r\n\t\t\t} else {\r\n\t\t\t\t// the cut was not possible, revert the index\r\n\t\t\t\tvolumeVariance[ next ] = 0.0;\r\n\t\t\t\tcubeIndex--;\r\n\t\t\t}\r\n\r\n\t\t\tnext     = 0;\r\n\t\t\tvar temp = volumeVariance[ 0 ];\r\n\r\n\t\t\tfor (var index = 1; index <= cubeIndex; ++index) {\r\n\t\t\t\tif (volumeVariance[ index ] > temp) {\r\n\t\t\t\t\ttemp = volumeVariance[ index ];\r\n\t\t\t\t\tnext = index;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (temp <= 0.0) {\r\n\t\t\t\tthis._colors = cubeIndex + 1;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar lookupRed : number[]   = [],\r\n\t\t\tlookupGreen : number[] = [],\r\n\t\t\tlookupBlue : number[]  = [],\r\n\t\t\tlookupAlpha : number[] = [];\r\n\r\n\t\t// precalculates lookup tables\r\n\t\tfor (var k = 0; k < this._colors; ++k) {\r\n\r\n\t\t\tvar weight = WuQuant._volume(this._cubes[ k ], this._weights);\r\n\r\n\t\t\tif (weight > 0) {\r\n\t\t\t\tlookupRed[ k ]   = (WuQuant._volume(this._cubes[ k ], this._momentsRed) / weight) | 0;\r\n\t\t\t\tlookupGreen[ k ] = (WuQuant._volume(this._cubes[ k ], this._momentsGreen) / weight) | 0;\r\n\t\t\t\tlookupBlue[ k ]  = (WuQuant._volume(this._cubes[ k ], this._momentsBlue) / weight) | 0;\r\n\t\t\t\tlookupAlpha[ k ] = (WuQuant._volume(this._cubes[ k ], this._momentsAlpha) / weight) | 0;\r\n\t\t\t} else {\r\n\t\t\t\tlookupRed[ k ]   = 0;\r\n\t\t\t\tlookupGreen[ k ] = 0;\r\n\t\t\t\tlookupBlue[ k ]  = 0;\r\n\t\t\t\tlookupAlpha[ k ] = 0;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis._reds   = createArray1D(this._colors + 1);\r\n\t\tthis._greens = createArray1D(this._colors + 1);\r\n\t\tthis._blues  = createArray1D(this._colors + 1);\r\n\t\tthis._alphas = createArray1D(this._colors + 1);\r\n\t\tthis._sums   = createArray1D(this._colors + 1);\r\n\r\n\t\t// scans and adds colors\r\n\t\tfor (var index = 0, l = this._pixels.length; index < l; index++) {\r\n\t\t\tvar color : Point = this._pixels[ index ];\r\n\r\n\t\t\tvar match        = -1,\r\n\t\t\t\tbestMatch    = match,\r\n\t\t\t\tbestDistance = Number.MAX_VALUE;\r\n\r\n\t\t\tfor (var lookup = 0; lookup < this._colors; lookup++) {\r\n\t\t\t\tvar foundRed   = lookupRed[ lookup ],\r\n\t\t\t\t\tfoundGreen = lookupGreen[ lookup ],\r\n\t\t\t\t\tfoundBlue  = lookupBlue[ lookup ],\r\n\t\t\t\t\tfoundAlpha = lookupAlpha[ lookup ];\r\n\r\n\t\t\t\tvar distance = this._distance.calculateRaw(foundRed, foundGreen, foundBlue, foundAlpha, color.r, color.g, color.b, color.a);\r\n\t\t\t\t//var distance = this._distance.calculateRaw(Utils.Point.createByRGBA(foundRed, foundGreen, foundBlue, foundAlpha), color);\r\n\t\t\t\t//deltaRed   = color.r - foundRed,\r\n\t\t\t\t//deltaGreen = color.g - foundGreen,\r\n\t\t\t\t//deltaBlue  = color.b - foundBlue,\r\n\t\t\t\t//deltaAlpha = color.a - foundAlpha,\r\n\r\n\t\t\t\t//distance   = deltaRed * deltaRed + deltaGreen * deltaGreen + deltaBlue * deltaBlue + deltaAlpha * deltaAlpha;\r\n\r\n\t\t\t\tif (distance < bestDistance) {\r\n\t\t\t\t\tbestDistance = distance;\r\n\t\t\t\t\tbestMatch    = lookup;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tthis._reds[ bestMatch ] += color.r;\r\n\t\t\tthis._greens[ bestMatch ] += color.g;\r\n\t\t\tthis._blues[ bestMatch ] += color.b;\r\n\t\t\tthis._alphas[ bestMatch ] += color.a;\r\n\t\t\tthis._sums[ bestMatch ]++;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _addColor(color : Point) : void {\r\n\t\tvar bitsToRemove = 8 - this._significantBitsPerChannel,\r\n\t\t\tindexRed     = (color.r >> bitsToRemove) + 1,\r\n\t\t\tindexGreen   = (color.g >> bitsToRemove) + 1,\r\n\t\t\tindexBlue    = (color.b >> bitsToRemove) + 1,\r\n\t\t\tindexAlpha   = (color.a >> bitsToRemove) + 1;\r\n\r\n\t\t//if(color.a > 10) {\r\n\t\tthis._weights[ indexAlpha ][ indexRed ][ indexGreen ][ indexBlue ]++;\r\n\t\tthis._momentsRed[ indexAlpha ][ indexRed ][ indexGreen ][ indexBlue ] += color.r;\r\n\t\tthis._momentsGreen[ indexAlpha ][ indexRed ][ indexGreen ][ indexBlue ] += color.g;\r\n\t\tthis._momentsBlue[ indexAlpha ][ indexRed ][ indexGreen ][ indexBlue ] += color.b;\r\n\t\tthis._momentsAlpha[ indexAlpha ][ indexRed ][ indexGreen ][ indexBlue ] += color.a;\r\n\t\tthis._moments[ indexAlpha ][ indexRed ][ indexGreen ][ indexBlue ] += this._table[ color.r ] + this._table[ color.g ] + this._table[ color.b ] + this._table[ color.a ];\r\n//\t\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Converts the histogram to a series of _moments.\r\n\t */\r\n\tprivate _calculateMoments() : void {\r\n\t\tvar area : number[]      = [],\r\n\t\t\tareaRed : number[]   = [],\r\n\t\t\tareaGreen : number[] = [],\r\n\t\t\tareaBlue : number[]  = [],\r\n\t\t\tareaAlpha : number[] = [],\r\n\t\t\tarea2 : number[]     = [];\r\n\r\n\t\tvar xarea : number[][][]      = createArray3D(this._sideSize, this._sideSize, this._sideSize),\r\n\t\t\txareaRed : number[][][]   = createArray3D(this._sideSize, this._sideSize, this._sideSize),\r\n\t\t\txareaGreen : number[][][] = createArray3D(this._sideSize, this._sideSize, this._sideSize),\r\n\t\t\txareaBlue : number[][][]  = createArray3D(this._sideSize, this._sideSize, this._sideSize),\r\n\t\t\txareaAlpha : number[][][] = createArray3D(this._sideSize, this._sideSize, this._sideSize),\r\n\t\t\txarea2 : number[][][]     = createArray3D(this._sideSize, this._sideSize, this._sideSize);\r\n\r\n\t\tfor (var alphaIndex = 1; alphaIndex <= this._alphaMaxSideIndex; ++alphaIndex) {\r\n\t\t\tfillArray3D<number>(xarea, this._sideSize, this._sideSize, this._sideSize, 0);\r\n\t\t\tfillArray3D<number>(xareaRed, this._sideSize, this._sideSize, this._sideSize, 0);\r\n\t\t\tfillArray3D<number>(xareaGreen, this._sideSize, this._sideSize, this._sideSize, 0);\r\n\t\t\tfillArray3D<number>(xareaBlue, this._sideSize, this._sideSize, this._sideSize, 0);\r\n\t\t\tfillArray3D<number>(xareaAlpha, this._sideSize, this._sideSize, this._sideSize, 0);\r\n\t\t\tfillArray3D<number>(xarea2, this._sideSize, this._sideSize, this._sideSize, 0);\r\n\r\n\t\t\tfor (var redIndex = 1; redIndex <= this._maxSideIndex; ++redIndex) {\r\n\t\t\t\tfillArray1D<number>(area, this._sideSize, 0);\r\n\t\t\t\tfillArray1D<number>(areaRed, this._sideSize, 0);\r\n\t\t\t\tfillArray1D<number>(areaGreen, this._sideSize, 0);\r\n\t\t\t\tfillArray1D<number>(areaBlue, this._sideSize, 0);\r\n\t\t\t\tfillArray1D<number>(areaAlpha, this._sideSize, 0);\r\n\t\t\t\tfillArray1D<number>(area2, this._sideSize, 0);\r\n\r\n\t\t\t\tfor (var greenIndex = 1; greenIndex <= this._maxSideIndex; ++greenIndex) {\r\n\t\t\t\t\tvar line      = 0,\r\n\t\t\t\t\t\tlineRed   = 0,\r\n\t\t\t\t\t\tlineGreen = 0,\r\n\t\t\t\t\t\tlineBlue  = 0,\r\n\t\t\t\t\t\tlineAlpha = 0,\r\n\t\t\t\t\t\tline2     = 0.0;\r\n\r\n\t\t\t\t\tfor (var blueIndex = 1; blueIndex <= this._maxSideIndex; ++blueIndex) {\r\n\t\t\t\t\t\tline += this._weights[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tlineRed += this._momentsRed[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tlineGreen += this._momentsGreen[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tlineBlue += this._momentsBlue[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tlineAlpha += this._momentsAlpha[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tline2 += this._moments[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ];\r\n\r\n\t\t\t\t\t\tarea[ blueIndex ] += line;\r\n\t\t\t\t\t\tareaRed[ blueIndex ] += lineRed;\r\n\t\t\t\t\t\tareaGreen[ blueIndex ] += lineGreen;\r\n\t\t\t\t\t\tareaBlue[ blueIndex ] += lineBlue;\r\n\t\t\t\t\t\tareaAlpha[ blueIndex ] += lineAlpha;\r\n\t\t\t\t\t\tarea2[ blueIndex ] += line2;\r\n\r\n\t\t\t\t\t\txarea[ redIndex ][ greenIndex ][ blueIndex ]      = xarea[ redIndex - 1 ][ greenIndex ][ blueIndex ] + area[ blueIndex ];\r\n\t\t\t\t\t\txareaRed[ redIndex ][ greenIndex ][ blueIndex ]   = xareaRed[ redIndex - 1 ][ greenIndex ][ blueIndex ] + areaRed[ blueIndex ];\r\n\t\t\t\t\t\txareaGreen[ redIndex ][ greenIndex ][ blueIndex ] = xareaGreen[ redIndex - 1 ][ greenIndex ][ blueIndex ] + areaGreen[ blueIndex ];\r\n\t\t\t\t\t\txareaBlue[ redIndex ][ greenIndex ][ blueIndex ]  = xareaBlue[ redIndex - 1 ][ greenIndex ][ blueIndex ] + areaBlue[ blueIndex ];\r\n\t\t\t\t\t\txareaAlpha[ redIndex ][ greenIndex ][ blueIndex ] = xareaAlpha[ redIndex - 1 ][ greenIndex ][ blueIndex ] + areaAlpha[ blueIndex ];\r\n\t\t\t\t\t\txarea2[ redIndex ][ greenIndex ][ blueIndex ]     = xarea2[ redIndex - 1 ][ greenIndex ][ blueIndex ] + area2[ blueIndex ];\r\n\r\n\t\t\t\t\t\tthis._weights[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ]      = this._weights[ alphaIndex - 1 ][ redIndex ][ greenIndex ][ blueIndex ] + xarea[ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tthis._momentsRed[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ]   = this._momentsRed[ alphaIndex - 1 ][ redIndex ][ greenIndex ][ blueIndex ] + xareaRed[ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tthis._momentsGreen[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ] = this._momentsGreen[ alphaIndex - 1 ][ redIndex ][ greenIndex ][ blueIndex ] + xareaGreen[ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tthis._momentsBlue[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ]  = this._momentsBlue[ alphaIndex - 1 ][ redIndex ][ greenIndex ][ blueIndex ] + xareaBlue[ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tthis._momentsAlpha[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ] = this._momentsAlpha[ alphaIndex - 1 ][ redIndex ][ greenIndex ][ blueIndex ] + xareaAlpha[ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t\tthis._moments[ alphaIndex ][ redIndex ][ greenIndex ][ blueIndex ]      = this._moments[ alphaIndex - 1 ][ redIndex ][ greenIndex ][ blueIndex ] + xarea2[ redIndex ][ greenIndex ][ blueIndex ];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Computes the volume of the cube in a specific moment.\r\n\t */\r\n\tprivate static _volumeFloat(cube : WuColorCube, moment : number[][][][]) : number {\r\n\t\treturn (moment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMaximum ] -\r\n\t\t\tmoment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMaximum ] -\r\n\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMaximum ] +\r\n\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMaximum ] -\r\n\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMaximum ] +\r\n\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMaximum ] +\r\n\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMaximum ] -\r\n\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMaximum ]) -\r\n\r\n\t\t\t(moment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMinimum ] -\r\n\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMinimum ] -\r\n\t\t\tmoment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMinimum ] +\r\n\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMinimum ] -\r\n\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMinimum ] +\r\n\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMinimum ] +\r\n\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ] -\r\n\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ]);\r\n\t}\r\n\r\n\t/**\r\n\t * Computes the volume of the cube in a specific moment.\r\n\t */\r\n\tprivate static _volume(cube : WuColorCube, moment : number[][][][]) : number {\r\n\t\treturn WuQuant._volumeFloat(cube, moment) | 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Splits the cube in given position][and color direction.\r\n\t */\r\n\tprivate static _top(cube : WuColorCube, direction : number, position : number, moment : number[][][][]) : number {\r\n\t\tvar result : number;\r\n\t\tswitch (direction) {\r\n\t\t\tcase WuQuant.alpha:\r\n\t\t\t\tresult = (moment[ position ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ position ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ position ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ position ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMaximum ]) -\r\n\t\t\t\t\t(moment[ position ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ position ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ position ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ position ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ]);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase WuQuant.red:\r\n\t\t\t\tresult = (moment[ cube.alphaMaximum ][ position ][ cube.greenMaximum ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ position ][ cube.greenMinimum ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ position ][ cube.greenMaximum ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ position ][ cube.greenMinimum ][ cube.blueMaximum ]) -\r\n\t\t\t\t\t(moment[ cube.alphaMaximum ][ position ][ cube.greenMaximum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ position ][ cube.greenMinimum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ position ][ cube.greenMaximum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ position ][ cube.greenMinimum ][ cube.blueMinimum ]);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase WuQuant.green:\r\n\t\t\t\tresult = (moment[ cube.alphaMaximum ][ cube.redMaximum ][ position ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ position ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ position ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ position ][ cube.blueMaximum ]) -\r\n\t\t\t\t\t(moment[ cube.alphaMaximum ][ cube.redMaximum ][ position ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ position ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ position ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ position ][ cube.blueMinimum ]);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase WuQuant.blue:\r\n\t\t\t\tresult = (moment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMaximum ][ position ] -\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMinimum ][ position ] -\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMaximum ][ position ] +\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMinimum ][ position ]) -\r\n\t\t\t\t\t(moment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMaximum ][ position ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMinimum ][ position ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMaximum ][ position ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ position ]);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"impossible\")\r\n\t\t}\r\n\r\n\t\treturn result | 0;\r\n\t}\r\n\r\n\t/**\r\n\t * Splits the cube in a given color direction at its minimum.\r\n\t */\r\n\tprivate static _bottom(cube : WuColorCube, direction : number, moment : number[][][][]) : number {\r\n\t\tswitch (direction) {\r\n\t\t\tcase WuQuant.alpha:\r\n\t\t\t\treturn (-moment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMaximum ]) -\r\n\t\t\t\t\t(-moment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ]);\r\n\r\n\t\t\tcase WuQuant.red:\r\n\t\t\t\treturn (-moment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMaximum ]) -\r\n\t\t\t\t\t(-moment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ]);\r\n\r\n\t\t\tcase WuQuant.green:\r\n\t\t\t\treturn (-moment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMaximum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMaximum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMaximum ]) -\r\n\t\t\t\t\t(-moment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ]);\r\n\r\n\t\t\tcase WuQuant.blue:\r\n\t\t\t\treturn (-moment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMaximum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ]) -\r\n\t\t\t\t\t(-moment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMaximum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMaximum ][ cube.greenMinimum ][ cube.blueMinimum ] +\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMaximum ][ cube.blueMinimum ] -\r\n\t\t\t\t\tmoment[ cube.alphaMinimum ][ cube.redMinimum ][ cube.greenMinimum ][ cube.blueMinimum ]);\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// TODO: why here is return 0, and in this._top there is no default at all (now it is throw error)?\r\n\t\t\t\treturn 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates statistical variance for a given cube.\r\n\t */\r\n\tprivate  _calculateVariance(cube : WuColorCube) : number {\r\n\t\tvar volumeRed    = WuQuant._volume(cube, this._momentsRed),\r\n\t\t\tvolumeGreen  = WuQuant._volume(cube, this._momentsGreen),\r\n\t\t\tvolumeBlue   = WuQuant._volume(cube, this._momentsBlue),\r\n\t\t\tvolumeAlpha  = WuQuant._volume(cube, this._momentsAlpha),\r\n\t\t\tvolumeMoment = WuQuant._volumeFloat(cube, this._moments),\r\n\t\t\tvolumeWeight = WuQuant._volume(cube, this._weights),\r\n\r\n\t\t\tdistance     = volumeRed * volumeRed + volumeGreen * volumeGreen + volumeBlue * volumeBlue + volumeAlpha * volumeAlpha;\r\n\r\n\t\treturn volumeMoment - (distance / volumeWeight);\r\n\t}\r\n\r\n\t/**\r\n\t * Finds the optimal (maximal) position for the cut.\r\n\t */\r\n\tprivate _maximize(cube : WuColorCube, direction : number, first : number, last : number, wholeRed : number, wholeGreen : number, wholeBlue : number, wholeAlpha : number, wholeWeight : number) : {max : number; position : number} {\r\n\t\tvar bottomRed    = WuQuant._bottom(cube, direction, this._momentsRed) | 0,\r\n\t\t\tbottomGreen  = WuQuant._bottom(cube, direction, this._momentsGreen) | 0,\r\n\t\t\tbottomBlue   = WuQuant._bottom(cube, direction, this._momentsBlue) | 0,\r\n\t\t\tbottomAlpha  = WuQuant._bottom(cube, direction, this._momentsAlpha) | 0,\r\n\t\t\tbottomWeight = WuQuant._bottom(cube, direction, this._weights) | 0,\r\n\r\n\t\t\tresult       = 0.0,\r\n\t\t\tcutPosition  = -1;\r\n\r\n\t\tfor (var position = first; position < last; ++position) {\r\n\t\t\t// determines the cube cut at a certain position\r\n\t\t\tvar halfRed    = bottomRed + WuQuant._top(cube, direction, position, this._momentsRed),\r\n\t\t\t\thalfGreen  = bottomGreen + WuQuant._top(cube, direction, position, this._momentsGreen),\r\n\t\t\t\thalfBlue   = bottomBlue + WuQuant._top(cube, direction, position, this._momentsBlue),\r\n\t\t\t\thalfAlpha  = bottomAlpha + WuQuant._top(cube, direction, position, this._momentsAlpha),\r\n\t\t\t\thalfWeight = bottomWeight + WuQuant._top(cube, direction, position, this._weights);\r\n\r\n\t\t\t// the cube cannot be cut at bottom (this would lead to empty cube)\r\n\t\t\tif (halfWeight != 0) {\r\n\t\t\t\tvar halfDistance = halfRed * halfRed + halfGreen * halfGreen + halfBlue * halfBlue + halfAlpha * halfAlpha,\r\n\t\t\t\t\ttemp         = halfDistance / halfWeight;\r\n\r\n\t\t\t\thalfRed    = wholeRed - halfRed;\r\n\t\t\t\thalfGreen  = wholeGreen - halfGreen;\r\n\t\t\t\thalfBlue   = wholeBlue - halfBlue;\r\n\t\t\t\thalfAlpha  = wholeAlpha - halfAlpha;\r\n\t\t\t\thalfWeight = wholeWeight - halfWeight;\r\n\r\n\t\t\t\tif (halfWeight != 0) {\r\n\t\t\t\t\thalfDistance = halfRed * halfRed + halfGreen * halfGreen + halfBlue * halfBlue + halfAlpha * halfAlpha;\r\n\t\t\t\t\ttemp += halfDistance / halfWeight;\r\n\r\n\t\t\t\t\tif (temp > result) {\r\n\t\t\t\t\t\tresult      = temp;\r\n\t\t\t\t\t\tcutPosition = position;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn { max : result, position : cutPosition };\r\n\t}\r\n\r\n\t// Cuts a cube with another one.\r\n\tprivate _cut(first : WuColorCube, second : WuColorCube) : boolean {\r\n\t\tvar direction : number,\r\n\r\n\t\t\twholeRed    = WuQuant._volume(first, this._momentsRed),\r\n\t\t\twholeGreen  = WuQuant._volume(first, this._momentsGreen),\r\n\t\t\twholeBlue   = WuQuant._volume(first, this._momentsBlue),\r\n\t\t\twholeAlpha  = WuQuant._volume(first, this._momentsAlpha),\r\n\t\t\twholeWeight = WuQuant._volume(first, this._weights),\r\n\r\n\t\t\tred         = this._maximize(first, WuQuant.red, first.redMinimum + 1, first.redMaximum, wholeRed, wholeGreen, wholeBlue, wholeAlpha, wholeWeight),\r\n\t\t\tgreen       = this._maximize(first, WuQuant.green, first.greenMinimum + 1, first.greenMaximum, wholeRed, wholeGreen, wholeBlue, wholeAlpha, wholeWeight),\r\n\t\t\tblue        = this._maximize(first, WuQuant.blue, first.blueMinimum + 1, first.blueMaximum, wholeRed, wholeGreen, wholeBlue, wholeAlpha, wholeWeight),\r\n\t\t\talpha       = this._maximize(first, WuQuant.alpha, first.alphaMinimum + 1, first.alphaMaximum, wholeRed, wholeGreen, wholeBlue, wholeAlpha, wholeWeight);\r\n\r\n\t\tif (alpha.max >= red.max && alpha.max >= green.max && alpha.max >= blue.max) {\r\n\t\t\tdirection = WuQuant.alpha;\r\n\r\n\t\t\t// cannot split empty cube\r\n\t\t\tif (alpha.position < 0) return false;\r\n\t\t} else {\r\n\t\t\tif (red.max >= alpha.max && red.max >= green.max && red.max >= blue.max) {\r\n\t\t\t\tdirection = WuQuant.red;\r\n\t\t\t} else if (green.max >= alpha.max && green.max >= red.max && green.max >= blue.max) {\r\n\t\t\t\tdirection = WuQuant.green;\r\n\t\t\t} else {\r\n\t\t\t\tdirection = WuQuant.blue;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tsecond.redMaximum   = first.redMaximum;\r\n\t\tsecond.greenMaximum = first.greenMaximum;\r\n\t\tsecond.blueMaximum  = first.blueMaximum;\r\n\t\tsecond.alphaMaximum = first.alphaMaximum;\r\n\r\n\t\t// cuts in a certain direction\r\n\t\tswitch (direction) {\r\n\t\t\tcase WuQuant.red:\r\n\t\t\t\tsecond.redMinimum = first.redMaximum = red.position;\r\n\t\t\t\tsecond.greenMinimum = first.greenMinimum;\r\n\t\t\t\tsecond.blueMinimum  = first.blueMinimum;\r\n\t\t\t\tsecond.alphaMinimum = first.alphaMinimum;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase WuQuant.green:\r\n\t\t\t\tsecond.greenMinimum = first.greenMaximum = green.position;\r\n\t\t\t\tsecond.redMinimum   = first.redMinimum;\r\n\t\t\t\tsecond.blueMinimum  = first.blueMinimum;\r\n\t\t\t\tsecond.alphaMinimum = first.alphaMinimum;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase WuQuant.blue:\r\n\t\t\t\tsecond.blueMinimum = first.blueMaximum = blue.position;\r\n\t\t\t\tsecond.redMinimum   = first.redMinimum;\r\n\t\t\t\tsecond.greenMinimum = first.greenMinimum;\r\n\t\t\t\tsecond.alphaMinimum = first.alphaMinimum;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase WuQuant.alpha:\r\n\t\t\t\tsecond.alphaMinimum = first.alphaMaximum = alpha.position;\r\n\t\t\t\tsecond.blueMinimum  = first.blueMinimum;\r\n\t\t\t\tsecond.redMinimum   = first.redMinimum;\r\n\t\t\t\tsecond.greenMinimum = first.greenMinimum;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t\t// determines the volumes after cut\r\n\t\tfirst.volume  = (first.redMaximum - first.redMinimum) * (first.greenMaximum - first.greenMinimum) * (first.blueMaximum - first.blueMinimum) * (first.alphaMaximum - first.alphaMinimum);\r\n\t\tsecond.volume = (second.redMaximum - second.redMinimum) * (second.greenMaximum - second.greenMinimum) * (second.blueMaximum - second.blueMinimum) * (second.alphaMaximum - second.alphaMinimum);\r\n\r\n\t\t// the cut was successful\r\n\t\treturn true;\r\n\t}\r\n\r\n\tprivate _initialize(colors : number) : void {\r\n\t\tthis._colors = colors;\r\n\r\n\t\t// creates all the _cubes\r\n\t\tthis._cubes = [];\r\n\r\n\t\t// initializes all the _cubes\r\n\t\tfor (var cubeIndex = 0; cubeIndex < colors; cubeIndex++) {\r\n\t\t\tthis._cubes[ cubeIndex ] = new WuColorCube();\r\n\t\t}\r\n\r\n\t\t// resets the reference minimums\r\n\t\tthis._cubes[ 0 ].redMinimum   = 0;\r\n\t\tthis._cubes[ 0 ].greenMinimum = 0;\r\n\t\tthis._cubes[ 0 ].blueMinimum  = 0;\r\n\t\tthis._cubes[ 0 ].alphaMinimum = 0;\r\n\r\n\t\t// resets the reference maximums\r\n\t\tthis._cubes[ 0 ].redMaximum   = this._maxSideIndex;\r\n\t\tthis._cubes[ 0 ].greenMaximum = this._maxSideIndex;\r\n\t\tthis._cubes[ 0 ].blueMaximum  = this._maxSideIndex;\r\n\t\tthis._cubes[ 0 ].alphaMaximum = this._alphaMaxSideIndex;\r\n\r\n\t\tthis._weights      = createArray4D(this._alphaSideSize, this._sideSize, this._sideSize, this._sideSize);\r\n\t\tthis._momentsRed   = createArray4D(this._alphaSideSize, this._sideSize, this._sideSize, this._sideSize);\r\n\t\tthis._momentsGreen = createArray4D(this._alphaSideSize, this._sideSize, this._sideSize, this._sideSize);\r\n\t\tthis._momentsBlue  = createArray4D(this._alphaSideSize, this._sideSize, this._sideSize, this._sideSize);\r\n\t\tthis._momentsAlpha = createArray4D(this._alphaSideSize, this._sideSize, this._sideSize, this._sideSize);\r\n\t\tthis._moments      = createArray4D(this._alphaSideSize, this._sideSize, this._sideSize, this._sideSize);\r\n\r\n\t\tthis._table = [];\r\n\t\tfor (var tableIndex = 0; tableIndex < 256; ++tableIndex) {\r\n\t\t\tthis._table[ tableIndex ] = tableIndex * tableIndex;\r\n\t\t}\r\n\r\n\t\tthis._pixels = [];\r\n\t}\r\n\r\n\tprivate _setQuality(significantBitsPerChannel : number = 5) : void {\r\n\t\tthis._significantBitsPerChannel = significantBitsPerChannel;\r\n\t\tthis._maxSideIndex              = 1 << this._significantBitsPerChannel;\r\n\t\tthis._alphaMaxSideIndex         = this._maxSideIndex;\r\n\r\n\t\tthis._sideSize      = this._maxSideIndex + 1;\r\n\t\tthis._alphaSideSize = this._alphaMaxSideIndex + 1;\r\n\t}\r\n\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/palette/wu/wuQuant.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/palette/wu/wuQuant.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * iq.ts - Image Quantization Library\r\n */\r\nimport {IImageDitherer} from \"./common\"\r\nimport {NearestColor} from \"./nearestColor\"\r\nimport {ErrorDiffusionArray, ErrorDiffusionArrayKernel} from \"./array\"\r\nimport {ErrorDiffusionRiemersma} from \"./riemersma\"\r\n\r\nexport {\r\n\tIImageDitherer,\r\n\tNearestColor,\r\n\tErrorDiffusionArray,\r\n\tErrorDiffusionArrayKernel,\r\n\tErrorDiffusionRiemersma\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/image/index.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/image/index.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * nearestColor.ts - part of Image Quantization Library\r\n */\r\nimport {IImageDitherer} from \"./common\"\r\nimport {IDistanceCalculator} from \"../distance/common\"\r\nimport {PointContainer} from \"../utils/pointContainer\"\r\nimport {Palette} from \"../utils/palette\"\r\n\r\nexport class NearestColor implements IImageDitherer {\r\n\tprivate _distance : IDistanceCalculator;\r\n\r\n\tconstructor(colorDistanceCalculator : IDistanceCalculator) {\r\n\t\tthis._distance = colorDistanceCalculator;\r\n\t}\r\n\r\n\tquantize(pointBuffer : PointContainer, palette : Palette) : PointContainer {\r\n\t\tvar pointArray = pointBuffer.getPointArray(),\r\n\t\t\twidth      = pointBuffer.getWidth(),\r\n\t\t\theight     = pointBuffer.getHeight();\r\n\r\n\t\tfor (var y = 0; y < height; y++) {\r\n\t\t\tfor (var x = 0, idx = y * width; x < width; x++, idx++) {\r\n\t\t\t\t// Image pixel\r\n\t\t\t\tvar point = pointArray[ idx ];\r\n\t\t\t\t// Reduced pixel\r\n\t\t\t\tpoint.from(palette.getNearestColor(this._distance, point));\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn pointBuffer;\r\n\t}\r\n}\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/image/nearestColor.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/image/nearestColor.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * ditherErrorDiffusionArray.ts - part of Image Quantization Library\r\n */\r\nimport {IImageDitherer} from \"./common\"\r\nimport {IDistanceCalculator} from \"../distance/common\"\r\nimport {PointContainer} from \"../utils/pointContainer\"\r\nimport {Palette} from \"../utils/palette\"\r\nimport {Point} from \"../utils/point\"\r\nimport {intInRange} from \"../utils/arithmetic\"\r\n\r\n// TODO: is it the best name for this enum \"kernel\"?\r\nexport enum ErrorDiffusionArrayKernel {\r\n\tFloydSteinberg = 0,\r\n\tFalseFloydSteinberg,\r\n\tStucki,\r\n\tAtkinson,\r\n\tJarvis,\r\n\tBurkes,\r\n\tSierra,\r\n\tTwoSierra,\r\n\tSierraLite\r\n}\r\n\r\n// http://www.tannerhelland.com/4660/dithering-eleven-algorithms-source-code/\r\nexport class ErrorDiffusionArray implements IImageDitherer {\r\n\tprivate _minColorDistance : number;\r\n\tprivate _serpentine : boolean;\r\n\tprivate _kernel : number[][];\r\n\t/**\r\n\t * true = GIMP, false = XNVIEW\r\n\t */\r\n\tprivate _calculateErrorLikeGIMP : boolean;\r\n\r\n\tprivate _distance : IDistanceCalculator;\r\n\r\n\tconstructor(colorDistanceCalculator : IDistanceCalculator, kernel : ErrorDiffusionArrayKernel, serpentine : boolean = true, minimumColorDistanceToDither : number = 0, calculateErrorLikeGIMP : boolean = false) {\r\n\t\tthis._setKernel(kernel);\r\n\r\n\t\tthis._distance               = colorDistanceCalculator;\r\n\t\tthis._minColorDistance       = minimumColorDistanceToDither;\r\n\t\tthis._serpentine             = serpentine;\r\n\t\tthis._calculateErrorLikeGIMP = calculateErrorLikeGIMP;\r\n\t}\r\n\r\n\t// adapted from http://jsbin.com/iXofIji/2/edit by PAEz\r\n\t// fixed version. it doesn't use image pixels as error storage, also it doesn't have 0.3 + 0.3 + 0.3 + 0.3 = 0 error\r\n\tquantize(pointBuffer : PointContainer, palette : Palette) : PointContainer {\r\n\t\tvar pointArray                = pointBuffer.getPointArray(),\r\n\t\t\toriginalPoint             = new Point(),\r\n\t\t\twidth                     = pointBuffer.getWidth(),\r\n\t\t\theight                    = pointBuffer.getHeight(),\r\n\t\t\tdir                       = 1,\r\n\t\t\terrorLines : number[][][] = [];\r\n\r\n\t\t// initial error lines (number is taken from dithering kernel)\r\n\t\tfor (var i = 0, maxErrorLines = 1; i < this._kernel.length; i++) {\r\n\t\t\tvar kernelErrorLines = this._kernel[ i ][ 2 ] + 1;\r\n\t\t\t(maxErrorLines < kernelErrorLines) && (maxErrorLines = kernelErrorLines);\r\n\t\t}\r\n\t\tfor (var i = 0; i < maxErrorLines; i++) {\r\n\t\t\tthis._fillErrorLine(errorLines[ i ] = [], width);\r\n\t\t}\r\n\r\n\t\tfor (var y = 0; y < height; y++) {\r\n\t\t\t// always serpentine\r\n\t\t\tif (this._serpentine) dir = dir * -1;\r\n\r\n\t\t\tvar lni    = y * width,\r\n\t\t\t\txStart = dir == 1 ? 0 : width - 1,\r\n\t\t\t\txEnd   = dir == 1 ? width : -1;\r\n\r\n\t\t\t// cyclic shift with erasing\r\n\t\t\tthis._fillErrorLine(errorLines[ 0 ], width);\r\n\t\t\t// TODO: why it is needed to cast types here?\r\n\t\t\terrorLines.push(<number[][]>errorLines.shift());\r\n\r\n\t\t\tvar errorLine = errorLines[ 0 ];\r\n\t\t\tfor (var x = xStart, idx = lni + xStart; x !== xEnd; x += dir, idx += dir) {\r\n\t\t\t\t// Image pixel\r\n\t\t\t\tvar point = pointArray[ idx ],\r\n\t\t\t\t\t//originalPoint = new Utils.Point(),\r\n\t\t\t\t\terror = errorLine[ x ];\r\n\r\n\t\t\t\toriginalPoint.from(point);\r\n\r\n\t\t\t\tvar correctedPoint = Point.createByRGBA(\r\n\t\t\t\t\tintInRange(point.r + error[ 0 ], 0, 255),\r\n\t\t\t\t\tintInRange(point.g + error[ 1 ], 0, 255),\r\n\t\t\t\t\tintInRange(point.b + error[ 2 ], 0, 255),\r\n\t\t\t\t\tintInRange(point.a + error[ 3 ], 0, 255)\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Reduced pixel\r\n\t\t\t\tvar palettePoint = palette.getNearestColor(this._distance, correctedPoint);\r\n\t\t\t\tpoint.from(palettePoint);\r\n\r\n\t\t\t\t// dithering strength\r\n\t\t\t\tif (this._minColorDistance) {\r\n\t\t\t\t\tvar dist = this._distance.calculateNormalized(point, palettePoint);\r\n\t\t\t\t\tif (dist < this._minColorDistance)\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Component distance\r\n\t\t\t\tif (this._calculateErrorLikeGIMP) {\r\n\t\t\t\t\tvar er = correctedPoint.r - palettePoint.r,\r\n\t\t\t\t\t\teg = correctedPoint.g - palettePoint.g,\r\n\t\t\t\t\t\teb = correctedPoint.b - palettePoint.b,\r\n\t\t\t\t\t\tea = correctedPoint.a - palettePoint.a;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar er = originalPoint.r - palettePoint.r,\r\n\t\t\t\t\t\teg = originalPoint.g - palettePoint.g,\r\n\t\t\t\t\t\teb = originalPoint.b - palettePoint.b,\r\n\t\t\t\t\t\tea = originalPoint.a - palettePoint.a;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar dStart = dir == 1 ? 0 : this._kernel.length - 1,\r\n\t\t\t\t\tdEnd   = dir == 1 ? this._kernel.length : -1;\r\n\r\n\t\t\t\tfor (var i = dStart; i !== dEnd; i += dir) {\r\n\t\t\t\t\tvar x1 = this._kernel[ i ][ 1 ] * dir,\r\n\t\t\t\t\t\ty1 = this._kernel[ i ][ 2 ];\r\n\r\n\t\t\t\t\tif (x1 + x >= 0 && x1 + x < width && y1 + y >= 0 && y1 + y < height) {\r\n\t\t\t\t\t\tvar d = this._kernel[ i ][ 0 ],\r\n\t\t\t\t\t\t\te = errorLines[ y1 ][ x1 + x ];\r\n\r\n\t\t\t\t\t\te[ 0 ] = e[ 0 ] + er * d;\r\n\t\t\t\t\t\te[ 1 ] = e[ 1 ] + eg * d;\r\n\t\t\t\t\t\te[ 2 ] = e[ 2 ] + eb * d;\r\n\t\t\t\t\t\te[ 3 ] = e[ 3 ] + ea * d;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn pointBuffer;\r\n\t}\r\n\r\n\tprivate _fillErrorLine(errorLine : number[][], width : number) : void {\r\n\t\t// shrink\r\n\t\tif (errorLine.length > width) {\r\n\t\t\terrorLine.length = width;\r\n\t\t}\r\n\r\n\t\t// reuse existing arrays\r\n\t\tvar l = errorLine.length;\r\n\t\tfor (var i = 0; i < l; i++) {\r\n\t\t\tvar error  = errorLine[ i ];\r\n\t\t\terror[ 0 ] = error[ 1 ] = error[ 2 ] = error[ 3 ] = 0;\r\n\t\t}\r\n\r\n\t\t// create missing arrays\r\n\t\tfor (var i = l; i < width; i++) {\r\n\t\t\terrorLine[ i ] = [ 0.0, 0.0, 0.0, 0.0 ];\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _setKernel(kernel : ErrorDiffusionArrayKernel) {\r\n\t\tswitch (kernel) {\r\n\t\t\tcase ErrorDiffusionArrayKernel.FloydSteinberg:\r\n\t\t\t\tthis._kernel = [\r\n\t\t\t\t\t[ 7 / 16, 1, 0 ],\r\n\t\t\t\t\t[ 3 / 16, -1, 1 ],\r\n\t\t\t\t\t[ 5 / 16, 0, 1 ],\r\n\t\t\t\t\t[ 1 / 16, 1, 1 ]\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ErrorDiffusionArrayKernel.FalseFloydSteinberg:\r\n\t\t\t\tthis._kernel = [\r\n\t\t\t\t\t[ 3 / 8, 1, 0 ],\r\n\t\t\t\t\t[ 3 / 8, 0, 1 ],\r\n\t\t\t\t\t[ 2 / 8, 1, 1 ]\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ErrorDiffusionArrayKernel.Stucki:\r\n\t\t\t\tthis._kernel = [\r\n\t\t\t\t\t[ 8 / 42, 1, 0 ],\r\n\t\t\t\t\t[ 4 / 42, 2, 0 ],\r\n\t\t\t\t\t[ 2 / 42, -2, 1 ],\r\n\t\t\t\t\t[ 4 / 42, -1, 1 ],\r\n\t\t\t\t\t[ 8 / 42, 0, 1 ],\r\n\t\t\t\t\t[ 4 / 42, 1, 1 ],\r\n\t\t\t\t\t[ 2 / 42, 2, 1 ],\r\n\t\t\t\t\t[ 1 / 42, -2, 2 ],\r\n\t\t\t\t\t[ 2 / 42, -1, 2 ],\r\n\t\t\t\t\t[ 4 / 42, 0, 2 ],\r\n\t\t\t\t\t[ 2 / 42, 1, 2 ],\r\n\t\t\t\t\t[ 1 / 42, 2, 2 ]\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ErrorDiffusionArrayKernel.Atkinson:\r\n\t\t\t\tthis._kernel = [\r\n\t\t\t\t\t[ 1 / 8, 1, 0 ],\r\n\t\t\t\t\t[ 1 / 8, 2, 0 ],\r\n\t\t\t\t\t[ 1 / 8, -1, 1 ],\r\n\t\t\t\t\t[ 1 / 8, 0, 1 ],\r\n\t\t\t\t\t[ 1 / 8, 1, 1 ],\r\n\t\t\t\t\t[ 1 / 8, 0, 2 ]\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ErrorDiffusionArrayKernel.Jarvis:\r\n\t\t\t\tthis._kernel = [\t\t\t// Jarvis, Judice, and Ninke / JJN?\r\n\t\t\t\t\t[ 7 / 48, 1, 0 ],\r\n\t\t\t\t\t[ 5 / 48, 2, 0 ],\r\n\t\t\t\t\t[ 3 / 48, -2, 1 ],\r\n\t\t\t\t\t[ 5 / 48, -1, 1 ],\r\n\t\t\t\t\t[ 7 / 48, 0, 1 ],\r\n\t\t\t\t\t[ 5 / 48, 1, 1 ],\r\n\t\t\t\t\t[ 3 / 48, 2, 1 ],\r\n\t\t\t\t\t[ 1 / 48, -2, 2 ],\r\n\t\t\t\t\t[ 3 / 48, -1, 2 ],\r\n\t\t\t\t\t[ 5 / 48, 0, 2 ],\r\n\t\t\t\t\t[ 3 / 48, 1, 2 ],\r\n\t\t\t\t\t[ 1 / 48, 2, 2 ]\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ErrorDiffusionArrayKernel.Burkes:\r\n\t\t\t\tthis._kernel = [\r\n\t\t\t\t\t[ 8 / 32, 1, 0 ],\r\n\t\t\t\t\t[ 4 / 32, 2, 0 ],\r\n\t\t\t\t\t[ 2 / 32, -2, 1 ],\r\n\t\t\t\t\t[ 4 / 32, -1, 1 ],\r\n\t\t\t\t\t[ 8 / 32, 0, 1 ],\r\n\t\t\t\t\t[ 4 / 32, 1, 1 ],\r\n\t\t\t\t\t[ 2 / 32, 2, 1 ],\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ErrorDiffusionArrayKernel.Sierra:\r\n\t\t\t\tthis._kernel = [\r\n\t\t\t\t\t[ 5 / 32, 1, 0 ],\r\n\t\t\t\t\t[ 3 / 32, 2, 0 ],\r\n\t\t\t\t\t[ 2 / 32, -2, 1 ],\r\n\t\t\t\t\t[ 4 / 32, -1, 1 ],\r\n\t\t\t\t\t[ 5 / 32, 0, 1 ],\r\n\t\t\t\t\t[ 4 / 32, 1, 1 ],\r\n\t\t\t\t\t[ 2 / 32, 2, 1 ],\r\n\t\t\t\t\t[ 2 / 32, -1, 2 ],\r\n\t\t\t\t\t[ 3 / 32, 0, 2 ],\r\n\t\t\t\t\t[ 2 / 32, 1, 2 ]\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ErrorDiffusionArrayKernel.TwoSierra:\r\n\t\t\t\tthis._kernel = [\r\n\t\t\t\t\t[ 4 / 16, 1, 0 ],\r\n\t\t\t\t\t[ 3 / 16, 2, 0 ],\r\n\t\t\t\t\t[ 1 / 16, -2, 1 ],\r\n\t\t\t\t\t[ 2 / 16, -1, 1 ],\r\n\t\t\t\t\t[ 3 / 16, 0, 1 ],\r\n\t\t\t\t\t[ 2 / 16, 1, 1 ],\r\n\t\t\t\t\t[ 1 / 16, 2, 1 ]\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase ErrorDiffusionArrayKernel.SierraLite:\r\n\t\t\t\tthis._kernel = [\r\n\t\t\t\t\t[ 2 / 4, 1, 0 ],\r\n\t\t\t\t\t[ 1 / 4, -1, 1 ],\r\n\t\t\t\t\t[ 1 / 4, 0, 1 ]\r\n\t\t\t\t];\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"ErrorDiffusionArray: unknown kernel = \" + kernel);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/image/array.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/image/array.ts\n **/","/**\r\n * @preserve\r\n * MIT License\r\n *\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to\r\n * deal in the Software without restriction, including without limitation the\r\n * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\r\n * sell copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in\r\n * all copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL\r\n * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\r\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\r\n * IN THE SOFTWARE.\r\n *\r\n * nearestColor.ts - part of Image Quantization Library\r\n */\r\nimport {IImageDitherer} from \"./common\"\r\nimport {HilbertCurveBase} from \"./spaceFillingCurves/hilbertCurve\"\r\nimport {IDistanceCalculator} from \"../distance/common\"\r\nimport {PointContainer} from \"../utils/pointContainer\"\r\nimport {Palette} from \"../utils/palette\"\r\nimport {Point} from \"../utils/point\"\r\nimport {intInRange} from \"../utils/arithmetic\"\r\n\r\nexport class ErrorDiffusionRiemersma implements IImageDitherer {\r\n\tprivate _distance : IDistanceCalculator;\r\n\tprivate _weights : number[];\r\n\tprivate _errorQueueSize : number;\r\n\tprivate _errorPropagation : number;\r\n\tprivate _max : number;\r\n\r\n\tconstructor(colorDistanceCalculator : IDistanceCalculator, errorQueueSize : number = 16, errorPropagation : number = 1) {\r\n\t\tthis._distance         = colorDistanceCalculator;\r\n\t\tthis._errorPropagation = errorPropagation;\r\n\t\tthis._errorQueueSize   = errorQueueSize;\r\n\t\tthis._max              = this._errorQueueSize;\r\n\t\tthis._createWeights();\r\n\t}\r\n\r\n\tquantize(pointBuffer : PointContainer, palette : Palette) : PointContainer {\r\n\t\tvar curve                                                           = new HilbertCurveBase(),\r\n\t\t\tpointArray                                                      = pointBuffer.getPointArray(),\r\n\t\t\twidth                                                           = pointBuffer.getWidth(),\r\n\t\t\theight                                                          = pointBuffer.getHeight(),\r\n\t\t\terrorQueue : {r : number; g : number; b : number; a : number}[] = [],\r\n\t\t\thead                                                            = 0;\r\n\r\n\t\tfor (var i = 0; i < this._errorQueueSize; i++) {\r\n\t\t\terrorQueue[ i ] = { r : 0, g : 0, b : 0, a : 0 };\r\n\t\t}\r\n\r\n\t\t// just for test!!\r\n\t\tvar testArray = new Array(height * width);\r\n\t\tfor (var i = 0; i < testArray.length; i++) {\r\n\t\t\ttestArray[ i ] = 0;\r\n\t\t}\r\n\r\n\t\tcurve.walk(width, height, (x, y) => {\r\n\t\t\t// just for test\r\n\t\t\ttestArray[ x + y * width ]++;\r\n\r\n\t\t\tvar p = pointArray[ x + y * width ], r = p.r, g = p.g, b = p.b, a = p.a;\r\n\t\t\tfor (var i = 0; i < this._errorQueueSize; i++) {\r\n\t\t\t\tvar weight = this._weights[ i ],\r\n\t\t\t\t\te      = errorQueue[ (i + head) % this._errorQueueSize ];\r\n\r\n\t\t\t\tr += e.r * weight;\r\n\t\t\t\tg += e.g * weight;\r\n\t\t\t\tb += e.b * weight;\r\n\t\t\t\ta += e.a * weight;\r\n\t\t\t}\r\n\r\n\t\t\tvar correctedPoint = Point.createByRGBA(\r\n\t\t\t\tintInRange(r, 0, 255),\r\n\t\t\t\tintInRange(g, 0, 255),\r\n\t\t\t\tintInRange(b, 0, 255),\r\n\t\t\t\tintInRange(a, 0, 255)\r\n\t\t\t\t),\r\n\t\t\t\tquantizedPoint = palette.getNearestColor(this._distance, correctedPoint);\r\n\r\n\t\t\t// update head and calculate tail\r\n\t\t\thead     = (head + 1) % this._errorQueueSize;\r\n\t\t\tvar tail = (head + this._errorQueueSize - 1) % this._errorQueueSize;\r\n\r\n\t\t\t// update error with new value\r\n\t\t\terrorQueue[ tail ].r = p.r - quantizedPoint.r;\r\n\t\t\terrorQueue[ tail ].g = p.g - quantizedPoint.g;\r\n\t\t\terrorQueue[ tail ].b = p.b - quantizedPoint.b;\r\n\t\t\terrorQueue[ tail ].a = p.a - quantizedPoint.a;\r\n\r\n\t\t\t// update point\r\n\t\t\tp.from(quantizedPoint);\r\n\t\t});\r\n\r\n\t\t// just for test\r\n\t\tfor (var i = 0; i < testArray.length; i++) {\r\n\t\t\tif (testArray[ i ] !== 1) throw new Error(\"x\");\r\n\t\t}\r\n\t\treturn pointBuffer;\r\n\t}\r\n\r\n\tprivate _createWeights() : void {\r\n\t\tthis._weights = [];\r\n\r\n\t\tvar multiplier = Math.exp(Math.log(this._max) / (this._errorQueueSize - 1));\r\n\t\tfor (var i = 0, next = 1; i < this._errorQueueSize; i++) {\r\n\t\t\tthis._weights[ i ] = (((next + 0.5) | 0) / this._max) * this._errorPropagation;\r\n\t\t\tnext *= multiplier;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/image/riemersma.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/image/riemersma.ts\n **/","export enum Direction {\r\n\tNONE = 0,\r\n\tUP,\r\n\tLEFT,\r\n\tRIGHT,\r\n\tDOWN,\r\n}\r\n\r\n// Check code against double-entrance into walk (walk=> callback => walk)\r\nexport class HilbertCurveBase {\r\n\tprivate _x : number;\r\n\tprivate _y : number;\r\n\tprivate _d : number;\r\n\tprivate _width : number;\r\n\tprivate _height : number;\r\n\tprivate _callback : (x : number, y : number, d : number) => void;\r\n\tprivate _level : number;\r\n\r\n\twalk(width : number, height : number, visitorCallback : (x : number, y : number, d : number) => void) : void {\r\n\t\tthis._x        = 0;\r\n\t\tthis._y        = 0;\r\n\t\tthis._d        = 0;\r\n\t\tthis._width    = width;\r\n\t\tthis._height   = height;\r\n\t\tthis._callback = visitorCallback;\r\n\r\n\t\tvar maxBound = Math.max(width, height);\r\n\r\n\t\tthis._level = (Math.log(maxBound) / Math.log(2) + 1) | 0;\r\n\t\tthis._walkHilbert(Direction.UP);\r\n\t\tthis._visit(Direction.NONE);\r\n\t}\r\n\r\n\t_walkHilbert(direction : Direction) {\r\n\t\tif (this._level < 1) return;\r\n\r\n\t\tthis._level--;\r\n\t\tswitch (direction) {\r\n\t\t\tcase Direction.LEFT:\r\n\t\t\t\tthis._walkHilbert(Direction.UP);\r\n\t\t\t\tthis._visit(Direction.RIGHT);\r\n\t\t\t\tthis._walkHilbert(Direction.LEFT);\r\n\t\t\t\tthis._visit(Direction.DOWN);\r\n\t\t\t\tthis._walkHilbert(Direction.LEFT);\r\n\t\t\t\tthis._visit(Direction.LEFT);\r\n\t\t\t\tthis._walkHilbert(Direction.DOWN);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase Direction.RIGHT:\r\n\t\t\t\tthis._walkHilbert(Direction.DOWN);\r\n\t\t\t\tthis._visit(Direction.LEFT);\r\n\t\t\t\tthis._walkHilbert(Direction.RIGHT);\r\n\t\t\t\tthis._visit(Direction.UP);\r\n\t\t\t\tthis._walkHilbert(Direction.RIGHT);\r\n\t\t\t\tthis._visit(Direction.RIGHT);\r\n\t\t\t\tthis._walkHilbert(Direction.UP);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase Direction.UP:\r\n\t\t\t\tthis._walkHilbert(Direction.LEFT);\r\n\t\t\t\tthis._visit(Direction.DOWN);\r\n\t\t\t\tthis._walkHilbert(Direction.UP);\r\n\t\t\t\tthis._visit(Direction.RIGHT);\r\n\t\t\t\tthis._walkHilbert(Direction.UP);\r\n\t\t\t\tthis._visit(Direction.UP);\r\n\t\t\t\tthis._walkHilbert(Direction.RIGHT);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase Direction.DOWN:\r\n\t\t\t\tthis._walkHilbert(Direction.RIGHT);\r\n\t\t\t\tthis._visit(Direction.UP);\r\n\t\t\t\tthis._walkHilbert(Direction.DOWN);\r\n\t\t\t\tthis._visit(Direction.LEFT);\r\n\t\t\t\tthis._walkHilbert(Direction.DOWN);\r\n\t\t\t\tthis._visit(Direction.DOWN);\r\n\t\t\t\tthis._walkHilbert(Direction.LEFT);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tthis._level++;\r\n\t}\r\n\r\n\tprivate _visit(direction : Direction) : void {\r\n\t\tif (this._x >= 0 && this._x < this._width && this._y >= 0 && this._y < this._height) {\r\n\t\t\tthis._callback(this._x, this._y, this._d);\r\n\t\t\tthis._d++;\r\n\t\t}\r\n\t\tswitch (direction) {\r\n\t\t\tcase Direction.LEFT:\r\n\t\t\t\tthis._x--;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Direction.RIGHT:\r\n\t\t\t\tthis._x++;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Direction.UP:\r\n\t\t\t\tthis._y--;\r\n\t\t\t\tbreak;\r\n\t\t\tcase Direction.DOWN:\r\n\t\t\t\tthis._y++;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/image/spaceFillingCurves/hilbertCurve.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/image/spaceFillingCurves/hilbertCurve.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * iq.ts - Image Quantization Library\r\n */\r\nimport {SSIM} from \"./ssim\"\r\n\r\nexport {\r\n\tSSIM\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/quality/index.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/quality/index.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * ssim.ts - part of Image Quantization Library\r\n */\r\nimport {PointContainer} from \"../utils/pointContainer\"\r\nimport {Y} from \"../constants/bt709\"\r\n\r\n// based on https://github.com/rhys-e/structural-similarity\r\n// http://en.wikipedia.org/wiki/Structural_similarity\r\nvar K1 = 0.01,\r\n\tK2 = 0.03;\r\n\r\nexport class SSIM {\r\n\tcompare(image1 : PointContainer, image2 : PointContainer) {\r\n\t\tif (image1.getHeight() !== image2.getHeight() || image1.getWidth() !== image2.getWidth()) {\r\n\t\t\tthrow new Error(\"Images have different sizes!\");\r\n\t\t}\r\n\r\n\t\tvar bitsPerComponent = 8,\r\n\t\t\tL                = (1 << bitsPerComponent) - 1,\r\n\t\t\tc1               = Math.pow((K1 * L), 2),\r\n\t\t\tc2               = Math.pow((K2 * L), 2),\r\n\t\t\tnumWindows       = 0,\r\n\t\t\tmssim            = 0.0;\r\n\r\n\t\t//calculate ssim for each window\r\n\t\tthis._iterate(image1, image2, (lumaValues1 : number[], lumaValues2 : number[], averageLumaValue1 : number, averageLumaValue2 : number) => {\r\n\t\t\t//calculate variance and covariance\r\n\t\t\tvar sigxy  = 0.0,\r\n\t\t\t\tsigsqx = 0.0,\r\n\t\t\t\tsigsqy = 0.0;\r\n\r\n\t\t\tfor (var i = 0; i < lumaValues1.length; i++) {\r\n\t\t\t\tsigsqx += Math.pow((lumaValues1[ i ] - averageLumaValue1), 2);\r\n\t\t\t\tsigsqy += Math.pow((lumaValues2[ i ] - averageLumaValue2), 2);\r\n\r\n\t\t\t\tsigxy += (lumaValues1[ i ] - averageLumaValue1) * (lumaValues2[ i ] - averageLumaValue2);\r\n\t\t\t}\r\n\r\n\t\t\tvar numPixelsInWin = lumaValues1.length - 1;\r\n\t\t\tsigsqx /= numPixelsInWin;\r\n\t\t\tsigsqy /= numPixelsInWin;\r\n\t\t\tsigxy /= numPixelsInWin;\r\n\r\n\t\t\t//perform ssim calculation on window\r\n\t\t\tvar numerator   = (2 * averageLumaValue1 * averageLumaValue2 + c1) * (2 * sigxy + c2),\r\n\t\t\t\tdenominator = (Math.pow(averageLumaValue1, 2) + Math.pow(averageLumaValue2, 2) + c1) * (sigsqx + sigsqy + c2),\r\n\t\t\t\tssim        = numerator / denominator;\r\n\r\n\t\t\tmssim += ssim;\r\n\t\t\tnumWindows++;\r\n\r\n\t\t});\r\n\t\treturn mssim / numWindows;\r\n\t}\r\n\r\n\tprivate _iterate(image1 : PointContainer, image2 : PointContainer, callback : (lumaValues1 : number[], lumaValues2 : number[], averageLumaValue1 : number, averageLumaValue2 : number) => void) {\r\n\t\tvar windowSize = 8,\r\n\t\t\twidth      = image1.getWidth(),\r\n\t\t\theight     = image1.getHeight();\r\n\r\n\t\tfor (var y = 0; y < height; y += windowSize) {\r\n\t\t\tfor (var x = 0; x < width; x += windowSize) {\r\n\t\t\t\t// avoid out-of-width/height\r\n\t\t\t\tvar windowWidth  = Math.min(windowSize, width - x),\r\n\t\t\t\t\twindowHeight = Math.min(windowSize, height - y);\r\n\r\n\t\t\t\tvar lumaValues1  = this._calculateLumaValuesForWindow(image1, x, y, windowWidth, windowHeight),\r\n\t\t\t\t\tlumaValues2  = this._calculateLumaValuesForWindow(image2, x, y, windowWidth, windowHeight),\r\n\t\t\t\t\taverageLuma1 = this._calculateAverageLuma(lumaValues1),\r\n\t\t\t\t\taverageLuma2 = this._calculateAverageLuma(lumaValues2);\r\n\r\n\t\t\t\tcallback(lumaValues1, lumaValues2, averageLuma1, averageLuma2);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _calculateLumaValuesForWindow(image : PointContainer, x : number, y : number, width : number, height : number) : number[] {\r\n\t\tvar pointArray            = image.getPointArray(),\r\n\t\t\tlumaValues : number[] = [],\r\n\t\t\tcounter               = 0;\r\n\r\n\t\tfor (var j = y; j < y + height; j++) {\r\n\t\t\tvar offset = j * image.getWidth();\r\n\t\t\tfor (var i = x; i < x + width; i++) {\r\n\t\t\t\tvar point             = pointArray[ offset + i ];\r\n\t\t\t\tlumaValues[ counter ] = point.r * Y.RED + point.g * Y.GREEN + point.b * Y.BLUE;\r\n\t\t\t\tcounter++;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn lumaValues;\r\n\t}\r\n\r\n\tprivate _calculateAverageLuma(lumaValues : number[]) : number {\r\n\t\tvar sumLuma = 0.0;\r\n\t\tfor (var i = 0; i < lumaValues.length; i++) {\r\n\t\t\tsumLuma += lumaValues[ i ];\r\n\t\t}\r\n\r\n\t\treturn sumLuma / lumaValues.length;\r\n\t}\r\n\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/quality/ssim.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/quality/ssim.ts\n **/","/**\r\n * @preserve\r\n * Copyright 2015-2016 Igor Bezkrovnyi\r\n * All rights reserved. (MIT Licensed)\r\n *\r\n * iq.ts - Image Quantization Library\r\n */\r\nimport * as arithmetic from \"./arithmetic\"\r\nimport {HueStatistics} from \"./hueStatistics\"\r\nimport {Palette} from \"./palette\"\r\nimport {Point} from \"./point\"\r\nimport {PointContainer} from \"./pointContainer\"\r\n\r\nexport {\r\n\tPoint,\r\n\tPointContainer,\r\n\tPalette,\r\n\tHueStatistics,\r\n\tarithmetic\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/index.ts\n **/\n\n\n/** WEBPACK FOOTER **\n ** webpack:///src/utils/index.ts\n **/","import {configForm} from \"./configForm\";\r\nimport {imageFoldersPanel} from \"./imageFileExplorer\";\r\n\r\nexport var leftPanel = {\r\n\ttype : \"line\",\r\n\trows : [\r\n\t\tconfigForm,\r\n\t\t{ type : \"header\", template : \"Image Folder\" },\r\n\t\timageFoldersPanel\r\n\t]\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/leftPanel/leftPanel.ts\n **/","import {update} from \"../../controller/ui\";\r\n\r\nexport var configForm = {\r\n\tview : \"form\", id : \"myform\", width : 300, elements : [\r\n\t\t{\r\n\t\t\tview       : \"richselect\",\r\n\t\t\tid         : \"option-colors\",\r\n\t\t\tlabel      : \"Colors\",\r\n\t\t\tlabelWidth : 175,\r\n\t\t\tvalue      : \"256\",\r\n\t\t\toptions    : [\r\n\t\t\t\t\"2\",\r\n\t\t\t\t\"4\",\r\n\t\t\t\t\"16\",\r\n\t\t\t\t\"64\",\r\n\t\t\t\t\"128\",\r\n\t\t\t\t\"256\",\r\n\t\t\t\t\"512\",\r\n\t\t\t\t\"1024\",\r\n\t\t\t\t\"2048\",\r\n\t\t\t\t\"8192\"\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tview       : \"richselect\",\r\n\t\t\tid         : \"option-distance\",\r\n\t\t\tlabel      : \"Color Distance Equation\",\r\n\t\t\tlabelWidth : 175,\r\n\t\t\tvalue      : \"2\",\r\n\t\t\toptions    : [\r\n\t\t\t\t{ id : 1, value : \"Euclidean\" },\r\n\t\t\t\t{ id : 2, value : \"Manhattan\" },\r\n\t\t\t\t{ id : 3, value : \"CIEDE2000\" },\r\n\t\t\t\t{ id : 4, value : \"CIE94\" },\r\n\t\t\t\t{ id : 5, value : \"RgbQuant Euclidean (w/o ALPHA)\" },\r\n\t\t\t\t{ id : 6, value : \"RgbQuant Euclidean (with Alpha)\" },\r\n\t\t\t\t{ id : 7, value : \"Manhattan (with sRGB coefficients)\" },\r\n\t\t\t\t{ id : 8, value : \"CMETRIC\" },\r\n\t\t\t\t{ id : 9, value : \"PNGQUANT\" },\r\n\t\t\t\t{ id : 10, value : \"Manhattan Nommyde\" },\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tview       : \"richselect\",\r\n\t\t\tid         : \"option-palette\",\r\n\t\t\tlabel      : \"Quantization Method\",\r\n\t\t\tlabelWidth : 175,\r\n\t\t\tvalue      : \"1\",\r\n\t\t\toptions    : [\r\n\t\t\t\t{ id : 1, value : \"neuquant (Original, Integer)\" },\r\n\t\t\t\t{ id : 2, value : \"rgbquant\" },\r\n\t\t\t\t{ id : 3, value : \"wuquant\" },\r\n\t\t\t\t{ id : 4, value : \"neuquant (Floating Point)\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\tview       : \"richselect\",\r\n\t\t\tid         : \"option-image\",\r\n\t\t\tlabel      : \"Palette-to-Image Method\",\r\n\t\t\tlabelWidth : 175,\r\n\t\t\tvalue      : \"1\",\r\n\t\t\toptions    : [\r\n\t\t\t\t{ id : 1, value : \"Nearest (Simple)\" },\r\n\t\t\t\t{ id : 2, value : \"ErrorDiffusion: Array (Floyd-Steinberg)\" },\r\n\t\t\t\t{ id : 4, value : \"ErrorDiffusion: Array (Stucki)\" },\r\n\t\t\t\t{ id : 5, value : \"ErrorDiffusion: Array (Atkinson)\" },\r\n\t\t\t\t{ id : 6, value : \"ErrorDiffusion: Array (Jarvis)\" },\r\n\t\t\t\t{ id : 7, value : \"ErrorDiffusion: Array (Burkes)\" },\r\n\t\t\t\t{ id : 8, value : \"ErrorDiffusion: Array (Sierra)\" },\r\n\t\t\t\t{ id : 9, value : \"ErrorDiffusion: Array (TwoSierra)\" },\r\n\t\t\t\t{ id : 10, value : \"ErrorDiffusion: Array (SierraLite)\" },\r\n\t\t\t\t{ id : 3, value : \"ErrorDiffusion: Array (False Floyd-Steinberg)\" },\r\n\t\t\t\t{ id : 11, value : \"ErrorDiffusion: Riemersma (Hilbert Curve)\" }\r\n\t\t\t]\r\n\t\t},\r\n\t\t{\r\n\t\t\ttype     : \"line\",\r\n\t\t\tview     : \"toolbar\",\r\n\t\t\telements : [ {}, {\r\n\t\t\t\tview : \"button\", value : \"Update\", width : 90, on : {\r\n\t\t\t\t\tonItemClick : () => {\r\n\t\t\t\t\t\tupdate(true)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} ]\r\n\t\t}\r\n\r\n\t]\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/leftPanel/configForm.ts\n **/","import {imageData} from \"../../data/imageList\";\r\nimport {update} from \"../../controller/ui\";\r\n\r\nexport var imageFoldersPanel = {\r\n\tid       : \"image\",\r\n\tview     : \"grouplist\",\r\n\ttype     : {\r\n\t\theight : 84\r\n\t},\r\n\t//autoheight : true,\r\n\t//height : 800,\r\n\ttemplate : function (obj : any) {\r\n\t\tif (obj.dataUrl) {\r\n\t\t\treturn \"<img style=\\\"height: 84px\\\" src=\\\"\" + obj.dataUrl + \"\\\"/>\"\r\n\t\t} else if (obj.folder && obj.file) {\r\n\t\t\treturn \"<img style=\\\"height: 84px\\\" src=\\\"images/\" + obj.folder + \"/\" + obj.file + \"\\\"/>\"\r\n\t\t} else {\r\n\t\t\treturn \"<div style=\\\"line-height: 84px\\\">\" + obj.value + \"</div>\";\r\n\t\t}\r\n\t},\r\n\tselect   : true,\r\n\t//scroll : false,\r\n\tdata     : imageData,\r\n\ton       : {\r\n\t\t\"onafterselect\" : (id) => {\r\n\t\t\tupdate(true);\r\n\t\t}\r\n\t},\r\n\tready    : function () {  //select USA\r\n\t\t//this.select(0);\r\n\t}\r\n\r\n\t/*\r\n\t select:true,\r\n\t on:{ \"onafterselect\":country_selected },\r\n\t type:{ height: 84 },\r\n\t ready:function(){  //select USA\r\n\t this.select(6);\r\n\t }\r\n\t */\r\n};\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/leftPanel/imageFileExplorer.ts\n **/","var imageList = {\r\n\t\"alpha\"     : [\r\n\t\t\"children-745674_1920.png\",\r\n\t\t\"alpha.png\",\r\n\t\t\"AlphaBall.png\",\r\n\t\t\"AlphaEdge.png\",\r\n\t\t\"alphatest.png\",\r\n\t\t\"cherries-realistic.png\",\r\n\t\t\"dice-trans.png\",\r\n\t\t\"pnggrad16rgba.png\",\r\n\t\t\"tumblr_moyw62RyQo1s5jjtzo1_500.png\",\r\n\t\t\"Wilber-huge-alpha.png\"\r\n\t],\r\n\t\"gradients\" : [\r\n\t\t\"colorpan2.png\",\r\n\t\t\"dithgrads.png\",\r\n\t\t\"grad_default.png\",\r\n\t\t\"grad.png\",\r\n\t\t\"grad5.png\",\r\n\t\t\"grad6.png\",\r\n\t\t\"grad7.png\",\r\n\t\t\"grad8.png\",\r\n\t\t\"pnggrad8rgb.png\",\r\n\t\t\"sculptmap.png\"\r\n\t],\r\n\t\"graphics\"  : [\r\n\t\t\"baseball.jpg\",\r\n\t\t\"bebop.jpg\",\r\n\t\t\"minecraft.png\",\r\n\t\t\"penguins.png\",\r\n\t\t\"pool.png\",\r\n\t\t\"rose.png\",\r\n\t\t\"smb3.png\",\r\n\t\t\"super1.png\",\r\n\t\t\"super2.png\"\r\n\t],\r\n\t\"photos1\"   : [\r\n\t\t\"biking.jpg\",\r\n\t\t\"bluff.jpg\",\r\n\t\t\"cloudplane.jpg\",\r\n\t\t\"compcube.jpg\",\r\n\t\t\"fishie2.jpg\",\r\n\t\t\"kitteh1.jpg\",\r\n\t\t\"medusa.jpg\",\r\n\t\t\"pheasant.jpg\",\r\n\t\t\"photoman.jpg\",\r\n\t\t\"rainbow.jpg\",\r\n\t\t\"redpanda.jpg\"\r\n\t],\r\n\t\"photos2\"   : [\r\n\t\t\"book-shelf-349934_1920.jpg\",\r\n\t\t\"children-602977_1920.png\",\r\n\t\t\"old-books-436498_1920.png\",\r\n\t\t\"pens-93177_1920.png\",\r\n\t\t\"baby.jpg\",\r\n\t\t\"chopsuey.jpg\",\r\n\t\t\"fish.jpg\",\r\n\t\t\"kitteh2.jpg\",\r\n\t\t\"quantfrog.png\",\r\n\t\t\"treefrog.jpg\",\r\n\t\t\"quantfrog_small.png\"\r\n\t]\r\n};\r\n\r\nvar result = [];\r\n\r\nfor (var folder in imageList) {\r\n\tif (imageList.hasOwnProperty(folder)) {\r\n\t\tvar folderData = {\r\n\t\t\tid    : \"image-list-\" + folder,\r\n\t\t\topen  : true,\r\n\t\t\tvalue : folder,\r\n\t\t\tdata  : []\r\n\t\t};\r\n\r\n\t\timageList[ folder ].forEach(file => {\r\n\t\t\tfolderData.data.push({\r\n\t\t\t\tfile   : file,\r\n\t\t\t\tfolder : folder,\r\n\t\t\t\tid     : \"image-list-\" + folder + \"-\" + file\r\n\t\t\t})\r\n\t\t});\r\n\r\n\t\tresult.push(folderData);\r\n\t}\r\n}\r\n\r\nexport var imageData = result;\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/data/imageList.ts\n **/","import {quantizedImageClickToCompare} from \"./clickToCompare\";\r\nimport {quantizedImageOriginalVsQuantized} from \"./originalVsQuantized\";\r\nimport * as Controller from \"../../controller/ui\";\r\n\r\nexport var rightPanel = {\r\n\tview   : \"tabview\", gravity : 3,\r\n\ttabbar : {\r\n\t\toptionWidth : 200, value : \"clickToCompare\", options : [\r\n\t\t\t{ value : 'Click-to-Compare', id : 'clickToCompare' },\r\n\t\t\t{ value : 'Original-vs-Quantized', id : 'originalVsQuantized' }\r\n\t\t],\r\n\t\ton          : {\r\n\t\t\tonAfterTabClick : (id) => {\r\n\t\t\t\tController.update(false);\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcells  : [\r\n\t\tquantizedImageClickToCompare,\r\n\t\tquantizedImageOriginalVsQuantized,\r\n\t]\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/rightPanel/rightPanel.ts\n **/","export var quantizedImageClickToCompare = {\r\n\tid   : \"clickToCompare\",\r\n\trows : [\r\n\t\t{\r\n\t\t\tid     : \"imageView1-statistics\",\r\n\t\t\tview   : \"template\",\r\n\t\t\theight : 30\r\n\t\t},\r\n\r\n\t\t{\r\n\t\t\tcols : [\r\n\t\t\t\t{\r\n\t\t\t\t\trows : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype     : \"header\",\r\n\t\t\t\t\t\t\ttemplate : \"Palette\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid    : \"imageView1-palette\",\r\n\t\t\t\t\t\t\twidth : 140,\r\n\t\t\t\t\t\t\tview  : \"template\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trows : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype     : \"header\",\r\n\t\t\t\t\t\t\ttemplate : \"Image\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid   : \"imageView1-image\",\r\n\t\t\t\t\t\t\tview : \"template\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\r\n\t]\r\n\r\n\t//view : \"template\"\r\n};\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/rightPanel/clickToCompare.ts\n **/","export var quantizedImageOriginalVsQuantized = {\r\n\tid   : \"originalVsQuantized\",\r\n\trows : [\r\n\t\t{\r\n\t\t\tid     : \"imageView2-statistics\",\r\n\t\t\tview   : \"template\",\r\n\t\t\theight : 30\r\n\t\t},\r\n\t\t{\r\n\t\t\tcols : [\r\n\t\t\t\t{\r\n\t\t\t\t\trows : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype     : \"header\",\r\n\t\t\t\t\t\t\ttemplate : \"Palette\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid    : \"imageView2-palette\",\r\n\t\t\t\t\t\t\twidth : 140,\r\n\t\t\t\t\t\t\tview  : \"template\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trows : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype     : \"header\",\r\n\t\t\t\t\t\t\ttemplate : \"Original Image\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid   : \"imageView2-image-original\",\r\n\t\t\t\t\t\t\tview : \"template\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\trows : [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttype     : \"header\",\r\n\t\t\t\t\t\t\ttemplate : \"Quantized Image\"\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid   : \"imageView2-image-quantized\",\r\n\t\t\t\t\t\t\tview : \"template\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t}\r\n\t]\r\n};\r\n\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/ui/rightPanel/originalVsQuantized.ts\n **/"],"sourceRoot":""}